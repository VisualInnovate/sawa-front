import{_ as P,u as L,c as m,r as _,o as r,d as u,f as o,w as g,e as l,h as D,F as U,z as B,t as n,g as p,T as N,D as I,E as f}from"./main-444ef7c0.js";import{C as M}from"./ChildTaps-546131c2.js";import{h as k}from"./moment-fbc5633a.js";const T={components:{ChildTaps:M},data(){return{child_id:L("child_id",Number),maxDate:new Date,details:[],evalate:{},error:{},days:[0,1,2,3,4,5,6],business_hours:[],submitted:!1,slots:[],delete_id:0,doctors:{},deleteDialog:!1,total_pages:0,current_page:0,updatedialog:!1,evaluate_types:[{name:"side profile",id:1},{name:"milestone",id:2},{name:"barrier",id:3},{name:"ablls",id:4},{name:"carolina",id:5}]}},methods:{opennew(){this.updatedialog=!this.updatedialog},getdoctor_evalte(e){m.post("api/evaluation-doctors",{evaluation_type:e}).then(t=>{this.doctors=t.data.doctors})},getDays(e){this.business_hours=this.doctors.find(t=>t.id==e).business_hours,console.log(this.business_hours)},gettimes(e){m.post("api/users/available/slots",{user_id:this.evalate.specialist_id,evaluation_type:this.evalate.evaluation_type,date:k(e).format("Y-MM-DD")}).then(t=>{this.slots=t.data.slots})},go_evaluate(e,t,c){t==2&&this.$router.push({name:"milestone-resulte",params:{id:c,evla_id:e}}),t==3&&this.$router.push({name:"barrier-resulte",params:{id:c}}),t==4&&this.$router.push({name:"ablls-resulte",params:{id:e}}),t==5&&this.$router.push({name:"carolina-resulte",params:{id:e}})},create(){var e,t,c,y,s;m.post("api/evaluation-request",{child_id:localStorage.getItem("child_id"),consultant_id:localStorage.getItem("user_id"),evaluation_type:this.evalate.evaluation_type,date:k(this.evalate.date).format("Y-MM-DD"),specialist_id:(e=this.evalate)==null?void 0:e.specialist_id,start_time:(c=(t=this.evalate)==null?void 0:t.Session_time)==null?void 0:c.start,end_time:(s=(y=this.evalate)==null?void 0:y.Session_time)==null?void 0:s.end}).then(d=>{this.updatedialog=!this.updatedialog,this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_add_success")}`,life:3e3}),this.$router.push({name:"children-request"})}).catch(d=>{this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${this.$t("mission_error")}`,life:3e3})})},getusers(){m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations`).then(e=>{this.total_pages=e.data.evaluations.last_page+1,this.details=e.data.evaluations}).catch(e=>{})},deleteevalution(e){this.delete_id=e,this.deleteDialog=!this.deleteDialog},deleteAction(){m.delete(`api/evaluations/${this.delete_id}/delete`).then(e=>{this.getusers(),this.deleteDialog=!this.deleteDialog})},getdoctors(){m.get("api/doctors").then(e=>{this.doctors=e.data.doctors}).catch(e=>{})}},computed:{filteredDays(){const e=this.business_hours.map(t=>t.day);return this.days.filter(t=>!e.includes(t))}},watch:{current_page(e,t){console.log(`Counter changed from ${t} to ${e}`),m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations?page=${e}`).then(c=>{this.details=c.data.evaluations})}},mounted(){this.getusers(),this.getdoctors(),this.child_id=localStorage.getItem("child_id")}},q={class:"my-2"},z={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4"},E={class:"shadow-md bg-slate-100 rounded-sm p-4 grid grid-cols-2"},F={class:"flex py-2"},A={class:"my-auto font-bold"},R={class:"text-xl px-1 my-auto"},Y={class:"flex py-2"},j={class:"my-auto font-bold"},J={class:"text-xl px-1 my-auto"},O={class:"flex py-2"},G={class:"my-auto font-bold"},H={class:"text-xl px-1 my-auto"},K={class:"flex py-2"},Q={class:"my-auto font-bold"},W={key:0,class:"text-xl px-1 my-auto"},X={key:1,class:"text-xl px-1 my-auto"},Z={class:"text-center"},$={class:"w-full pb-2 text-center"},ee={key:0,class:"card"},te={class:"flex align-items-center justify-content-center"},se=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),le={class:"flex flex-column gap-2 py-1"},ie={class:"w-full text-right",for:"username"},oe={key:0,class:"flex flex-column gap-2 py-1"},ae={class:"w-full text-right",for:"username"},ne={key:1,class:"flex flex-column gap-2"},de={class:"w-full text-right",for:"username"},re={key:0,class:"mt-1 mb-5 text-red-500"},ue={key:2,class:"flex flex-column gap-2 py-1"},ce={class:"w-full text-right",for:"username"},pe={key:0,class:"mt-1 mb-5 text-red-500"},me={class:"w-full text-center"};function _e(e,t,c,y,s,d){const w=_("ChildTaps"),h=_("Button"),C=_("Paginator"),x=_("Dialog"),b=_("Dropdown"),V=_("Calendar"),S=_("toast");return r(),u("div",null,[o(w),o(N,null,{default:g(()=>[l("div",q,[o(h,{onClick:d.opennew,class:"bg-[green] m-auto"},{default:g(()=>[D(" اضافة تقييم")]),_:1},8,["onClick"])]),l("div",z,[(r(!0),u(U,null,B(s.details.data,i=>{var v;return r(),u("div",E,[l("div",null,[l("div",F,[l("h3",A,n(e.$t("اسم التقييم"))+" :",1),l("p",R,n(i.title),1)]),l("div",Y,[l("h3",j,n(e.$t("تاريخ التقييم"))+" :",1),l("p",J,n(i.date),1)]),l("div",O,[l("h3",G,n(e.$t("اسم المقييم"))+" :",1),l("p",H,n((v=i.specialist)==null?void 0:v.name),1)]),l("div",K,[l("h3",Q,n(e.$t(" حالة التقييم"))+" :",1),i.status==1?(r(),u("p",W," منتهي")):p("",!0),i.status==0?(r(),u("p",X," تحت التقييم ")):p("",!0)])]),l("div",Z,[o(h,{onClick:a=>d.go_evaluate(i.id,i.type,i.child_id),class:"details m-auto"},{default:g(()=>[D(" نتائج التقييم")]),_:2},1032,["onClick"]),o(h,{icon:"pi pi-trash",onClick:a=>d.deleteevalution(i.id,i.child_id),class:"delete m-auto"},null,8,["onClick"])])])}),256))]),l("div",$,[s.details.data!=[]?(r(),u("div",ee,[o(C,{first:s.current_page,"onUpdate:first":t[0]||(t[0]=i=>s.current_page=i),rows:1,totalRecords:s.total_pages,rowsPerPageOptions:[10,20,30],template:{default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  JumpToPageDropdown"}},null,8,["first","totalRecords"])])):p("",!0)])]),_:1}),l("div",null,[o(x,{visible:s.deleteDialog,"onUpdate:visible":t[2]||(t[2]=i=>s.deleteDialog=i),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:g(()=>[o(h,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[1]||(t[1]=i=>s.deleteDialog=!1)},null,8,["label"]),o(h,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:d.deleteAction},null,8,["label","onClick"])]),default:g(()=>[l("div",te,[se,l("span",null,n(e.$t("هل انت متاكد من ازالة هذا العنصر"))+" >?",1)])]),_:1},8,["visible","header"]),o(x,{visible:s.updatedialog,"onUpdate:visible":t[10]||(t[10]=i=>s.updatedialog=i),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:g(()=>{var i,v;return[l("form",{onSubmit:t[9]||(t[9]=I((...a)=>d.create&&d.create(...a),["prevent"])),class:""},[l("div",le,[l("label",ie,n(e.$t("evalute_type")),1),o(b,{"onUpdate:modelValue":[d.getdoctor_evalte,t[3]||(t[3]=a=>s.evalate.evaluation_type=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.evaluation_type,"option-value":"id",filter:"",options:s.evaluate_types,optionLabel:"name",class:f(["w-full",{"p-invalid":s.submitted&&!s.evalate.evaluation_type}])},null,8,["onUpdate:modelValue","modelValue","options","class"])]),s.evalate.evaluation_type?(r(),u("div",oe,[l("label",ae,n(e.$t("Name_evaluator")),1),o(b,{"onUpdate:modelValue":[d.getDays,t[4]||(t[4]=a=>s.evalate.specialist_id=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.specialist_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",class:f(["w-full",{"p-invalid":s.submitted&&!s.evalate.specialist_id}])},null,8,["onUpdate:modelValue","modelValue","options","class"])])):p("",!0),s.evalate.specialist_id?(r(),u("div",ne,[l("label",de,n(e.$t("Evaluation_date")),1),o(V,{"onUpdate:modelValue":[t[5]||(t[5]=a=>d.gettimes(a)),t[6]||(t[6]=a=>s.evalate.date=a)],disabledDays:d.filteredDays,style:{width:"100%"},showButtonBar:"",modelValue:s.evalate.date,modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":s.submitted&&!s.evalate.date}),minDate:s.maxDate},null,8,["disabledDays","modelValue","class","minDate"]),(i=s.error)!=null&&i.date?(r(),u("div",re,n(s.error.date[0]),1)):p("",!0)])):p("",!0),s.evalate.date?(r(),u("div",ue,[l("label",ce,n(e.$t("hour_evaluator")),1),o(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.Session_time,"onUpdate:modelValue":t[7]||(t[7]=a=>s.evalate.Session_time=a),filter:"",options:s.slots,optionLabel:"key",class:f([{"p-invalid":s.submitted&&!s.evalate.Session_time},"w-full"])},null,8,["modelValue","options","class"]),(v=s.error)!=null&&v.specialist_id?(r(),u("div",pe,n(s.error.specialist_id[0]),1)):p("",!0)])):p("",!0),l("div",me,[o(h,{type:"submit",onClick:t[8]||(t[8]=a=>s.submitted=!0),class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],32)]}),_:1},8,["visible","header"])]),o(S)])}const fe=P(T,[["render",_e]]);export{fe as default};
