import{_ as de,m as ce,a2 as re,q as n,ak as ue,a3 as pe,al as me,r as u,am as K,o as b,d as _,e as o,f as s,g as i,t as c,i as v,L as ve,h as g,n as fe,j as V,c as f,y as be,z as he}from"./main-cc752e98.js";const T=N=>(be("data-v-dc0d03e6"),N=N(),he(),N),ye={class:"grid"},_e={class:"col-12"},ge={class:"card p-4 shadow-2 border-round"},ke={class:"text-2xl font-bold"},$e={class:"flex gap-2"},we={class:"card shadow-1 surface-0"},Ce={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},xe={class:"flex gap-2"},Se={class:"p-input-icon-left"},Le=T(()=>o("i",{class:"pi pi-search"},null,-1)),De={class:"font-medium"},Ve={class:"flex gap-2"},Te=T(()=>o("div",{class:"text-center py-4"},[o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),o("p",{class:"text-xl"},"No records found")],-1)),Ne={class:"flex justify-content-center align-items-center py-4"},Ee={class:"flex align-items-center justify-content-center"},Ie=T(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ue={key:0},Be={class:"flex flex-column gap-2"},Me={class:"w-full text-right",for:"username"},Re={key:0,class:"mt-1 mb-5 text-red-500"},je={class:"w-full text-center"},ze={class:"flex flex-column gap-2"},Pe={class:"w-full text-right",for:"username"},qe={key:0,class:"mt-1 mb-5 text-red-500"},Ae={class:"w-full text-center"},Fe={class:"flex align-items-center justify-content-center"},Oe=T(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Ge={key:0},We={class:"flex align-items-center justify-content-center"},He=T(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Je={key:0},Ke={__name:"index",setup(N){const m=ce(),P=re(),q=n([]),M=n(!0),k=n({}),$=n(""),R=n(null),w=n(!1),A=n(""),F=n(null),O=n(null),E=n({}),I=n(!1),G=n({}),j=n({}),W=n(!1),C=n(!1),x=n(!1),H=n(),U=n("");ue(()=>{ae()});const Q=()=>{f.post("/api/users").then(e=>{q.value=e.data.users.data})},h=()=>{M.value=!0,f.get("/api/employees").then(e=>{M.value=!1,R.value=e.data.data,console.log(R.value)})};pe(()=>{h(),Q()});const X=e=>{P.push({name:"Employee-update",params:{id:e}})},Y=e=>{f.get(`/api/employees/rest/${e}`,{action:"delete"}).then(l=>{console.log("Done",l.data),m.add({severity:"success",summary:"Successful",detail:"Successful rest the employees",life:3e3})}).catch(l=>{console.error(l),m.add({severity:"warn",summary:"Error",detail:"can't rest the employees",life:3e3})})},Z=(e,l)=>{f.get("/api/employees").then(a=>{console.log("Done get api");let B;a.data.data.forEach((p,z)=>{if(p.id==l){B=z;return}});let S=a.data.data[B].is_clocked_in,d;e.target.id=="stu"&&(d=e.target),e.target.id!="stu"&&(d=e.target.parentElement),S||f.post(`/api/attendance/dashboard/clock-in/${l}`).then(p=>{d.classList.remove("p-button-secondary"),d.classList.add("p-button-info"),d.children[0].classList.remove("pi-sign-out"),d.children[0].classList.add("pi-sign-in"),m.add({severity:"success",summary:"Successful",detail:"Successful login employees",life:3e3}),h()}).catch(p=>{console.log("cann't clock in",p),m.add({severity:"warn",summary:"Error",detail:"can't login employees",life:3e3})}),S&&f.post(`/api/attendance/dashboard/clock-out/${l}`).then(p=>{d.classList.remove("p-button-info"),d.classList.add("p-button-secondary"),d.children[0].classList.remove("pi-sign-in"),d.children[0].classList.add("pi-sign-out"),console.log("Done clock out"),m.add({severity:"success",summary:"Successful",detail:"Successful logout employees",life:3e3}),h()}).catch(p=>{console.log("cann't clock out",p),m.add({severity:"warn",summary:"Error",detail:"can't logout employees",life:3e3})})}).catch(a=>{console.error(a)})},ee=()=>{P.push({name:"Employees-create"})},te=e=>{console.log(e),w.value=!0,A.value=e},le=()=>{f.post("/api/employees/import/users",j.value).then(e=>{console.log(e.data),h(),I.value=!I.value,m.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=n({})}).catch(e=>{$.value=e.response.data.errors})},se=()=>{f.delete(`/api/employees/${A.value}`).then(e=>{console.log(e.data),w.value=!1,h(),m.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},oe=()=>{O.value.exportCSV()},ae=()=>{E.value={global:{value:null,matchMode:me.CONTAINS}}};return(e,l)=>{const a=u("Button"),B=u("Toolbar"),J=u("Toast"),S=u("InputText"),d=u("Column"),p=u("Tag"),z=u("ProgressSpinner"),ne=u("DataTable"),L=u("Dialog"),ie=u("MultiSelect"),y=K("can"),D=K("tooltip");return b(),_("div",ye,[o("div",_e,[o("div",ge,[s(B,{class:"mb-4"},{start:i(()=>[o("h2",ke,c(e.$t("Employees")),1)]),end:i(()=>[o("div",$e,[v(s(a,{label:e.$t("create_button"),icon:"pi pi-plus",class:"p-button-success mr-2 no-print",onClick:ee},null,8,["label"]),[[y,"employees create"]]),v(s(a,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",onClick:oe},null,8,["label"]),[[y,"employees list"]])])]),_:1}),s(J),o("div",we,[v((b(),ve(ne,{ref_key:"dt",ref:O,selection:F.value,"onUpdate:selection":l[1]||(l[1]=t=>F.value=t),value:R.value,loading:M.value,"data-key":"id",paginator:!0,rows:10,filters:E.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:i(()=>[o("div",Ce,[o("div",xe,[o("span",Se,[Le,s(S,{modelValue:E.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=t=>E.value.global.value=t),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),v(s(a,{icon:"pi pi-refresh",class:"p-button-text",onClick:h},null,512),[[D,"Refresh data",void 0,{top:!0}]])])])]),empty:i(()=>[Te]),loading:i(()=>[o("div",Ne,[s(z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:i(()=>[s(d,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(d,{field:"name",header:e.$t("name"),sortable:!0},{body:i(t=>[o("span",De,c(t.data.name),1)]),_:1},8,["header"]),s(d,{field:"email",header:e.$t("email"),sortable:!0},{body:i(t=>[g(c(t.data.email),1)]),_:1},8,["header"]),s(d,{field:"basic_salary",header:e.$t("basic_salary"),sortable:!0},{body:i(t=>[g(c(t.data.basic_salary),1)]),_:1},8,["header"]),s(d,{field:"shift.title",header:e.$t("shift_title"),sortable:!0},{body:i(t=>{var r;return[s(p,{value:((r=t.data.shift)==null?void 0:r.title)||"N/A",severity:"info"},null,8,["value"])]}),_:1},8,["header"]),s(d,{"header-style":"min-width:10rem;",class:"no-print"},{body:i(t=>[o("div",Ve,[v(s(a,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:r=>X(t.data.user.id)},null,8,["onClick"]),[[y,"employees edit"],[D,e.$t("edit"),void 0,{top:!0}]]),v(s(a,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:r=>te(t.data.id)},null,8,["onClick"]),[[y,"employees delete"],[D,e.$t("delete"),void 0,{top:!0}]]),v(s(a,{icon:"pi pi-wrench",class:"p-button-rounded p-button-help",onClick:r=>{x.value=!0,U.value=t.data.id}},null,8,["onClick"]),[[D,e.$t("Rest"),void 0,{top:!0}]]),v(s(a,{class:fe(["p-button-rounded",t.data.is_clocked_in?"p-button-info":"p-button-secondary"]),icon:t.data.is_clocked_in?"pi pi-sign-in":"pi pi-sign-out",onClick:r=>{C.value=!0,U.value=t.data.id,H.value=t.data.is_clocked_in},id:"stu"},null,8,["class","icon","onClick"]),[[y,"employees edit"],[D,t.data.is_clocked_in?e.$t("clockIn"):e.$t("clockOut"),void 0,{top:!0}]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[y,"employees list"]])]),s(L,{visible:w.value,"onUpdate:visible":l[3]||(l[3]=t=>w.value=t),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:i(()=>[s(a,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[2]||(l[2]=t=>w.value=!1)},null,8,["label"]),s(a,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:se},null,8,["label"])]),default:i(()=>[o("div",Ee,[Ie,k.value?(b(),_("span",Ue,[g(c(e.$t("remove_item"))+" ",1),o("b",null,c(k.value.first_name),1),g("? ")])):V("",!0)])]),_:1},8,["visible","header"]),s(L,{visible:I.value,"onUpdate:visible":l[5]||(l[5]=t=>I.value=t),style:{width:"450px"},header:e.$t("create_employee"),modal:!0},{default:i(()=>{var t;return[o("div",Be,[o("label",Me,c(e.$t("users")),1),s(ie,{modelValue:j.value.users_ids,"onUpdate:modelValue":l[4]||(l[4]=r=>j.value.users_ids=r),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:q.value,optionLabel:"name",placeholder:e.$t("users"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(t=$.value)!=null&&t.name?(b(),_("div",Re,c($.value.name[0]),1)):V("",!0)]),o("div",je,[s(a,{onClick:le,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),s(L,{visible:W.value,"onUpdate:visible":l[7]||(l[7]=t=>W.value=t),style:{width:"450px"},header:e.$t("update_employee"),modal:!0},{default:i(()=>{var t;return[o("div",ze,[o("label",Pe,c(e.$t("title")),1),s(S,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:G.value.title,"onUpdate:modelValue":l[6]||(l[6]=r=>G.value.title=r),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(t=$.value)!=null&&t.title?(b(),_("div",qe,c($.value.name[0]),1)):V("",!0)]),o("div",Ae,[s(a,{onClick:e.editescrud,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["onClick","label"])])]}),_:1},8,["visible","header"]),s(L,{visible:C.value,"onUpdate:visible":l[10]||(l[10]=t=>C.value=t),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:i(()=>[s(a,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[8]||(l[8]=t=>C.value=!1)},null,8,["label"]),s(a,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:l[9]||(l[9]=t=>{C.value=!1,Z(t,U.value)})},null,8,["label"])]),default:i(()=>[o("div",Fe,[Oe,k.value?(b(),_("span",Ge,[g(c(H.value?e.$t("clocked_out"):e.$t("clocked_in"))+" ",1),o("b",null,c(k.value.first_name),1),g("? ")])):V("",!0)])]),_:1},8,["visible","header"]),s(L,{visible:x.value,"onUpdate:visible":l[13]||(l[13]=t=>x.value=t),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:i(()=>[s(a,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[11]||(l[11]=t=>x.value=!1)},null,8,["label"]),s(a,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:l[12]||(l[12]=t=>{x.value=!1,Y(t,U.value)})},null,8,["label"])]),default:i(()=>[o("div",We,[He,k.value?(b(),_("span",Je,c(e.$t("sure")),1)):V("",!0)])]),_:1},8,["visible","header"])])])])}}},Xe=de(Ke,[["__scopeId","data-v-dc0d03e6"]]);export{Xe as default};
