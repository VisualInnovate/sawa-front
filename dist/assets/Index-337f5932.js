import{ao as ce,ap as ve,I as m,ax as fe,aq as he,ah as ge,ar as ye,r as h,as as be,o as n,d as u,e as a,f as i,w as c,i as L,x as _e,t as s,h as B,g as p,ay as le,c as y}from"./main-aa97cdbf.js";const we={class:"grid",style:{"max-height":"90vh !important",overflow:"scroll"}},ke={class:"col-12"},xe={class:"my-2"},Ve={class:"shadow-xl"},$e={class:"flex w-full justify-between align-items-center"},Ue={class:"m-0 my-auto"},Ce={class:"block mt-2 md:mt-0 p-input-icon-left"},Se=a("i",{class:"pi pi-search"},null,-1),De=["src"],qe={class:"flex align-items-center justify-content-center"},Le=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Be={key:0},Te={class:""},Ie=["src"],Pe={key:1,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:le},Ne={key:2,class:"mt-1 mb-5 text-red-500"},Fe={class:"flex flex-column gap-2 py-1"},Me={class:"w-full text-right",for:"username"},je={key:0,class:"mt-1 mb-5 text-red-500"},Ee={class:"flex flex-column gap-2 py-1"},Re={class:"w-full text-right",for:"username"},Ae={key:0,class:"mt-1 mb-5 text-red-500"},ze={key:0,class:"flex flex-column gap-2"},Oe={class:"w-full text-right",for:"username"},Ge={key:0,class:"mt-1 mb-5 text-red-500"},He={key:1,class:"flex flex-column gap-2"},Je={class:"w-full text-right",for:"username"},Ke={key:0,class:"mt-1 mb-5 text-red-500"},Qe={key:2,class:"flex flex-column gap-2"},We={class:"w-full text-right",for:"username"},Xe={key:0,class:"mt-1 mb-5 text-red-500"},Ye={class:"flex flex-column gap-2 py-1"},Ze={class:"w-full text-right",for:"username"},el={key:0,class:"mt-1 mb-5 text-red-500"},ll={class:"flex flex-column gap-2 py-1"},tl={class:"w-full text-right",for:"username"},al={key:0,class:"mt-1 mb-5 text-red-500"},sl={class:"flex flex-column gap-2 py-1"},ol={class:"w-full text-right",for:"username"},il={key:0,class:"mt-1 mb-5 text-red-500"},dl={class:"flex flex-column gap-2 py-1"},nl={class:"w-full text-right",for:"username"},ul={key:0,class:"mt-1 mb-5 text-red-500"},rl={class:"flex-column gap-2 py-1 hidden"},pl={class:"w-full text-right",for:"username"},ml={key:0,class:"mt-1 mb-5 text-red-500"},cl={class:"w-full text-center"},vl={class:""},fl=["src"],hl={key:1,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:le},gl={key:2,class:"mt-1 mb-5 text-red-500"},yl={class:"flex flex-column gap-2 py-1"},bl={class:"w-full text-right",for:"username"},_l={key:0,class:"mt-1 mb-5 text-red-500"},wl={class:"flex flex-column gap-2 py-1"},kl={class:"w-full text-right",for:"username"},xl={key:0,class:"mt-1 mb-5 text-red-500"},Vl={key:0,class:"flex flex-column gap-2"},$l={class:"w-full text-right",for:"username"},Ul={key:0,class:"mt-1 mb-5 text-red-500"},Cl={key:1,class:"flex flex-column gap-2"},Sl={class:"w-full text-right",for:"username"},Dl={key:0,class:"mt-1 mb-5 text-red-500"},ql={key:2,class:"flex flex-column gap-2"},Ll={class:"w-full text-right",for:"username"},Bl={key:0,class:"mt-1 mb-5 text-red-500"},Tl={class:"flex flex-column gap-2 py-1"},Il={class:"w-full text-right",for:"username"},Pl={key:0,class:"mt-1 mb-5 text-red-500"},Nl={class:"flex flex-column gap-2 py-1"},Fl={class:"w-full text-right",for:"username"},Ml={key:0,class:"mt-1 mb-5 text-red-500"},jl={class:"flex flex-column gap-2 py-1"},El={class:"w-full text-right",for:"username"},Rl={key:0,class:"mt-1 mb-5 text-red-500"},Al={class:"flex flex-column gap-2 py-1"},zl={class:"w-full text-right",for:"username"},Ol={key:0,class:"mt-1 mb-5 text-red-500"},Gl={class:"flex-column gap-2 py-1 hidden"},Hl={class:"w-full text-right",for:"username"},Jl={key:0,class:"mt-1 mb-5 text-red-500"},Kl={class:"w-full text-center"},Xl={__name:"Index",setup(Ql){const j=ce(),Q=ve(),l=m({skills:[],department:[]}),{t:E}=fe(),R=m([]),A=m([]),W=()=>[{name:E("driver"),id:1},{name:E("doctor"),id:2},{name:E("Evaluator"),id:5}],z=m({}),O=m(!0),X=m({}),o=m(""),G=m(null);m(!1);const _=m(!1),H=m(""),Y=m(null),Z=m(null),T=m({}),I=m(!1),P=m(!1);he(()=>{ue()});const N=()=>{y.post("/api/users").then(e=>{G.value=e.data.users.data,O.value=!1}),y.post("/api/roles").then(e=>{O.value=!1,R.value=e.data.roles.data,console.log(G.value)}),y.get("/api/skills").then(e=>{A.value=e.data.data}),y.get("/api/department").then(e=>{z.value=e.data.data})};ge(()=>{N()});const te=e=>{Q.push({name:"user-update",params:{id:e}})},ae=()=>{const e=new FormData;console.log(l.value.name),e.append("name",l.value.name),e.append("email",l.value.email),e.append("title",l.value.title),e.append("password",l.value.password),e.append("image",l.value.file),e.append("role",l.value.role),l.value.spotter&&e.append("spotter",l.value.spotter),l.value.skills.length>=1&&e.append("skills",l.value.skills),l.value.department&&e.append("department_id",l.value.department),e.append("type",l.value.type),y.post(`/api/users/${H.value}/edit`,e).then(t=>{console.log(t.data),N(),P.value=!P.value,j.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=m({})}).catch(t=>{o.value=t.response.data.errors})},se=()=>{Q.push({name:"CreateUser"})},oe=e=>{console.log(e),_.value=!0,H.value=e},ee=e=>{const t=e.target.files[0],f=new FileReader;f.readAsDataURL(t),f.onload=J=>{l.value.image=J.target.result,l.value.file=t,console.log(this.imageSrc)}},ie=()=>{const e=new FormData;console.log(l.value.name),e.append("name",l.value.name),e.append("email",l.value.email),e.append("title",l.value.title),e.append("password",l.value.password),e.append("image",l.value.file),e.append("role",l.value.role),l.value.spotter&&e.append("spotter",l.value.spotter),l.value.skills&&e.append("skills",l.value.skills),l.value.department&&e.append("department_id",l.value.department),e.append("type",l.value.type),y.post("/api/users/create",e).then(t=>{console.log(t.data),N(),I.value=!I.value,j.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=m({})}).catch(t=>{o.value=t.response.data.errors})},de=()=>{y.delete(`/api/users/${H.value}/delete`).then(e=>{console.log(e.data),_.value=!1,N(),j.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},ne=()=>{Z.value.exportCSV()},ue=()=>{T.value={global:{value:null,matchMode:ye.CONTAINS}}};return(e,t)=>{const f=h("Button"),J=h("Toolbar"),re=h("Toast"),v=h("InputText"),b=h("Column"),pe=h("DataTable"),K=h("Dialog"),F=h("Dropdown"),M=h("MultiSelect"),me=h("va-card"),w=be("can");return n(),u("div",we,[a("div",ke,[i(me,{class:"card"},{default:c(()=>[i(J,{class:"mb-4 shadow-md"},{start:c(()=>[a("div",xe,[L(i(f,{label:e.$t("user_add"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:se},null,8,["label"]),[[w,"create user"]])])]),end:c(()=>[L(i(f,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:t[0]||(t[0]=r=>ne(r))},null,8,["label"]),[[w,"show user"]])]),_:1}),i(re),a("div",Ve,[L((n(),_e(pe,{ref_key:"dt",ref:Z,selection:Y.value,"onUpdate:selection":t[2]||(t[2]=r=>Y.value=r),value:G.value,loading:O.value,"data-key":"id",paginator:!0,rows:5,filters:T.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:c(()=>[a("div",$e,[a("h5",Ue,s(e.$t("users")),1),a("div",null,[a("span",Ce,[Se,i(v,{modelValue:T.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=r=>T.value.global.value=r),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:c(()=>[i(b,{"selection-mode":"multiple","header-style":"width: 3rem"}),i(b,{field:"index",header:e.$t("index"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:c(r=>[B(s(r.data.id),1)]),_:1},8,["header"]),i(b,{field:"name",header:e.$t("name"),sortable:!0,"header-style":"width:14%; min-width:12rem;",class:"ltr:text-justify"},{body:c(r=>[B(s(r.data.name),1)]),_:1},8,["header"]),i(b,{field:"image",header:e.$t("personal_image"),sortable:!0,"header-style":"width:10%; min-width:12rem;",class:"ltr:text-justify"},{body:c(r=>[a("img",{class:"m-auto rounded-full",style:{width:"100px",height:"100px"},src:r.data.image},null,8,De)]),_:1},8,["header"]),i(b,{field:"email",header:e.$t("email"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:c(r=>[B(s(r.data.email),1)]),_:1},8,["header"]),i(b,{"header-style":"min-width:10rem;"},{body:c(r=>[a("div",null,[L(i(f,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:g=>te(r.data.id)},null,8,["onClick"]),[[w,"update user"]]),L(i(f,{icon:"pi pi-trash",class:"delete mt-2",onClick:g=>oe(r.data.id)},null,8,["onClick"]),[[w,"create user"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[w,"user list"]]),i(K,{visible:_.value,"onUpdate:visible":t[4]||(t[4]=r=>_.value=r),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:c(()=>[i(f,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=r=>_.value=!1)},null,8,["label"]),i(f,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:de},null,8,["label"])]),default:c(()=>[a("div",qe,[Le,X.value?(n(),u("span",Be,[B(s(e.$t("remove_item"))+" ",1),a("b",null,s(X.value.first_name),1),B("?")])):p("",!0)])]),_:1},8,["visible","header"]),i(K,{visible:I.value,"onUpdate:visible":t[14]||(t[14]=r=>I.value=r),style:{width:"450px"},header:e.$t("users"),modal:!0},{default:c(()=>{var r,g,k,x,V,$,U,C,S,D,q;return[a("div",Te,[a("div",null,[l.value.image?(n(),u("img",{key:0,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:l.value.image},null,8,Ie)):(n(),u("img",Pe)),(r=o.value)!=null&&r.image?(n(),u("div",Ne,s(o.value.image[0]),1)):p("",!0)])]),a("div",Fe,[a("label",Me,s(e.$t("name")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.name,"onUpdate:modelValue":t[5]||(t[5]=d=>l.value.name=d),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(g=o.value)!=null&&g.name?(n(),u("div",je,s(o.value.name[0]),1)):p("",!0)]),a("div",Ee,[a("label",Re,s(e.$t("type")),1),i(F,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.type,"onUpdate:modelValue":t[6]||(t[6]=d=>l.value.type=d),"option-value":"id",filter:"",options:W(),optionLabel:"name",placeholder:e.$t("type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(k=o.value)!=null&&k.type?(n(),u("div",Ae,s(o.value.type[0]),1)):p("",!0)]),l.value.type==0||l.value.type==2?(n(),u("div",ze,[a("label",Oe,s(e.$t("skill_name")),1),i(M,{modelValue:l.value.skills,"onUpdate:modelValue":t[7]||(t[7]=d=>l.value.skills=d),filter:"","option-value":"id",options:A.value,optionLabel:"name",placeholder:e.$t("skill_name"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(x=o.value)!=null&&x.permissions?(n(),u("div",Ge,s(o.value.permissions[0]),1)):p("",!0)])):p("",!0),l.value.type==0||l.value.type==2?(n(),u("div",He,[a("label",Je,s(e.$t("department")),1),i(M,{modelValue:l.value.department,"onUpdate:modelValue":t[8]||(t[8]=d=>l.value.department=d),filter:"","option-value":"id",options:z.value,optionLabel:"title",placeholder:e.$t("department"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(V=o.value)!=null&&V.permissions?(n(),u("div",Ke,s(o.value.permissions[0]),1)):p("",!0)])):p("",!0),l.value.type==0||l.value.type==2?(n(),u("div",Qe,[a("label",We,s(e.$t("Spotter")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.spotter,"onUpdate:modelValue":t[9]||(t[9]=d=>l.value.spotter=d),placeholder:e.$t("Spotter")},null,8,["modelValue","placeholder"]),($=o.value)!=null&&$.permissions?(n(),u("div",Xe,s(o.value.permissions[0]),1)):p("",!0)])):p("",!0),a("div",Ye,[a("label",Ze,s(e.$t("email")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.email,"onUpdate:modelValue":t[10]||(t[10]=d=>l.value.email=d),placeholder:e.$t("email")},null,8,["modelValue","placeholder"]),(U=o.value)!=null&&U.email?(n(),u("div",el,s(o.value.email[0]),1)):p("",!0)]),a("div",ll,[a("label",tl,s(e.$t("title")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.title,"onUpdate:modelValue":t[11]||(t[11]=d=>l.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(C=o.value)!=null&&C.title?(n(),u("div",al,s(o.value.title[0]),1)):p("",!0)]),a("div",sl,[a("label",ol,s(e.$t("password")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.password,"onUpdate:modelValue":t[12]||(t[12]=d=>l.value.password=d),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),(S=o.value)!=null&&S.password?(n(),u("div",il,s(o.value.password[0]),1)):p("",!0)]),a("div",dl,[a("label",nl,s(e.$t("roles")),1),i(F,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.role,"onUpdate:modelValue":t[13]||(t[13]=d=>l.value.role=d),"option-value":"id",filter:"",options:R.value,optionLabel:"name",placeholder:e.$t("roles"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(D=o.value)!=null&&D.role?(n(),u("div",ul,s(o.value.role[0]),1)):p("",!0)]),a("div",rl,[a("label",pl,s(e.$t("personal_image")),1),i(v,{name:"file",ref:"file",onChange:ee,accept:"image/*",id:"filr",type:"file",class:"w-full"},null,512),(q=o.value)!=null&&q.image?(n(),u("div",ml,s(o.value.image[0]),1)):p("",!0)]),a("div",cl,[i(f,{onClick:ie,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),i(K,{visible:P.value,"onUpdate:visible":t[24]||(t[24]=r=>P.value=r),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:c(()=>{var r,g,k,x,V,$,U,C,S,D,q;return[a("div",vl,[a("div",null,[l.value.image?(n(),u("img",{key:0,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:l.value.image},null,8,fl)):(n(),u("img",hl)),(r=o.value)!=null&&r.image?(n(),u("div",gl,s(o.value.image[0]),1)):p("",!0)])]),a("div",yl,[a("label",bl,s(e.$t("name")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.name,"onUpdate:modelValue":t[15]||(t[15]=d=>l.value.name=d),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(g=o.value)!=null&&g.name?(n(),u("div",_l,s(o.value.name[0]),1)):p("",!0)]),a("div",wl,[a("label",kl,s(e.$t("type")),1),i(F,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.type,"onUpdate:modelValue":t[16]||(t[16]=d=>l.value.type=d),"option-value":"id",filter:"",options:W(),optionLabel:"name",placeholder:e.$t("type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(k=o.value)!=null&&k.type?(n(),u("div",xl,s(o.value.type[0]),1)):p("",!0)]),l.value.type==0||l.value.type==2?(n(),u("div",Vl,[a("label",$l,s(e.$t("skill_name")),1),i(M,{modelValue:l.value.skills,"onUpdate:modelValue":t[17]||(t[17]=d=>l.value.skills=d),filter:"","option-value":"id",options:A.value,optionLabel:"name",placeholder:e.$t("skill_name"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(x=o.value)!=null&&x.skills?(n(),u("div",Ul,s(o.value.skills[0]),1)):p("",!0)])):p("",!0),l.value.type==0||l.value.type==2?(n(),u("div",Cl,[a("label",Sl,s(e.$t("department")),1),i(M,{modelValue:l.value.department,"onUpdate:modelValue":t[18]||(t[18]=d=>l.value.department=d),filter:"","option-value":"id",options:z.value,optionLabel:"title",placeholder:e.$t("department"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(V=o.value)!=null&&V.permissions?(n(),u("div",Dl,s(o.value.permissions[0]),1)):p("",!0)])):p("",!0),l.value.type==0||l.value.type==2?(n(),u("div",ql,[a("label",Ll,s(e.$t("Spotter")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.spotter,"onUpdate:modelValue":t[19]||(t[19]=d=>l.value.spotter=d),placeholder:e.$t("Spotter")},null,8,["modelValue","placeholder"]),($=o.value)!=null&&$.permissions?(n(),u("div",Bl,s(o.value.permissions[0]),1)):p("",!0)])):p("",!0),a("div",Tl,[a("label",Il,s(e.$t("email")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.email,"onUpdate:modelValue":t[20]||(t[20]=d=>l.value.email=d),placeholder:e.$t("email")},null,8,["modelValue","placeholder"]),(U=o.value)!=null&&U.email?(n(),u("div",Pl,s(o.value.email[0]),1)):p("",!0)]),a("div",Nl,[a("label",Fl,s(e.$t("title")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.title,"onUpdate:modelValue":t[21]||(t[21]=d=>l.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(C=o.value)!=null&&C.title?(n(),u("div",Ml,s(o.value.title[0]),1)):p("",!0)]),a("div",jl,[a("label",El,s(e.$t("password")),1),i(v,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.password,"onUpdate:modelValue":t[22]||(t[22]=d=>l.value.password=d),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),(S=o.value)!=null&&S.password?(n(),u("div",Rl,s(o.value.password[0]),1)):p("",!0)]),a("div",Al,[a("label",zl,s(e.$t("roles")),1),i(F,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.role,"onUpdate:modelValue":t[23]||(t[23]=d=>l.value.role=d),"option-value":"id",filter:"",options:R.value,optionLabel:"name",placeholder:e.$t("roles"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(D=o.value)!=null&&D.role?(n(),u("div",Ol,s(o.value.role[0]),1)):p("",!0)]),a("div",Gl,[a("label",Hl,s(e.$t("personal_image")),1),i(v,{name:"file",ref:"file",onChange:ee,accept:"image/*",id:"filr",type:"file",class:"w-full"},null,512),(q=o.value)!=null&&q.image?(n(),u("div",Jl,s(o.value.image[0]),1)):p("",!0)]),a("div",Kl,[i(f,{onClick:ae,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Xl as default};
