import{a9 as de,aa as ne,T as m,ab as ue,a2 as re,ac as me,l as b,ad as ce,o as n,e as u,h as a,x as o,y as p,w as T,f as pe,t as s,i as w,q as r,ai as ve,z as x}from"./main-8df33d9c.js";const fe={class:"grid",style:{"overflow-x":"scroll !important"}},he={class:"col-12"},ge={class:"my-2"},be={class:"shadow-xl"},_e={class:"flex w-full justify-between align-items-center"},ye={class:"m-0 my-auto"},we={class:"block mt-2 md:mt-0 p-input-icon-left"},xe=a("i",{class:"pi pi-search"},null,-1),ke=["src"],$e={class:"flex align-items-center justify-content-center"},Ve=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ce={key:0},Ue={class:""},De=["src"],Se={key:1,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:ve},qe={key:2,class:"mt-1 mb-5 text-red-500"},Le={class:"flex flex-column gap-2 py-1"},Te={class:"w-full text-right",for:"username"},Be={key:0,class:"mt-1 mb-5 text-red-500"},Pe={class:"flex flex-column gap-2 py-1"},je={class:"w-full text-right",for:"username"},Ne={key:0,class:"mt-1 mb-5 text-red-500"},Fe={key:0,class:"flex flex-column gap-2"},Ie={class:"w-full text-right",for:"username"},Me={key:0,class:"mt-1 mb-5 text-red-500"},Re={class:"flex flex-column gap-2 py-1"},Ee={class:"w-full text-right",for:"username"},Ae={key:0,class:"mt-1 mb-5 text-red-500"},ze={class:"flex flex-column gap-2 py-1"},Oe={class:"w-full text-right",for:"username"},Ge={key:0,class:"mt-1 mb-5 text-red-500"},He={class:"flex flex-column gap-2 py-1"},Je={class:"w-full text-right",for:"username"},Ke={key:0,class:"mt-1 mb-5 text-red-500"},Qe={class:"flex flex-column gap-2 py-1"},We={class:"w-full text-right",for:"username"},Xe={key:0,class:"mt-1 mb-5 text-red-500"},Ye={class:"flex-column gap-2 py-1 hidden"},Ze={class:"w-full text-right",for:"username"},el={key:0,class:"mt-1 mb-5 text-red-500"},ll={class:"w-full text-center"},tl={class:""},al={class:""},sl=["src"],ol={class:"flex flex-column gap-2 py-1"},il={class:"w-full text-right",for:"username"},dl={key:0,class:"mt-1 mb-5 text-red-500"},nl={class:"flex flex-column gap-2 py-1"},ul={class:"w-full text-right",for:"username"},rl={key:0,class:"mt-1 mb-5 text-red-500"},ml={key:0,class:"flex flex-column gap-2"},cl={class:"w-full text-right",for:"username"},pl={key:0,class:"mt-1 mb-5 text-red-500"},vl={class:"flex flex-column gap-2 py-1"},fl={class:"w-full text-right",for:"username"},hl={key:0,class:"mt-1 mb-5 text-red-500"},gl={class:"flex flex-column gap-2 py-1"},bl={class:"w-full text-right",for:"username"},_l={key:0,class:"mt-1 mb-5 text-red-500"},yl={class:"flex flex-column gap-2 py-1"},wl={class:"w-full text-right",for:"username"},xl={key:0,class:"mt-1 mb-5 text-red-500"},kl={class:"flex flex-column gap-2 py-1"},$l={class:"w-full text-right",for:"username"},Vl={key:0,class:"mt-1 mb-5 text-red-500"},Cl={class:"flex-column gap-2 py-1 hidden"},Ul={class:"w-full text-right",for:"username"},Dl={key:0,class:"mt-1 mb-5 text-red-500"},Sl={class:"w-full text-center"},Tl={__name:"Index",setup(ql){const M=de();ne();const l=m({}),R=m([]),E=m([]),O=m([{name:"doctor",id:"0"},{name:"user",id:"1"}]),B=m(!0),G=m({}),i=m(""),P=m(null);m(!1);const V=m(!1),j=m(""),H=m(null),J=m(null),N=m({}),k=m(!1),$=m(!1);ue(()=>{ae()});const F=()=>{x.post("/api/users").then(e=>{P.value=e.data.users.data,B.value=!1}),x.post("/api/roles").then(e=>{B.value=!1,R.value=e.data.roles.data,console.log(P.value)}),x.get("/api/skills").then(e=>{E.value=e.data.data})};re(()=>{F()});const W=e=>{x.get(`/api/users/${e}`).then(t=>{B.value=!1,l.value=t.data.user,l.value.role=t.data.user.roles.id,console.log(P.value)}),j.value=e,$.value=!$.value},X=()=>{const e=new FormData;console.log(l.value.name),l.value.name&&l.value.email&&l.value.title&&l.value.password&&l.value.file&&l.value.role&&(e.append("name",l.value.name),e.append("email",l.value.email),e.append("title",l.value.title),e.append("password",l.value.password),e.append("image",l.value.file),e.append("role",l.value.role)),x.post(`/api/users/${j.value}/edit`,e).then(t=>{console.log(t.data),F(),$.value=!$.value,M.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=m({})}).catch(t=>{i.value=t.response.data.errors})},Y=()=>{l.value=m({}),k.value=!k.value},Z=e=>{console.log(e),V.value=!0,j.value=e},K=e=>{const t=e.target.files[0],f=new FileReader;f.readAsDataURL(t),f.onload=A=>{l.value.image=A.target.result,l.value.file=t,console.log(this.imageSrc)}},ee=()=>{const e=new FormData;console.log(l.value.name),e.append("name",l.value.name),e.append("email",l.value.email),e.append("title",l.value.title),e.append("password",l.value.password),e.append("image",l.value.file),e.append("role",l.value.role),e.append("skills",l.value.skills),e.append("type",l.value.type),x.post("/api/users/create",e).then(t=>{console.log(t.data),F(),k.value=!k.value,M.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=m({})}).catch(t=>{i.value=t.response.data.errors})},le=()=>{x.delete(`/api/users/${j.value}/delete`).then(e=>{console.log(e.data),V.value=!1,F(),M.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},te=()=>{J.value.exportCSV()},ae=()=>{N.value={global:{value:null,matchMode:me.CONTAINS}}};return(e,t)=>{const f=b("Button"),A=b("Toolbar"),se=b("Toast"),h=b("InputText"),_=b("Column"),oe=b("DataTable"),z=b("Dialog"),I=b("Dropdown"),Q=b("MultiSelect"),ie=b("va-card"),C=ce("can");return n(),u("div",fe,[a("div",he,[o(ie,{class:"card"},{default:p(()=>[o(A,{class:"mb-4 shadow-md"},{start:p(()=>[a("div",ge,[T(o(f,{label:e.$t("user_add"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:Y},null,8,["label"]),[[C,"create user"]])])]),end:p(()=>[T(o(f,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:t[0]||(t[0]=d=>te(d))},null,8,["label"]),[[C,"show user"]])]),_:1}),o(se),a("div",be,[T((n(),pe(oe,{ref_key:"dt",ref:J,selection:H.value,"onUpdate:selection":t[2]||(t[2]=d=>H.value=d),value:P.value,loading:B.value,"data-key":"id",paginator:!0,rows:5,filters:N.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:p(()=>[a("div",_e,[a("h5",ye,s(e.$t("users")),1),a("div",null,[a("span",we,[xe,o(h,{modelValue:N.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=d=>N.value.global.value=d),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:p(()=>[o(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(_,{field:"index",header:e.$t("index"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:p(d=>[w(s(d.data.id),1)]),_:1},8,["header"]),o(_,{field:"name",header:e.$t("name"),sortable:!0,"header-style":"width:14%; min-width:12rem;",class:"ltr:text-justify"},{body:p(d=>[w(s(d.data.name),1)]),_:1},8,["header"]),o(_,{field:"image",header:e.$t("personal_image"),sortable:!0,"header-style":"width:10%; min-width:12rem;",class:"ltr:text-justify"},{body:p(d=>[a("img",{class:"m-auto rounded-full",style:{width:"100px",height:"100px"},src:d.data.image},null,8,ke)]),_:1},8,["header"]),o(_,{field:"email",header:e.$t("email"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:p(d=>[w(s(d.data.email),1)]),_:1},8,["header"]),o(_,{field:"title",header:e.$t("title"),sortable:!0,"header-style":"width:14%; min-width:11rem;",class:"ltr:text-justify"},{body:p(d=>[w(s(d.data.title),1)]),_:1},8,["header"]),o(_,{field:"title",header:e.$t("roles"),sortable:!0,"header-style":"width:14%; min-width:11rem;",class:"ltr:text-justify"},{body:p(d=>{var g,y;return[w(s((y=(g=d.data)==null?void 0:g.roles[0])==null?void 0:y.name),1)]}),_:1},8,["header"]),o(_,{"header-style":"min-width:10rem;"},{body:p(d=>[a("div",null,[T(o(f,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:g=>W(d.data.id)},null,8,["onClick"]),[[C,"update user"]]),T(o(f,{icon:"pi pi-trash",class:"delete mt-2",onClick:g=>Z(d.data.id)},null,8,["onClick"]),[[C,"create user"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[C,"show user"]]),o(z,{visible:V.value,"onUpdate:visible":t[4]||(t[4]=d=>V.value=d),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:p(()=>[o(f,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=d=>V.value=!1)},null,8,["label"]),o(f,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:le},null,8,["label"])]),default:p(()=>[a("div",$e,[Ve,G.value?(n(),u("span",Ce,[w(s(e.$t("remove_item"))+" ",1),a("b",null,s(G.value.first_name),1),w("?")])):r("",!0)])]),_:1},8,["visible","header"]),o(z,{visible:k.value,"onUpdate:visible":t[12]||(t[12]=d=>k.value=d),style:{width:"450px"},header:e.$t("users"),modal:!0},{default:p(()=>{var d,g,y,U,D,S,q,L,c;return[a("div",Ue,[a("div",null,[l.value.image?(n(),u("img",{key:0,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:l.value.image},null,8,De)):(n(),u("img",Se)),(d=i.value)!=null&&d.image?(n(),u("div",qe,s(i.value.image[0]),1)):r("",!0)])]),a("div",Le,[a("label",Te,s(e.$t("name")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.name,"onUpdate:modelValue":t[5]||(t[5]=v=>l.value.name=v),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(g=i.value)!=null&&g.name?(n(),u("div",Be,s(i.value.name[0]),1)):r("",!0)]),a("div",Pe,[a("label",je,s(e.$t("type")),1),o(I,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.type,"onUpdate:modelValue":t[6]||(t[6]=v=>l.value.type=v),"option-value":"id",filter:"",options:O.value,optionLabel:"name",placeholder:e.$t("type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(y=i.value)!=null&&y.type?(n(),u("div",Ne,s(i.value.type[0]),1)):r("",!0)]),l.value.types==0?(n(),u("div",Fe,[a("label",Ie,s(e.$t("skill_name")),1),o(Q,{modelValue:l.value.skills,"onUpdate:modelValue":t[7]||(t[7]=v=>l.value.skills=v),filter:"","option-value":"id",options:E.value,optionLabel:"name",placeholder:e.$t("skill_name"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(U=i.value)!=null&&U.permissions?(n(),u("div",Me,s(i.value.permissions[0]),1)):r("",!0)])):r("",!0),a("div",Re,[a("label",Ee,s(e.$t("email")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.email,"onUpdate:modelValue":t[8]||(t[8]=v=>l.value.email=v),placeholder:e.$t("email")},null,8,["modelValue","placeholder"]),(D=i.value)!=null&&D.email?(n(),u("div",Ae,s(i.value.email[0]),1)):r("",!0)]),a("div",ze,[a("label",Oe,s(e.$t("title")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.title,"onUpdate:modelValue":t[9]||(t[9]=v=>l.value.title=v),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(S=i.value)!=null&&S.title?(n(),u("div",Ge,s(i.value.title[0]),1)):r("",!0)]),a("div",He,[a("label",Je,s(e.$t("password")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.password,"onUpdate:modelValue":t[10]||(t[10]=v=>l.value.password=v),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),(q=i.value)!=null&&q.password?(n(),u("div",Ke,s(i.value.password[0]),1)):r("",!0)]),a("div",Qe,[a("label",We,s(e.$t("roles")),1),o(I,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.role,"onUpdate:modelValue":t[11]||(t[11]=v=>l.value.role=v),"option-value":"id",filter:"",options:R.value,optionLabel:"name",placeholder:e.$t("roles"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(L=i.value)!=null&&L.role?(n(),u("div",Xe,s(i.value.role[0]),1)):r("",!0)]),a("div",Ye,[a("label",Ze,s(e.$t("personal_image")),1),o(h,{name:"file",ref:"file",onChange:K,accept:"image/*",id:"filr",type:"file",class:"w-full"},null,512),(c=i.value)!=null&&c.image?(n(),u("div",el,s(i.value.image[0]),1)):r("",!0)]),a("div",ll,[o(f,{onClick:ee,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),o(z,{visible:$.value,"onUpdate:visible":t[20]||(t[20]=d=>$.value=d),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:p(()=>{var d,g,y,U,D,S,q,L;return[a("div",tl,[a("div",al,[a("img",{onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:l.value.image},null,8,sl)])]),a("div",ol,[a("label",il,s(e.$t("name")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.name,"onUpdate:modelValue":t[13]||(t[13]=c=>l.value.name=c),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(d=i.value)!=null&&d.name?(n(),u("div",dl,s(i.value.name[0]),1)):r("",!0)]),a("div",nl,[a("label",ul,s(e.$t("type")),1),o(I,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.type,"onUpdate:modelValue":t[14]||(t[14]=c=>l.value.type=c),"option-value":"id",filter:"",options:O.value,optionLabel:"name",placeholder:e.$t("type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(g=i.value)!=null&&g.type?(n(),u("div",rl,s(i.value.type[0]),1)):r("",!0)]),l.value.types==0?(n(),u("div",ml,[a("label",cl,s(e.$t("skill_name")),1),o(Q,{modelValue:l.value.skills,"onUpdate:modelValue":t[15]||(t[15]=c=>l.value.skills=c),filter:"","option-value":"id",options:E.value,optionLabel:"name",placeholder:e.$t("skill_name"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(y=i.value)!=null&&y.permissions?(n(),u("div",pl,s(i.value.permissions[0]),1)):r("",!0)])):r("",!0),a("div",vl,[a("label",fl,s(e.$t("email")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.email,"onUpdate:modelValue":t[16]||(t[16]=c=>l.value.email=c),placeholder:e.$t("email")},null,8,["modelValue","placeholder"]),(U=i.value)!=null&&U.email?(n(),u("div",hl,s(i.value.email[0]),1)):r("",!0)]),a("div",gl,[a("label",bl,s(e.$t("title")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.title,"onUpdate:modelValue":t[17]||(t[17]=c=>l.value.title=c),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(D=i.value)!=null&&D.title?(n(),u("div",_l,s(i.value.title[0]),1)):r("",!0)]),a("div",yl,[a("label",wl,s(e.$t("password")),1),o(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:l.value.password,"onUpdate:modelValue":t[18]||(t[18]=c=>l.value.password=c),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),(S=i.value)!=null&&S.password?(n(),u("div",xl,s(i.value.password[0]),1)):r("",!0)]),a("div",kl,[a("label",$l,s(e.$t("roles")),1),o(I,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:l.value.role,"onUpdate:modelValue":t[19]||(t[19]=c=>l.value.role=c),"option-value":"id",filter:"",options:R.value,optionLabel:"name",placeholder:e.$t("roles"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(q=i.value)!=null&&q.role?(n(),u("div",Vl,s(i.value.role[0]),1)):r("",!0)]),a("div",Cl,[a("label",Ul,s(e.$t("personal_image")),1),o(h,{name:"file",ref:"file",onChange:K,accept:"image/*",id:"filr",type:"file",class:"w-full"},null,512),(L=i.value)!=null&&L.image?(n(),u("div",Dl,s(i.value.image[0]),1)):r("",!0)]),a("div",Sl,[o(f,{onClick:X,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Tl as default};
