import{_ as g,c as d,r,o as m,d as p,f as i,g as V,e as a,t as n,n as u,j as w,F as b,x,w as C,a0 as k}from"./main-bf09fc9d.js";const q={data(){return{submitted:!1,selectedOption:"",employee_id:"",maxvalue:"",quantity:"",balance:[],options:[],employees:[],error:{}}},methods:{getallsetup(){d.get("api/leave-setup").then(e=>{this.options=e.data.data})},getallemployees(){d.get("api/employees").then(e=>{this.employees=e.data.data,this.getone(),this.getallsetup()})},deleteitem(e){this.balance.splice(e,1)},getmaxvalue(e){this.quantity="",d.get(`api/leave-setup/${e.id}`).then(l=>{this.maxvalue=l.data.data.days?l.data.data.days:l.data.data.hours})},addItem(){this.selectedOption&&this.quantity>0&&(this.balance.push({id:this.selectedOption.id,title:this.selectedOption.title,value:this.quantity}),this.selectedOption="",this.value=1)},getone(){d.get(`api/leave-balance/${this.$route.params.id}`).then(e=>{this.balance=e.data.data.balance,this.employee_id=e.data.data.employee_id})},submite(){this.error={},d.put(`api/leave-balance/${this.$route.params.id}`,{employee_id:this.employee_id,balance:this.balance}).then(e=>{this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_update_success")}`,life:3e3})}).catch(e=>{this.error=e.response.data.errors,this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${e.response.data.message}`,life:3e3})})}},computed:{filteredDays(){const e=this.balance.map(l=>l.id);return this.options.filter(l=>!e.includes(l.id))}},mounted(){this.getallemployees()}},O={for:"username"},I={key:0,class:"mt-1 mb-5 text-red-500"};function B(e,l,D,N,t,o){const y=r("Dropdown"),c=r("Button"),f=r("InputNumber"),v=r("Toast");return m(),p(b,null,[i(k,{class:"p-[2%] bg-slate-50 shadow-xl gap-4"},{default:V(()=>{var h;return[a("div",{class:u([{"animate__animated animate__bounce animate__delay-0s":t.error.employee_id},"flex flex-column gap-2 md:w-[50%] py-[2%]"])},[a("label",O,n(e.$t("employee_name")),1),i(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.employee_id,"onUpdate:modelValue":l[0]||(l[0]=s=>t.employee_id=s),"option-value":"id",options:t.employees,optionLabel:"name",placeholder:e.$t("employee_name"),class:u(["w-full bg-[#f7f5f5]",{"p-invalid":t.submitted&&!t.employee_id}])},null,8,["modelValue","options","placeholder","class"]),(h=t.error)!=null&&h.shift_id?(m(),p("div",I,n(t.error.shift_id[0]),1)):w("",!0)],2),a("form",{onSubmit:l[5]||(l[5]=C((...s)=>o.addItem&&o.addItem(...s),["prevent"]))},[a("table",{class:u([{"animate__animated animate__bounce animate__delay-0s":t.error.balance},"item-table w-[70%]"])},[a("thead",null,[a("tr",null,[a("th",null,n(e.$t("holiday_type")),1),a("th",null,n(e.$t("amount")),1)])]),a("tbody",null,[(m(!0),p(b,null,x(t.balance,(s,_)=>(m(),p("tr",{key:_},[a("td",null,n(s.title),1),a("td",null,n(s.value),1),a("td",null,[i(c,{onClick:L=>o.deleteitem(_),icon:"pi pi-trash",class:"p-button-rounded delete p-button-success m-auto"},null,8,["onClick"])])]))),128)),a("tr",null,[a("td",null,[i(y,{"onUpdate:modelValue":[l[1]||(l[1]=s=>o.getmaxvalue(s)),l[2]||(l[2]=s=>t.selectedOption=s)],style:{direction:"ltr !important"},modelValue:t.selectedOption,options:o.filteredDays,optionLabel:"title",placeholder:e.$t("holiday_type"),class:u(["w-full",{"p-invalid":t.submitted&&!t.selectedOption}])},null,8,["modelValue","options","placeholder","class"])]),a("td",null,[i(f,{class:u(["w-full",{"p-invalid":t.submitted&&!t.quantity}]),modelValue:t.quantity,"onUpdate:modelValue":l[3]||(l[3]=s=>t.quantity=s),placeholder:e.$t("max_value")+"="+t.maxvalue,max:t.maxvalue},null,8,["modelValue","placeholder","max","class"])]),a("td",null,[i(c,{onClick:l[4]||(l[4]=s=>t.submitted=!0),type:"submit",required:"",class:"create m-auto s",icon:"pi pi-plus"})])])])],2)],32),i(c,{onClick:o.submite,type:"submit",class:"create m-auto w-32 my-4",label:e.$t("submit")},null,8,["onClick","label"])]}),_:1}),i(v)],64)}const F=g(q,[["render",B]]);export{F as default};
