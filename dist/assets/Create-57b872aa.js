import{_ as O,m as P,a1 as H,q as o,aj as Z,a2 as G,ak as J,r as S,al as K,o as r,d,e,t as u,f as n,w as Q,n as W,j as X,g as y,h as Y,a3 as x,F as $,x as I,i as ee,c as k,y as se,z as te}from"./main-f45b4568.js";import"./editor.esm-920d81cb.js";import{g as C}from"./flowbite-vue-1b3356e1.js";import{V as oe}from"./VTextarea-56ef562f.js";const D=h=>(se("data-v-44e1a523"),h=h(),te(),h),ae={class:"roles-container"},le={class:"header-container"},ne={class:"page-title"},ie={class:"search-container"},ce={class:"p-input-icon-left"},re=D(()=>e("i",{class:"pi pi-search"},null,-1)),de={class:"card-container"},ue={class:"role-form-container"},pe=["onSubmit"],me={class:"form-group"},ve={class:"flex items-center"},he={class:"form-label"},_e=D(()=>e("svg",{class:"required-icon",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1)),fe={key:0,class:"error-message"},ge={class:"permissions-grid"},be={class:"category-header"},ye=["checked","onChange"],xe={class:"permission-list"},ke={class:"permission-info"},Ce=["checked","onChange"],we={class:"permission-name"},Ve={class:"dialog-content"},Le={class:"flex flex-column gap-2"},Se={class:"dialog-label",for:"username"},$e={__name:"Create",setup(h){const w=P(),M=H(),_=o(!1),V=o(!0),F=o({}),f=o(""),g=o(null),p=o(!1),i=o({});o(""),o(null),o(null);const N=o({});o(!1),o({}),o(!1);const a=o([]);Z(()=>{R()});const T=()=>{k.get("/api/permissions").then(s=>{V.value=!1,g.value=s.data.permissions})},B=(s,t)=>{const m=t.map(v=>v.id);L(t)?a.value=a.value.filter(v=>!m.includes(v)):a.value=[...new Set([...a.value,...m])]},L=s=>s.every(t=>a.value.includes(t.id)),q=()=>{_.value=!0,i.value.name&&k.post("/api/roles/create",{permissions:a.value,name:i.value.name}).then(s=>{w.add({severity:"success",summary:"Success",detail:"Role created successfully",life:3e3}),M.push({name:"Roles"})}).catch(s=>{w.add({severity:"error",summary:"Error",detail:"Failed to create role",life:3e3})})};G(()=>{T()});const A=s=>{p.value=!p.value,f.value=s.description,F.value=s},R=()=>{N.value={global:{value:null,matchMode:J.CONTAINS}}},U=s=>{k.get(`/api/permissions?search=${s}`).then(t=>{V.value=!1,g.value=t.data.permissions})},j=s=>{const t=a.value.indexOf(s);t===-1?a.value.push(s):a.value.splice(t,1)};return(s,t)=>{const m=S("InputText"),v=S("Dialog"),z=K("tooltip");return r(),d("div",ae,[e("div",le,[e("h1",ne,u(s.$t("roles")),1),e("div",ie,[e("span",ce,[re,n(m,{"onUpdate:modelValue":U,placeholder:s.$t("search"),class:"search-input"},null,8,["placeholder"])])])]),e("div",de,[e("div",ue,[e("form",{class:"role-form",onSubmit:Q(q,["prevent"])},[e("div",me,[e("div",ve,[e("label",he,u(s.$t("اسم الرول")),1),_e]),n(m,{class:W(["form-input",{"input-error":_.value&&!i.value.name}]),modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value.name=l),required:""},null,8,["modelValue","class"]),_.value&&!i.value.name?(r(),d("small",fe,"Role name is required")):X("",!0)]),n(x(C),{type:"submit",class:"submit-btn"},{default:y(()=>[Y(u(s.$t("submit")),1)]),_:1})],40,pe)]),e("div",ge,[(r(!0),d($,null,I(g.value,(l,b)=>(r(),d("div",{class:"permission-category",key:b},[e("div",be,[e("h3",null,u(b),1),e("input",{type:"checkbox",class:"category-checkbox",checked:L(l),onChange:c=>B(b,l)},null,40,ye)]),e("div",xe,[(r(!0),d($,null,I(l,c=>(r(),d("div",{class:"permission-item",key:c.id},[e("div",ke,[e("input",{class:"permission-checkbox",type:"checkbox",checked:a.value.includes(c.id),onChange:E=>j(c.id)},null,40,Ce),e("span",we,u(c.name),1)]),ee(n(x(C),{icon:"pi pi-info-circle",class:"p-button-rounded p-button-text info-btn",onClick:E=>A(c)},null,8,["onClick"]),[[z,"View description",void 0,{top:!0}]])]))),128))])]))),128))])]),n(v,{visible:p.value,"onUpdate:visible":t[3]||(t[3]=l=>p.value=l),style:{width:"550px"},header:s.$t("permission_details"),modal:!0,class:"description-dialog"},{footer:y(()=>[n(x(C),{label:s.$t("close"),icon:"pi pi-times",class:"p-button-text",onClick:t[2]||(t[2]=l=>p.value=!1)},null,8,["label"])]),default:y(()=>[e("div",Ve,[e("div",Le,[e("label",Se,u(s.$t("description")),1),n(oe,{disabled:"",readonly:"true","bg-color":"#f8f9fa",rows:"3",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=l=>f.value=l),class:"description-textarea"},null,8,["modelValue"])])])]),_:1},8,["visible","header"])])}}},Ne=O($e,[["__scopeId","data-v-44e1a523"]]);export{Ne as default};
