import{aa as Q,ab as W,T as s,ac as X,a3 as Y,ad as Z,r as u,ae as ee,o as b,d as $,e as o,f as a,w as n,i as h,x as le,t as r,h as P,g as L,c as v}from"./main-7ae9188e.js";const te={class:"grid"},ae={class:"col-12"},oe={class:"my-2"},se={style:{},class:"shadow-xl"},ne={class:"flex w-full justify-between align-items-center"},ie={class:"m-0 my-auto"},ue={class:"block mt-2 md:mt-0 p-input-icon-left"},de=o("i",{class:"pi pi-search"},null,-1),re={class:"flex align-items-center justify-content-center"},ce=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),pe={key:0},me={class:"flex flex-column gap-2"},ve={class:"w-full text-right",for:"username"},fe={key:0,class:"mt-1 mb-5 text-red-500"},ye={class:"w-full text-center"},_e={class:"flex flex-column gap-2"},be={class:"w-full text-right",for:"username"},he={key:0,class:"mt-1 mb-5 text-red-500"},ge={class:"w-full text-center"},$e={__name:"index",setup(we){const C=Q();W();const x=s({}),V=s(!0),N=s({}),c=s(""),S=s(null);s(!1);const f=s(!1),g=s(""),B=s(null),M=s(null),w=s({}),p=s(!1),i=s({}),m=s(!1);X(()=>{E()});const k=()=>{v.get("/api/payroll").then(e=>{V.value=!1,S.value=e.data.data,console.log(S.value)}),v.get("/api/employees").then(e=>{x.value=e.data.data})};Y(()=>{k()});const R=e=>{v.get(`/api/payroll/${e}`).then(t=>{V.value=!1,i.value=t.data.data}),g.value=e,m.value=!m.value},j=()=>{v.put(`/api/payroll/${g.value}`,i.value).then(e=>{console.log(e.data),k(),m.value=!m.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),i.value=s({})}).catch(e=>{c.value=e.response.data.errors})},F=()=>{p.value=!p.value,i.value={}},I=e=>{console.log(e),f.value=!0,g.value=e},q=()=>{v.post("/api/payroll",i.value).then(e=>{console.log(e.data),k(),p.value=!p.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),i.value=s({})}).catch(e=>{c.value=e.response.data.errors})},A=()=>{v.delete(`/api/payroll/${g.value}`).then(e=>{console.log(e.data),f.value=!1,k(),C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},z=()=>{M.value.exportCSV()},E=()=>{w.value={global:{value:null,matchMode:Z.CONTAINS}}};return(e,t)=>{const d=u("Button"),O=u("Toolbar"),G=u("Toast"),H=u("InputText"),T=u("Column"),J=u("DataTable"),D=u("Dialog"),U=u("MultiSelect"),K=u("va-card"),y=ee("can");return b(),$("div",te,[o("div",ae,[a(K,{class:"card"},{default:n(()=>[a(O,{class:"mb-4 shadow-md"},{start:n(()=>[o("div",oe,[h(a(d,{label:e.$t("payroll"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:F},null,8,["label"]),[[y,"payroll create"]])])]),end:n(()=>[h(a(d,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:t[0]||(t[0]=l=>z(l))},null,8,["label"]),[[y,"payroll list"]])]),_:1}),a(G),o("div",se,[h((b(),le(J,{ref_key:"dt",ref:M,selection:B.value,"onUpdate:selection":t[2]||(t[2]=l=>B.value=l),value:S.value,loading:V.value,"data-key":"id",paginator:!0,rows:10,filters:w.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:n(()=>[o("div",ne,[o("h5",ie,r(e.$t("payroll")),1),o("div",null,[o("span",ue,[de,a(H,{modelValue:w.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>w.value.global.value=l),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:n(()=>[a(T,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(T,{field:"name",header:e.$t("employee_payroll"),sortable:!0,"header-style":"width:20%; min-width:10rem;",class:"ltr:text-justify"},{body:n(l=>[P(r(l.data.employee.name),1)]),_:1},8,["header"]),a(T,{"header-style":"min-width:10rem;"},{body:n(l=>[o("div",null,[h(a(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:_=>R(l.data.id)},null,8,["onClick"]),[[y,"payroll edit"]]),h(a(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:_=>I(l.data.id)},null,8,["onClick"]),[[y,"payroll delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[y,"payroll list"]]),a(D,{visible:f.value,"onUpdate:visible":t[4]||(t[4]=l=>f.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:n(()=>[a(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=l=>f.value=!1)},null,8,["label"]),a(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:A},null,8,["label"])]),default:n(()=>[o("div",re,[ce,N.value?(b(),$("span",pe,[P(r(e.$t("remove_item"))+" ",1),o("b",null,r(N.value.first_name),1),P("?")])):L("",!0)])]),_:1},8,["visible","header"]),a(D,{visible:p.value,"onUpdate:visible":t[6]||(t[6]=l=>p.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:n(()=>{var l;return[o("div",me,[o("label",ve,r(e.$t("employee_payroll")),1),a(U,{modelValue:i.value.employees_ids,"onUpdate:modelValue":t[5]||(t[5]=_=>i.value.employees_ids=_),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:x.value,optionLabel:"name",placeholder:e.$t("employee_payroll"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(l=c.value)!=null&&l.employees_ids?(b(),$("div",fe,r(c.value.employees_ids[0]),1)):L("",!0)]),o("div",ye,[a(d,{onClick:q,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),a(D,{visible:m.value,"onUpdate:visible":t[8]||(t[8]=l=>m.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:n(()=>{var l;return[o("div",_e,[o("label",be,r(e.$t("employee_payroll")),1),a(U,{modelValue:i.value.employees_ids,"onUpdate:modelValue":t[7]||(t[7]=_=>i.value.employees_ids=_),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:x.value,optionLabel:"name",placeholder:e.$t("employee_payroll"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(l=c.value)!=null&&l.employees_ids?(b(),$("div",he,r(c.value.employees_ids[0]),1)):L("",!0)]),o("div",ge,[a(d,{onClick:j,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{$e as default};
