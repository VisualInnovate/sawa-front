import{_ as g,c as d,r as u,o as r,d as m,f as i,w as x,e as s,t as p,G as n,g as V,F as b,B as w,E as C,X as k}from"./main-fe73e567.js";const q={data(){return{submitted:!1,selectedOption:"",employee_id:"",maxvalue:"",quantity:"",balance:[],options:[],employees:[],error:{}}},methods:{getallsetup(){d.get("api/leave-setup").then(l=>{this.options=l.data.data})},getallemployees(){d.get("api/employees/get/no-balance").then(l=>{this.employees=l.data})},deleteitem(l){this.balance.splice(l,1)},getmaxvalue(l){this.quantity="",d.get(`api/leave-setup/${l.id}`).then(t=>{this.maxvalue=t.data.data.days?t.data.data.days:t.data.data.hours})},addItem(){this.selectedOption&&this.quantity>0&&(this.balance.push({id:this.selectedOption.id,title:this.selectedOption.title,value:this.quantity}),this.selectedOption="",this.value=1)},submite(){this.error={},d.post("api/leave-balance",{employee_id:this.employee_id,balance:this.balance}).then(l=>{this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_add_success")}`,life:3e3})}).catch(l=>{this.error=l.response.data.errors,this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${l.response.data.message}`,life:3e3})})}},computed:{filteredDays(){const l=this.balance.map(t=>t.id);return this.options.filter(t=>!l.includes(t.id))}},mounted(){this.getallsetup(),this.getallemployees()}},O={for:"username"},B={key:0,class:"mt-1 mb-5 text-red-500"},I=s("thead",null,[s("tr",null,[s("th",null,"leave_setup"),s("th",null,"الكمية ")])],-1);function D(l,t,N,L,e,o){const _=u("Dropdown"),c=u("Button"),f=u("InputNumber"),v=u("Toast");return r(),m(b,null,[i(k,{class:"p-[2%] bg-slate-50 shadow-xl gap-4"},{default:x(()=>{var y;return[s("div",{class:n([{"animate__animated animate__bounce animate__delay-0s":e.error.employee_id},"flex flex-column gap-2 md:w-[50%] py-[2%]"])},[s("label",O,p(l.$t("employee_name")),1),i(_,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:e.employee_id,"onUpdate:modelValue":t[0]||(t[0]=a=>e.employee_id=a),"option-value":"id",options:e.employees,optionLabel:"name",placeholder:l.$t("employee_name"),class:n(["w-full bg-[#f7f5f5]",{"p-invalid":e.submitted&&!e.employee_id}])},null,8,["modelValue","options","placeholder","class"]),(y=e.error)!=null&&y.shift_id?(r(),m("div",B,p(e.error.shift_id[0]),1)):V("",!0)],2),s("form",{onSubmit:t[5]||(t[5]=C((...a)=>o.addItem&&o.addItem(...a),["prevent"]))},[s("table",{class:n([{"animate__animated animate__bounce animate__delay-0s":e.error.balance},"item-table w-[70%]"])},[I,s("tbody",null,[(r(!0),m(b,null,w(e.balance,(a,h)=>(r(),m("tr",{key:h},[s("td",null,p(a.title),1),s("td",null,p(a.value),1),s("td",null,[i(c,{onClick:U=>o.deleteitem(h),icon:"pi pi-trash",class:"p-button-rounded delete p-button-success m-auto"},null,8,["onClick"])])]))),128)),s("tr",null,[s("td",null,[i(_,{"onUpdate:modelValue":[t[1]||(t[1]=a=>o.getmaxvalue(a)),t[2]||(t[2]=a=>e.selectedOption=a)],style:{direction:"ltr !important"},modelValue:e.selectedOption,options:o.filteredDays,optionLabel:"title",placeholder:l.$t("shift_name"),class:n(["w-full",{"p-invalid":e.submitted&&!e.selectedOption}])},null,8,["modelValue","options","placeholder","class"])]),s("td",null,[i(f,{class:n(["w-full",{"p-invalid":e.submitted&&!e.quantity}]),modelValue:e.quantity,"onUpdate:modelValue":t[3]||(t[3]=a=>e.quantity=a),placeholder:l.$t("max_value")+"="+e.maxvalue,max:e.maxvalue},null,8,["modelValue","placeholder","max","class"])]),s("td",null,[i(c,{onClick:t[4]||(t[4]=a=>e.submitted=!0),type:"submit",required:"",class:"create m-auto s",icon:"pi pi-plus"})])])])],2)],32),i(c,{onClick:o.submite,type:"submit",class:"create m-auto w-32 my-4",label:l.$t("submit")},null,8,["onClick","label"])]}),_:1}),i(v)],64)}const F=g(q,[["render",D]]);export{F as default};
