import{aa as ue,T as c,ac as re,as as ce,a3 as ve,ad as pe,r as h,ae as me,o as r,d as v,e as o,f as a,w as u,i as B,x as fe,t as s,h as y,g as p,U as N,c as $,D as Z}from"./main-c55d0017.js";import{E as J,P as K}from"./index-75364f84.js";const he={class:"grid"},ge={class:"col-12"},be={class:"card"},_e={class:"my-2"},ye={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ke={class:"m-0"},we={class:"block mt-2 md:mt-0 p-input-icon-left"},Ve=o("i",{class:"pi pi-search"},null,-1),$e={class:"flex align-items-center justify-content-center"},xe=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ce={key:0},Ue={class:"flex flex-column gap-2"},De={class:"w-full text-right",for:"username"},Se={key:0,class:"mt-1 mb-5 text-red-500"},qe={class:"flex flex-column gap-2"},Me={class:"w-full text-right",for:"username"},Be={key:0,class:"mt-1 mb-5 text-red-500"},Fe={class:"flex flex-column gap-2"},Pe={class:"w-full text-right",for:"username "},Te={key:0,class:"mt-1 mb-5 text-red-500"},Ie={class:"flex flex-column gap-2"},Le={class:"w-full text-right",for:"username"},Ne={key:0,class:"mt-1 mb-5 text-red-500"},Ee={class:"flex flex-column gap-2"},Ye={class:"w-full text-right",for:"username"},Re={key:0,class:"mt-1 mb-5 text-red-500"},je={class:"flex flex-column gap-2"},ze={class:"w-full text-right",for:"username"},Ae={key:0,class:"mt-1 mb-5 text-red-500"},Oe={class:"flex flex-column gap-2"},We={class:"w-full text-right",for:"username"},He={key:0,class:"mt-1 mb-5 text-red-500"},Ze={class:"py-3"},Je={class:"flex flex-column gap-2"},Ke={class:"w-full text-right",for:"username"},Qe={key:0,class:"mt-1 mb-5 text-red-500"},Ge={class:"flex flex-column gap-2"},Xe={class:"w-full text-right",for:"username"},el={key:0,class:"mt-1 mb-5 text-red-500"},ll={class:"flex flex-column gap-2"},tl={class:"w-full text-right",for:"username "},al={key:0,class:"mt-1 mb-5 text-red-500"},ol={class:"flex flex-column gap-2"},sl={class:"w-full text-right",for:"username"},nl={key:0,class:"mt-1 mb-5 text-red-500"},il={class:"flex flex-column gap-2"},dl={class:"w-full text-right",for:"username"},ul={key:0,class:"mt-1 mb-5 text-red-500"},rl={class:"flex flex-column gap-2"},cl={class:"w-full text-right",for:"username"},vl={key:0,class:"mt-1 mb-5 text-red-500"},pl={class:"flex flex-column gap-2"},ml={class:"w-full text-right",for:"username"},fl={key:0,class:"mt-1 mb-5 text-red-500"},hl={class:"py-3"},yl={__name:"index",setup(gl){const R=ue(),t=c({long:"",lat:"",assigners:[]}),j=c(!0),z=c({}),n=c(""),A=c(null),F=c(""),k=c(!1);c(!1);const O=c(null),P=c({});c(!1);const _=c(!1),w=c(!1),E=c([]);c({lat:10,lng:10});const m=c({name:"",latitude:31.984983325941823,longitude:35.900908045672196,distance:1e3});re(()=>{oe()}),ce(()=>(console.log(m.value.distance),{center:{lat:m.value.latitude,lng:m.value.longitude},radius:parseInt(m.value.distance),strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}));function W(e){const l=e.latLng,g=l.lat(),f=l.lng();t.value.lat=g,t.value.long=f,console.log("Clicked coordinates:",g,f)}const T=()=>{$.get("/api/official-leaves").then(e=>{j.value=!1,A.value=e.data.data}),$.get("/api/employees").then(e=>{E.value=e.data.data})},Q=e=>{F.value=e,_.value=!_.value},G=()=>{$.delete(`/api/official-leaves/${F.value}`).then(e=>{T(),_.value=!_.value})},X=()=>{w.value=!w.value},ee=()=>{t.value.end=Z(t.value.end).format("YYYY-MM-DD HH:mm:ss"),t.value.start=Z(t.value.start).format("YYYY-MM-DD HH:mm:ss"),$.post("api/official-leaves",t.value).then(e=>{T(),w.value=!w.value,R.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(e=>{n.value=e.response.data.errors})},le=e=>{F.value=e,k.value=!k.value,$.get(`/api/official-leaves/${e}`).then(l=>{t.value.title=l.data.data.title,t.value.location=l.data.data.location,t.value.lat=l.data.data.lat,t.value.long=l.data.data.long,t.value.start=l.data.data.start,t.value.end=l.data.data.end,m.value.latitude=l.data.data.lat,m.value.longitude=l.data.data.long;for(let g=0;g<l.data.data.assigners.length;g++)t.value.assigners.push(l.data.data.assigners[g].employee_id)})},te=()=>{$.put(`api/official-leaves/${F.value}`,t.value).then(e=>{T(),k.value=!k.value,R.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(e=>{n.value=e.response.data.errors})};ve(()=>{T()});const ae=()=>{O.value.exportCSV()},oe=()=>{P.value={global:{value:null,matchMode:pe.CONTAINS}}};return(e,l)=>{const g=h("Toast"),f=h("Button"),se=h("Toolbar"),x=h("InputText"),ne=h("ProgressSpinner"),V=h("Column"),ie=h("router-link"),de=h("DataTable"),Y=h("Dialog"),I=h("Calendar"),H=h("MultiSelect"),L=h("InputNumber"),C=me("can");return r(),v("div",he,[o("div",ge,[o("div",be,[a(g),a(se,{class:"mb-4"},{start:u(()=>[o("div",_e,[B(a(f,{label:e.$t("add_official_leaves"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:X},null,8,["label"]),[[C,"official leave create"]])])]),end:u(()=>[B(a(f,{label:e.$t("export"),icon:"pi pi-upload",class:"p-button-help",onClick:l[0]||(l[0]=i=>ae(i))},null,8,["label"]),[[C,"official leave list"]])]),_:1}),B((r(),fe(de,{ref_key:"dt",ref:O,loading:j.value,value:A.value,selection:e.selectedUsers,"onUpdate:selection":l[2]||(l[2]=i=>e.selectedUsers=i),paginator:!0,rows:10,filters:P.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} users",responsiveLayout:"scroll"},{header:u(()=>[o("div",ye,[o("h5",ke,s(e.$t("official_leaves")),1),o("span",we,[Ve,a(x,{modelValue:P.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=i=>P.value.global.value=i),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])]),empty:u(()=>[y(" No official leaves found.")]),loading:u(()=>[a(ne)]),default:u(()=>[a(V,{selectionMode:"multiple",headerStyle:"width: 3rem"}),a(V,{field:"title",header:e.$t("title"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.title),1)]),_:1},8,["header"]),a(V,{field:"location",header:e.$t("location"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.location),1)]),_:1},8,["header"]),a(V,{field:"Start Date",header:e.$t("start_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.start),1)]),_:1},8,["header"]),a(V,{field:"End Date",header:e.$t("end_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:u(i=>[y(s(i.data.end),1)]),_:1},8,["header"]),a(V,{headerStyle:"min-width:10rem;"},{body:u(i=>[a(ie,{to:{type:Object,required:!0},onClick:b=>e.showUser(i.data)},null,8,["onClick"]),B(a(f,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:b=>le(i.data.id)},null,8,["onClick"]),[[C,"official leave edit"]]),B(a(f,{icon:"pi pi-trash",class:"delete mt-2",onClick:b=>Q(i.data.id)},null,8,["onClick"]),[[C,"official leave delete"]])]),_:1})]),_:1},8,["loading","value","selection","filters"])),[[C,"official leave list"]]),a(Y,{visible:_.value,"onUpdate:visible":l[4]||(l[4]=i=>_.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:u(()=>[a(f,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=i=>_.value=!1)},null,8,["label"]),a(f,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:G},null,8,["label"])]),default:u(()=>[o("div",$e,[xe,z.value?(r(),v("span",Ce,[y(s(e.$t("remove_item"))+" ",1),o("b",null,s(z.value.first_name),1),y("?")])):p("",!0)])]),_:1},8,["visible"]),a(Y,{visible:w.value,"onUpdate:visible":l[12]||(l[12]=i=>w.value=i),style:{width:"550px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{footer:u(()=>[a(f,{label:e.$t("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e.hideDialogRequest},null,8,["label","onClick"]),a(f,{label:e.$t("save"),icon:"pi pi-check",class:"p-button-text",onClick:ee},null,8,["label"])]),default:u(()=>{var i,b,U,D,S,q,M;return[o("div",Ue,[o("label",De,s(e.$t("title")),1),a(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.title,"onUpdate:modelValue":l[5]||(l[5]=d=>t.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(i=n.value)!=null&&i.title?(r(),v("div",Se,s(n.value.title[0]),1)):p("",!0)]),o("div",qe,[o("label",Me,s(e.$t("location")),1),a(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.location,"onUpdate:modelValue":l[6]||(l[6]=d=>t.value.location=d),placeholder:e.$t("location")},null,8,["modelValue","placeholder"]),(b=n.value)!=null&&b.location?(r(),v("div",Be,s(n.value.location[0]),1)):p("",!0)]),o("div",Fe,[o("label",Pe,s(e.$t("start_date")),1),a(I,{style:{width:"100%"},showButtonBar:"",modelValue:t.value.start,"onUpdate:modelValue":l[7]||(l[7]=d=>t.value.start=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("start_date")},null,8,["modelValue","placeholder"]),(U=n.value)!=null&&U.start?(r(),v("div",Te,s(n.value.start[0]),1)):p("",!0)]),o("div",Ie,[o("label",Le,s(e.$t("end_date")),1),a(I,{style:{width:"100%"},showButtonBar:"",modelValue:t.value.end,"onUpdate:modelValue":l[8]||(l[8]=d=>t.value.end=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("end_date")},null,8,["modelValue","placeholder"]),(D=n.value)!=null&&D.end?(r(),v("div",Ne,s(n.value.end[0]),1)):p("",!0)]),o("div",Ee,[o("label",Ye,s(e.$t("Employees")),1),a(H,{filter:"",required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.value.assigners,"onUpdate:modelValue":l[9]||(l[9]=d=>t.value.assigners=d),"option-value":"id",options:E.value,optionLabel:"name",placeholder:e.$t("Employees"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(S=n.value)!=null&&S.assigners?(r(),v("div",Re,s(n.value.assigners[0]),1)):p("",!0)]),o("div",je,[o("label",ze,s(e.$t("lat")),1),a(L,{required:"",class:"bg-[#f7f5f5]",modelValue:t.value.lat,"onUpdate:modelValue":l[10]||(l[10]=d=>t.value.lat=d),placeholder:e.$t("lat")},null,8,["modelValue","placeholder"]),(q=n.value)!=null&&q.lat?(r(),v("div",Ae,s(n.value.lat[0]),1)):p("",!0)]),o("div",Oe,[o("label",We,s(e.$t("long")),1),a(L,{required:"",class:"bg-[#f7f5f5]",modelValue:t.value.long,"onUpdate:modelValue":l[11]||(l[11]=d=>t.value.long=d),placeholder:e.$t("long")},null,8,["modelValue","placeholder"]),(M=n.value)!=null&&M.long?(r(),v("div",He,s(n.value.long[0]),1)):p("",!0)]),o("div",Ze,[a(N(J),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:W,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:u(()=>[a(N(K),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])])]}),_:1},8,["visible","header"]),a(Y,{visible:k.value,"onUpdate:visible":l[20]||(l[20]=i=>k.value=i),style:{width:"450px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{footer:u(()=>[a(f,{label:e.$t("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e.hideDialogRequest},null,8,["label","onClick"]),a(f,{label:e.$t("save"),icon:"pi pi-check",class:"p-button-text",onClick:te},null,8,["label"])]),default:u(()=>{var i,b,U,D,S,q,M;return[o("div",Je,[o("label",Ke,s(e.$t("title")),1),a(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.title,"onUpdate:modelValue":l[13]||(l[13]=d=>t.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(i=n.value)!=null&&i.title?(r(),v("div",Qe,s(n.value.title[0]),1)):p("",!0)]),o("div",Ge,[o("label",Xe,s(e.$t("location")),1),a(x,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.location,"onUpdate:modelValue":l[14]||(l[14]=d=>t.value.location=d),placeholder:e.$t("location")},null,8,["modelValue","placeholder"]),(b=n.value)!=null&&b.location?(r(),v("div",el,s(n.value.location[0]),1)):p("",!0)]),o("div",ll,[o("label",tl,s(e.$t("start_date")),1),a(I,{style:{width:"100%"},showButtonBar:"",modelValue:t.value.start,"onUpdate:modelValue":l[15]||(l[15]=d=>t.value.start=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("start_date")},null,8,["modelValue","placeholder"]),(U=n.value)!=null&&U.start?(r(),v("div",al,s(n.value.start[0]),1)):p("",!0)]),o("div",ol,[o("label",sl,s(e.$t("end_date")),1),a(I,{style:{width:"100%"},showButtonBar:"",modelValue:t.value.end,"onUpdate:modelValue":l[16]||(l[16]=d=>t.value.end=d),modelModifiers:{number:!0},showIcon:"",placeholder:e.$t("end_date")},null,8,["modelValue","placeholder"]),(D=n.value)!=null&&D.end?(r(),v("div",nl,s(n.value.end[0]),1)):p("",!0)]),o("div",il,[o("label",dl,s(e.$t("Employees")),1),a(H,{filter:"",required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.value.assigners,"onUpdate:modelValue":l[17]||(l[17]=d=>t.value.assigners=d),"option-value":"id",options:E.value,optionLabel:"name",placeholder:e.$t("Employees"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(S=n.value)!=null&&S.assigners?(r(),v("div",ul,s(n.value.assigners[0]),1)):p("",!0)]),o("div",rl,[o("label",cl,s(e.$t("lat")),1),a(L,{required:"",class:"bg-[#f7f5f5]",modelValue:t.value.lat,"onUpdate:modelValue":l[18]||(l[18]=d=>t.value.lat=d),placeholder:e.$t("lat")},null,8,["modelValue","placeholder"]),(q=n.value)!=null&&q.lat?(r(),v("div",vl,s(n.value.lat[0]),1)):p("",!0)]),o("div",pl,[o("label",ml,s(e.$t("long")),1),a(L,{required:"",class:"bg-[#f7f5f5]",modelValue:t.value.long,"onUpdate:modelValue":l[19]||(l[19]=d=>t.value.long=d),placeholder:e.$t("long")},null,8,["modelValue","placeholder"]),(M=n.value)!=null&&M.long?(r(),v("div",fl,s(n.value.long[0]),1)):p("",!0)]),o("div",hl,[a(N(J),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:W,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:u(()=>[a(N(K),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])])]}),_:1},8,["visible","header"])])]),a(g)])}}};export{yl as default};
