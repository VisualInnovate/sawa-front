import{m as W,a1 as X,q as o,l as Y,aj as Z,a2 as ee,ak as te,r as v,al as le,o as m,d as x,e as s,f as a,g as u,i as y,L as N,t as r,h as B,j as g,w as j,n as I,c as k}from"./main-07c0fdcf.js";import{D as se}from"./Deduction-49b93853.js";const ae={class:"grid"},oe={class:"col-12"},ie={class:"relative"},ne={style:{},class:"shadow-xl"},ue={class:"flex w-full justify-between align-items-center"},de={class:"m-0 my-auto"},re={class:"block mt-2 md:mt-0 p-input-icon-left"},ce=s("i",{class:"pi pi-search"},null,-1),ve={class:"flex align-items-center justify-content-center"},me=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),pe={key:0},fe=["onSubmit"],_e={class:"flex flex-column gap-2"},be={class:"w-full text-right",for:"username"},he={key:0,class:"p-invalid text-red-600 w-full text-center"},ye={class:"w-full text-center"},ge=["onSubmit"],ke={class:"flex flex-column gap-2"},$e={class:"w-full text-right",for:"username"},we={key:0,class:"p-invalid text-red-600 w-full text-center"},Ce={class:"w-full text-center"},Se={__name:"deduction-types",setup(xe){const p=W();X();const c=o(!1),V=o(!0),L=o({});o("");const P=o(null),{t:n}=Y(),b=o(!1),$=o(""),U=o(null),M=o(null),w=o({}),f=o(!1),i=o({}),_=o(!1);Z(()=>{G()});const C=()=>{k.get("/api/deduction-types").then(e=>{V.value=!1,P.value=e.data.data})};ee(()=>{C()});const R=e=>{k.get(`/api/deduction-types/${e}`).then(l=>{V.value=!1,i.value=l.data.data}),$.value=e,_.value=!_.value},q=()=>{k.put(`/api/deduction-types/${$.value}`,i.value).then(e=>{console.log(e.data),C(),_.value=!_.value,p.add({severity:"success",summary:n("success_message"),detail:`${n("element_update_success")}`,life:3e3}),i.value=o({})}).catch(e=>{p.add({severity:"error",summary:n("error"),detail:`${n("mission_error")}`,life:3e3})})},F=()=>{f.value=!f.value,i.value={},c.value=!1},z=e=>{console.log(e),b.value=!0,$.value=e},A=()=>{k.post("/api/deduction-types",i.value).then(e=>{console.log(e.data),C(),f.value=!f.value,p.add({severity:"success",summary:n("success_message"),detail:`${n("element_add_success")}`,life:3e3}),i.value=o({})}).catch(e=>{p.add({severity:"error",summary:n("error"),detail:`${n("mission_error")}`,life:3e3})})},E=()=>{k.delete(`/api/deduction-types/${$.value}`).then(e=>{console.log(e.data),b.value=!1,C(),p.add({severity:"success",summary:n("success_message"),detail:`${n("element_delet_success")}`,life:3e3})}).catch(()=>{p.add({severity:"error",summary:n("error"),detail:`${n("mission_error")}`,life:3e3})})},O=()=>{M.value.exportCSV()},G=()=>{w.value={global:{value:null,matchMode:te.CONTAINS}}};return(e,l)=>{const d=v("Button"),H=v("Toast"),D=v("InputText"),S=v("Column"),J=v("DataTable"),T=v("Dialog"),K=v("va-card"),h=le("can");return m(),x("div",ae,[s("div",oe,[a(K,{class:"card"},{default:u(()=>[s("div",ie,[a(se),y(a(d,{label:e.$t("deduction_add"),icon:"pi pi-plus",class:"p-button-success mr-2 absolute top-3",onClick:F},null,8,["label"]),[[h,"skills create"]]),y(a(d,{label:e.$t("export"),icon:"pi pi-upload",class:"export absolute top-3 ltr:left-[15%] rtl:right-[15%]",onClick:l[0]||(l[0]=t=>O(t))},null,8,["label"]),[[h,"skills list"]])]),a(H),s("div",ne,[y((m(),N(J,{ref_key:"dt",ref:M,selection:U.value,"onUpdate:selection":l[2]||(l[2]=t=>U.value=t),value:P.value,loading:V.value,"data-key":"id",paginator:!0,rows:10,filters:w.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:u(()=>[s("div",ue,[s("h5",de,r(e.$t("deductions")),1),s("div",null,[s("span",re,[ce,a(D,{modelValue:w.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=t=>w.value.global.value=t),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:u(()=>[a(S,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(S,{field:"title",header:e.$t("title"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:u(t=>[B(r(t.data.title),1)]),_:1},8,["header"]),a(S,{"header-style":"min-width:10rem;"},{body:u(t=>[s("div",null,[t.data.id!="1"?y((m(),N(d,{key:0,icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:Q=>R(t.data.id)},null,8,["onClick"])),[[h,"skills edit"]]):g("",!0),t.data.id!="1"?y((m(),N(d,{key:1,icon:"pi pi-trash",class:"delete mt-2",onClick:Q=>z(t.data.id)},null,8,["onClick"])),[[h,"skills delete"]]):g("",!0)])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[h,"skills list"]]),a(T,{visible:b.value,"onUpdate:visible":l[4]||(l[4]=t=>b.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:u(()=>[a(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=t=>b.value=!1)},null,8,["label"]),a(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:E},null,8,["label"])]),default:u(()=>[s("div",ve,[me,L.value?(m(),x("span",pe,[B(r(e.$t("remove_item"))+" ",1),s("b",null,r(L.value.first_name),1),B("?")])):g("",!0)])]),_:1},8,["visible","header"]),a(T,{visible:f.value,"onUpdate:visible":l[7]||(l[7]=t=>f.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:u(()=>[s("form",{onSubmit:j(A,["prevent"])},[s("div",_e,[s("p",be,r(e.$t("deduction_title")),1),a(D,{class:I(["bg-[#f7f5f5]",{"p-invalid":c.value&&!i.value.title}]),modelValue:i.value.title,"onUpdate:modelValue":l[5]||(l[5]=t=>i.value.title=t)},null,8,["modelValue","class"]),c.value&&!i.value.title?(m(),x("small",he,r(e.$t("deduction_title")+" "+e.$t("required"))+".",1)):g("",!0)]),s("div",ye,[a(d,{onClick:l[6]||(l[6]=t=>c.value=!0),type:"submit",class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],40,fe)]),_:1},8,["visible","header"]),a(T,{visible:_.value,"onUpdate:visible":l[10]||(l[10]=t=>_.value=t),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:u(()=>[s("form",{onSubmit:j(q,["prevent"])},[s("div",ke,[s("p",$e,r(e.$t("deduction_title")),1),a(D,{class:I(["bg-[#f7f5f5]",{"p-invalid":c.value&&!i.value.title}]),modelValue:i.value.title,"onUpdate:modelValue":l[8]||(l[8]=t=>i.value.title=t)},null,8,["modelValue","class"]),c.value&&!i.value.title?(m(),x("small",we,r(e.$t("deduction_title")+" "+e.$t("required"))+".",1)):g("",!0)]),s("div",Ce,[a(d,{onClick:l[9]||(l[9]=t=>c.value=!0),type:"submit",class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],40,ge)]),_:1},8,["visible","header"])])]),_:1})])])}}};export{Se as default};
