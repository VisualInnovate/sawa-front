import{_ as oe,m as ne,a2 as re,q as p,ak as ie,a3 as de,al as ue,r as m,am as F,o as r,d,e as t,f as s,i as h,L as pe,g as u,t as n,h as G,j as v,ad as W,c as V,y as ce,z as ve}from"./main-1fd4141d.js";import{L as me}from"./LeavesNave-ad8c8158.js";const R=S=>(ce("data-v-3af714c2"),S=S(),ve(),S),he={class:"grid"},ye={class:"col-12"},fe={class:"card p-4 shadow-2 border-round"},be={class:"card shadow-1 surface-0"},ge={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},_e={class:"m-0"},we={class:"flex gap-2"},xe={class:"p-input-icon-left"},ke=R(()=>t("i",{class:"pi pi-search"},null,-1)),$e={key:0},Ve={key:1,class:"text-gray-400"},Se={key:0},Ce={key:1,class:"text-gray-400"},Le={class:"flex gap-1 justify-content-center"},De=R(()=>t("div",{class:"text-center py-4"},[t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),t("p",{class:"text-xl"},"No records found")],-1)),Te={class:"flex justify-content-center align-items-center py-4"},Ne={class:"flex align-items-center justify-content-center"},Ue=R(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),qe={class:"flex flex-column gap-2 py-1"},Be={class:"w-full text-right"},Ee={key:0,class:"mt-1 mb-5 text-red-500"},Ie={class:"flex flex-column gap-2 py-1"},Pe={class:"w-full text-right"},Re={key:0,class:"mt-1 mb-5 text-red-500"},Ae={class:"flex flex-column gap-2 py-1"},Me={class:"w-full text-right"},je={key:0,class:"mt-1 mb-5 text-red-500"},He={class:"flex flex-column gap-2 py-1"},ze={class:"w-full text-right"},Fe={key:0,class:"mt-1 mb-5 text-red-500"},Ge={class:"w-full text-center"},We={class:"flex flex-column gap-2 py-1"},Oe={class:"w-full text-right"},Je={key:0,class:"mt-1 mb-5 text-red-500"},Ke={class:"flex flex-column gap-2 py-1"},Qe={class:"w-full text-right"},Xe={key:0,class:"mt-1 mb-5 text-red-500"},Ye={key:0,class:"flex flex-column gap-2 py-1"},Ze={class:"w-full text-right"},et={key:0,class:"mt-1 mb-5 text-red-500"},tt={key:1,class:"flex flex-column gap-2 py-1"},lt={class:"w-full text-right"},st={key:0,class:"mt-1 mb-5 text-red-500"},at={class:"w-full text-center"},ot={__name:"index",setup(S){const q=ne();re();const C=p(!0),A=p(null),g=p(!1),L=p(""),M=p(null),j=p(null),D=p({}),T=p(!1),N=p(!1),o=p({type:null,title:"",days:null,hours:null}),B=p(!1),E=p(!1);ie(()=>{le()});const _=()=>{C.value=!0,V.get("/api/leave-setup").then(e=>{C.value=!1,A.value=e.data.data})},H=()=>[{name:"Daily",value:"daily"},{name:"Hourly",value:"hourly"}],O=()=>{o.value.days=null,o.value.hours=null};de(()=>{_()});const J=e=>{V.get(`/api/leave-setup/${e}`).then(l=>{C.value=!1,o.value=l.data.data}),L.value=e,N.value=!0},K=()=>{V.put(`/api/leave-setup/${L.value}`,o.value).then(e=>{_(),N.value=!1,q.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),o.value={type:null,title:"",days:null,hours:null}}).catch(e=>{error.value=e.response.data.errors})},Q=()=>{T.value=!0,o.value={type:null,title:"",days:null,hours:null}},X=e=>{g.value=!0,L.value=e},Y=()=>{V.post("/api/leave-setup",o.value).then(e=>{_(),T.value=!1,q.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),o.value={type:null,title:"",days:null,hours:null}}).catch(e=>{error.value=e.response.data.errors})},Z=()=>{V.delete(`/api/leave-setup/${L.value}`).then(e=>{g.value=!1,_(),q.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},ee=()=>{B.value=!0,j.value.exportCSV(),setTimeout(()=>{B.value=!1},1e3)},te=()=>{E.value=!0;const e=document.querySelector(".p-datatable-wrapper").cloneNode(!0);e.querySelectorAll(".p-button").forEach(w=>w.remove());const y=window.open("","_blank");y.document.write(`
    <html>
      <head>
        <title>Leave Setup Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Leave Setup Report</h1>
        ${e.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),y.document.close(),y.focus(),setTimeout(()=>{y.print(),y.close(),E.value=!1},500)},le=()=>{D.value={global:{value:null,matchMode:ue.CONTAINS}}};return(e,l)=>{const y=m("Toast"),w=m("InputText"),c=m("Button"),b=m("Column"),se=m("ProgressSpinner"),ae=m("DataTable"),I=m("Dialog"),z=m("Dropdown"),U=m("InputNumber"),x=F("can"),P=F("tooltip");return r(),d("div",he,[t("div",ye,[t("div",fe,[s(me),s(y),t("div",be,[h((r(),pe(ae,{ref_key:"dt",ref:j,selection:M.value,"onUpdate:selection":l[1]||(l[1]=a=>M.value=a),value:A.value,loading:C.value,"data-key":"id",paginator:!0,rows:10,filters:D.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:u(()=>[t("div",ge,[t("h3",_e,n(e.$t("Leave Setup List")),1),t("div",we,[t("span",xe,[ke,s(w,{modelValue:D.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=a=>D.value.global.value=a),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),s(c,{label:e.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:E.value,onClick:te},null,8,["label","loading"]),h(s(c,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:B.value,onClick:ee},null,8,["label","loading"]),[[x,"leave setup list"]]),h(s(c,{label:e.$t("Add New"),icon:"pi pi-plus",class:"p-button-success no-print",onClick:Q},null,8,["label"]),[[x,"leave setup create"]]),h(s(c,{icon:"pi pi-refresh",class:"p-button-text",onClick:_},null,512),[[P,"Refresh data",void 0,{top:!0}]])])])]),empty:u(()=>[De]),loading:u(()=>[t("div",Te,[s(se,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:u(()=>[s(b,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(b,{field:"type",header:e.$t("Type"),sortable:!0},{body:u(a=>[G(n(a.data.type),1)]),_:1},8,["header"]),s(b,{field:"title",header:e.$t("Title"),sortable:!0},{body:u(a=>[G(n(a.data.title),1)]),_:1},8,["header"]),s(b,{field:"days",header:e.$t("Days"),sortable:!0},{body:u(a=>[a.data.days!==null?(r(),d("span",$e,n(a.data.days),1)):(r(),d("span",Ve,"-"))]),_:1},8,["header"]),s(b,{field:"hours",header:e.$t("Hours"),sortable:!0},{body:u(a=>[a.data.hours!==null?(r(),d("span",Se,n(a.data.hours),1)):(r(),d("span",Ce,"-"))]),_:1},8,["header"]),s(b,{exportable:!1,"header-style":"width: 10rem","body-class":"text-center"},{body:u(a=>[t("div",Le,[h(s(c,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text p-button-success",onClick:f=>J(a.data.id)},null,8,["onClick"]),[[x,"leave setup edit"],[P,"Edit",void 0,{top:!0}]]),h(s(c,{icon:"pi pi-trash",class:"p-button-rounded p-button-text p-button-danger",onClick:f=>X(a.data.id)},null,8,["onClick"]),[[x,"leave setup delete"],[P,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[x,"leave setup list"]])]),s(I,{visible:g.value,"onUpdate:visible":l[3]||(l[3]=a=>g.value=a),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:u(()=>[s(c,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[2]||(l[2]=a=>g.value=!1)},null,8,["label"]),s(c,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:u(()=>[t("div",Ne,[Ue,t("span",null,n(e.$t("Are you sure you want to delete this leave setup?")),1)])]),_:1},8,["visible","header"]),s(I,{visible:T.value,"onUpdate:visible":l[8]||(l[8]=a=>T.value=a),style:{width:"450px"},header:e.$t("Create Leave Setup"),modal:!0},{default:u(()=>{var a,f,k,$;return[t("div",qe,[t("label",Be,n(e.$t("Type")),1),s(z,{modelValue:o.value.type,"onUpdate:modelValue":l[4]||(l[4]=i=>o.value.type=i),required:"","option-value":"value",options:H(),optionLabel:"name",placeholder:e.$t("Select type"),class:"w-full"},null,8,["modelValue","options","placeholder"]),(a=e.error)!=null&&a.type?(r(),d("div",Ee,n(e.error.type[0]),1)):v("",!0)]),t("div",Ie,[t("label",Pe,n(e.$t("Title")),1),s(w,{required:"",class:"w-full",modelValue:o.value.title,"onUpdate:modelValue":l[5]||(l[5]=i=>o.value.title=i),placeholder:e.$t("Enter title")},null,8,["modelValue","placeholder"]),(f=e.error)!=null&&f.title?(r(),d("div",Re,n(e.error.title[0]),1)):v("",!0)]),h(t("div",Ae,[t("label",Me,n(e.$t("Days")),1),s(U,{required:"",class:"w-full",modelValue:o.value.days,"onUpdate:modelValue":l[6]||(l[6]=i=>o.value.days=i),placeholder:e.$t("Enter days")},null,8,["modelValue","placeholder"]),(k=e.error)!=null&&k.days?(r(),d("div",je,n(e.error.days[0]),1)):v("",!0)],512),[[W,o.value.type==="daily"]]),h(t("div",He,[t("label",ze,n(e.$t("Hours")),1),s(U,{required:"",class:"w-full",modelValue:o.value.hours,"onUpdate:modelValue":l[7]||(l[7]=i=>o.value.hours=i),placeholder:e.$t("Enter hours")},null,8,["modelValue","placeholder"]),($=e.error)!=null&&$.hours?(r(),d("div",Fe,n(e.error.hours[0]),1)):v("",!0)],512),[[W,o.value.type==="hourly"]]),t("div",Ge,[s(c,{onClick:Y,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),s(I,{visible:N.value,"onUpdate:visible":l[13]||(l[13]=a=>N.value=a),style:{width:"450px"},header:e.$t("Update Leave Setup"),modal:!0},{default:u(()=>{var a,f,k,$;return[t("div",We,[t("label",Oe,n(e.$t("Type")),1),s(z,{modelValue:o.value.type,"onUpdate:modelValue":[l[9]||(l[9]=i=>o.value.type=i),O],required:"","option-value":"value",options:H(),optionLabel:"name",placeholder:e.$t("Select type"),class:"w-full"},null,8,["modelValue","options","placeholder"]),(a=e.error)!=null&&a.type?(r(),d("div",Je,n(e.error.type[0]),1)):v("",!0)]),t("div",Ke,[t("label",Qe,n(e.$t("Title")),1),s(w,{required:"",class:"w-full",modelValue:o.value.title,"onUpdate:modelValue":l[10]||(l[10]=i=>o.value.title=i),placeholder:e.$t("Enter title")},null,8,["modelValue","placeholder"]),(f=e.error)!=null&&f.title?(r(),d("div",Xe,n(e.error.title[0]),1)):v("",!0)]),o.value.type==="daily"?(r(),d("div",Ye,[t("label",Ze,n(e.$t("Days")),1),s(U,{required:"",class:"w-full",modelValue:o.value.days,"onUpdate:modelValue":l[11]||(l[11]=i=>o.value.days=i),placeholder:e.$t("Enter days")},null,8,["modelValue","placeholder"]),(k=e.error)!=null&&k.days?(r(),d("div",et,n(e.error.days[0]),1)):v("",!0)])):v("",!0),o.value.type==="hourly"?(r(),d("div",tt,[t("label",lt,n(e.$t("Hours")),1),s(U,{required:"",class:"w-full",modelValue:o.value.hours,"onUpdate:modelValue":l[12]||(l[12]=i=>o.value.hours=i),placeholder:e.$t("Enter hours")},null,8,["modelValue","placeholder"]),($=e.error)!=null&&$.hours?(r(),d("div",st,n(e.error.hours[0]),1)):v("",!0)])):v("",!0),t("div",at,[s(c,{onClick:K,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])])])}}},it=oe(ot,[["__scopeId","data-v-3af714c2"]]);export{it as default};
