import{_ as S,u as P,c as m,r as _,o as r,d as u,f as o,g as f,e as i,F as L,x as U,t as d,j as p,h as B,a8 as N,w as I,n as y}from"./main-1fd4141d.js";import{C as M}from"./ChildTaps-e97363a2.js";import{h as D}from"./moment-fbc5633a.js";const q={components:{ChildTaps:M},data(){return{child_id:P("child_id",Number),maxDate:new Date,details:[],evalate:{},error:{},days:[0,1,2,3,4,5,6],business_hours:[],submitted:!1,slots:[],delete_id:0,doctors:{},deleteDialog:!1,total_pages:0,current_page:0,updatedialog:!1,evaluate_types:[{name:"side profile",id:1},{name:"milestone",id:2},{name:"barrier",id:3},{name:"ablls",id:4},{name:"carolina",id:5}]}},methods:{opennew(){this.updatedialog=!this.updatedialog},getdoctor_evalte(e){m.post("api/evaluation-doctors",{evaluation_type:e}).then(t=>{this.doctors=t.data.doctors})},getDays(e){this.business_hours=this.doctors.find(t=>t.id==e).business_hours,console.log(this.business_hours)},gettimes(e){m.post("api/users/available/slots",{user_id:this.evalate.specialist_id,evaluation_type:this.evalate.evaluation_type,date:D(e).format("Y-MM-DD")}).then(t=>{this.slots=t.data.slots})},go_evaluate(e,t,c,h){t==2&&this.$router.push({name:"milestone-resulte",params:{id:c,evla_id:e}}),t==3&&this.$router.push({name:"barrier-resulte",params:{id:c}}),t==4&&this.$router.push({name:"ablls-resulte",params:{id:e}}),t==5?this.$router.push({name:"carolina-resulte",params:{id:e}}):this.$router.push({name:"showChildResult",params:{child_id:h.pivot.child_id,sideProfile_id:h.side_profile_id,evaluation_id:e}})},create(){var e,t,c,h,s;m.post("api/evaluation-request",{child_id:localStorage.getItem("child_id"),consultant_id:localStorage.getItem("user_id"),evaluation_type:this.evalate.evaluation_type,date:D(this.evalate.date).format("Y-MM-DD"),specialist_id:(e=this.evalate)==null?void 0:e.specialist_id,start_time:(c=(t=this.evalate)==null?void 0:t.Session_time)==null?void 0:c.start,end_time:(s=(h=this.evalate)==null?void 0:h.Session_time)==null?void 0:s.end}).then(n=>{this.updatedialog=!this.updatedialog,this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_add_success")}`,life:3e3}),this.$router.push({name:"children-request"})}).catch(n=>{this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${this.$t("mission_error")}`,life:3e3})})},getusers(){m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations`).then(e=>{this.total_pages=e.data.evaluations.last_page+1,this.details=e.data.evaluations}).catch(e=>{})},deleteevalution(e){this.delete_id=e,this.deleteDialog=!this.deleteDialog},deleteAction(){m.delete(`api/evaluations/${this.delete_id}/delete`).then(e=>{this.getusers(),this.deleteDialog=!this.deleteDialog})},getdoctors(){m.get("api/doctors").then(e=>{this.doctors=e.data.doctors}).catch(e=>{})}},computed:{filteredDays(){const e=this.business_hours.map(t=>t.day);return this.days.filter(t=>!e.includes(t))}},watch:{current_page(e,t){console.log(`Counter changed from ${t} to ${e}`),m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations?page=${e}`).then(c=>{this.details=c.data.evaluations})}},mounted(){this.getusers(),this.getdoctors(),this.child_id=localStorage.getItem("child_id")}},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4"},F={class:"shadow-md bg-slate-100 rounded-sm p-4 grid grid-cols-2"},R={class:"flex py-2"},j={class:"my-auto font-bold"},z={class:"text-xl px-1 my-auto"},A={class:"flex py-2"},E={class:"my-auto font-bold"},Y={class:"text-xl px-1 my-auto"},J={class:"flex py-2"},O={class:"my-auto font-bold"},G={class:"text-xl px-1 my-auto"},H={class:"flex py-2"},K={class:"my-auto font-bold"},Q={key:0,class:"text-xl px-1 my-auto"},W={key:1,class:"text-xl px-1 my-auto"},X={class:"text-center"},Z={class:"w-full pb-2 text-center"},$={key:0,class:"card"},ee={class:"flex align-items-center justify-content-center"},te=i("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),se={class:"flex flex-column gap-2 py-1"},ie={class:"w-full text-right",for:"username"},le={key:0,class:"flex flex-column gap-2 py-1"},oe={class:"w-full text-right",for:"username"},ae={key:1,class:"flex flex-column gap-2"},de={class:"w-full text-right",for:"username"},ne={key:0,class:"mt-1 mb-5 text-red-500"},re={key:2,class:"flex flex-column gap-2 py-1"},ue={class:"w-full text-right",for:"username"},ce={key:0,class:"mt-1 mb-5 text-red-500"},pe={class:"w-full text-center"};function me(e,t,c,h,s,n){const w=_("ChildTaps"),g=_("Button"),k=_("Paginator"),x=_("Dialog"),b=_("Dropdown"),C=_("Calendar"),V=_("toast");return r(),u("div",null,[o(w),o(N,null,{default:f(()=>[i("div",T,[(r(!0),u(L,null,U(s.details.data,l=>{var v;return r(),u("div",F,[i("div",null,[i("div",R,[i("h3",j,d(e.$t("اسم التقييم"))+" :",1),i("p",z,d(l.title),1)]),i("div",A,[i("h3",E,d(e.$t("تاريخ التقييم"))+" :",1),i("p",Y,d(l.date),1)]),i("div",J,[i("h3",O,d(e.$t("اسم المقييم"))+" :",1),i("p",G,d((v=l.specialist)==null?void 0:v.name),1)]),i("div",H,[i("h3",K,d(e.$t(" حالة التقييم"))+" :",1),l.status==1?(r(),u("p",Q," منتهي")):p("",!0),l.status==0?(r(),u("p",W," تحت التقييم ")):p("",!0)])]),i("div",X,[o(g,{onClick:a=>n.go_evaluate(l.id,l.type,l.child_id,l),class:"details m-auto"},{default:f(()=>[B(" نتائج التقييم")]),_:2},1032,["onClick"]),o(g,{icon:"pi pi-trash",onClick:a=>n.deleteevalution(l.id,l.child_id),class:"delete m-auto"},null,8,["onClick"])])])}),256))]),i("div",Z,[s.details.data!=[]?(r(),u("div",$,[o(k,{first:s.current_page,"onUpdate:first":t[0]||(t[0]=l=>s.current_page=l),rows:1,totalRecords:s.total_pages,rowsPerPageOptions:[10,20,30],template:{default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  JumpToPageDropdown"}},null,8,["first","totalRecords"])])):p("",!0)])]),_:1}),i("div",null,[o(x,{visible:s.deleteDialog,"onUpdate:visible":t[2]||(t[2]=l=>s.deleteDialog=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:f(()=>[o(g,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[1]||(t[1]=l=>s.deleteDialog=!1)},null,8,["label"]),o(g,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:n.deleteAction},null,8,["label","onClick"])]),default:f(()=>[i("div",ee,[te,i("span",null,d(e.$t("هل انت متاكد من ازالة هذا العنصر"))+" >?",1)])]),_:1},8,["visible","header"]),o(x,{visible:s.updatedialog,"onUpdate:visible":t[10]||(t[10]=l=>s.updatedialog=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:f(()=>{var l,v;return[i("form",{onSubmit:t[9]||(t[9]=I((...a)=>n.create&&n.create(...a),["prevent"])),class:""},[i("div",se,[i("label",ie,d(e.$t("evalute_type")),1),o(b,{"onUpdate:modelValue":[n.getdoctor_evalte,t[3]||(t[3]=a=>s.evalate.evaluation_type=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.evaluation_type,"option-value":"id",filter:"",options:s.evaluate_types,optionLabel:"name",class:y(["w-full",{"p-invalid":s.submitted&&!s.evalate.evaluation_type}])},null,8,["onUpdate:modelValue","modelValue","options","class"])]),s.evalate.evaluation_type?(r(),u("div",le,[i("label",oe,d(e.$t("Name_evaluator")),1),o(b,{"onUpdate:modelValue":[n.getDays,t[4]||(t[4]=a=>s.evalate.specialist_id=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.specialist_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",class:y(["w-full",{"p-invalid":s.submitted&&!s.evalate.specialist_id}])},null,8,["onUpdate:modelValue","modelValue","options","class"])])):p("",!0),s.evalate.specialist_id?(r(),u("div",ae,[i("label",de,d(e.$t("Evaluation_date")),1),o(C,{"onUpdate:modelValue":[t[5]||(t[5]=a=>n.gettimes(a)),t[6]||(t[6]=a=>s.evalate.date=a)],disabledDays:n.filteredDays,style:{width:"100%"},showButtonBar:"",modelValue:s.evalate.date,modelModifiers:{number:!0},showIcon:"",class:y({"p-invalid":s.submitted&&!s.evalate.date}),minDate:s.maxDate},null,8,["disabledDays","modelValue","class","minDate"]),(l=s.error)!=null&&l.date?(r(),u("div",ne,d(s.error.date[0]),1)):p("",!0)])):p("",!0),s.evalate.date?(r(),u("div",re,[i("label",ue,d(e.$t("hour_evaluator")),1),o(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.Session_time,"onUpdate:modelValue":t[7]||(t[7]=a=>s.evalate.Session_time=a),filter:"",options:s.slots,optionLabel:"key",class:y([{"p-invalid":s.submitted&&!s.evalate.Session_time},"w-full"])},null,8,["modelValue","options","class"]),(v=s.error)!=null&&v.specialist_id?(r(),u("div",ce,d(s.error.specialist_id[0]),1)):p("",!0)])):p("",!0),i("div",pe,[o(g,{type:"submit",onClick:t[8]||(t[8]=a=>s.submitted=!0),class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],32)]}),_:1},8,["visible","header"])]),o(V)])}const ve=S(q,[["render",me]]);export{ve as default};
