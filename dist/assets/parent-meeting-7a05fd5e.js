import{_ as H,m as G,l as W,a2 as O,q as n,ak as X,a3 as Y,al as J,r,am as K,o as Q,d as Z,e as o,f as a,g as s,t as d,i as T,h as x,a4 as ee,X as te,c as w,y as ae,z as oe}from"./main-1fd4141d.js";import{h as ne}from"./moment-fbc5633a.js";const k=m=>(ae("data-v-6d7e3c73"),m=m(),oe(),m),se={class:"grid"},le={class:"col-12"},ie={class:"card p-4 shadow-2 border-round"},re={class:"text-2xl font-bold"},de={class:"flex gap-2"},ce={class:"card shadow-1 surface-0"},ue={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},pe={class:"m-0"},me={class:"flex gap-2"},ge={class:"p-input-icon-left"},he=k(()=>o("i",{class:"pi pi-search"},null,-1)),fe={class:"font-medium"},_e={class:"flex gap-1 justify-content-center"},ve=k(()=>o("div",{class:"text-center py-4"},[o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),o("p",{class:"text-xl"},"No records found")],-1)),be={class:"flex justify-content-center align-items-center py-4"},ye={class:"flex align-items-center justify-content-center"},xe=k(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),we={__name:"parent-meeting",setup(m){const L=G(),{t:_}=W();O();const $=n(""),u=n(!0);n({}),n(""),n(""),n(null);const p=n(!1),C=n(""),D=n(null),S=n(null),g=n({}),v=n(!1),b=n(!1),V=n([{name:_("Pending"),code:0},{name:_("Accept"),code:1},{name:_("Cancell"),code:-1}]);X(()=>{A()});const h=()=>{u.value=!0,w.get("/api/parent-meetings/for-admin").then(t=>{$.value=t.data.data,u.value=!1})};Y(()=>{h()});const P=t=>{p.value=!0,C.value=t},B=(t,i)=>{u.value=!0,w.get(`/api/parent-meetings/for-admin/change-status/${t}?status=${i}`).then(l=>{u.value=!1,h()})},N=()=>{w.delete(`/api/parent-meetings/for-admin/${C.value}`).then(t=>{p.value=!1,h(),L.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},I=()=>{v.value=!0,S.value.exportCSV(),setTimeout(()=>{v.value=!1},1e3)},R=()=>{b.value=!0;const t=document.querySelector(".p-datatable-wrapper").cloneNode(!0);t.querySelectorAll(".p-button").forEach(y=>y.remove());const l=window.open("","_blank");l.document.write(`
    <html>
      <head>
        <title>Parent Meetings Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Parent Meetings Report</h1>
        ${t.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),l.document.close(),l.focus(),setTimeout(()=>{l.print(),l.close(),b.value=!1},500)},A=()=>{g.value={global:{value:null,matchMode:J.CONTAINS}}};return(t,i)=>{const l=r("Button"),y=r("Toolbar"),z=r("Toast"),F=r("InputText"),c=r("Column"),U=r("Dropdown"),j=r("ProgressSpinner"),E=r("DataTable"),q=r("Dialog"),M=K("tooltip");return Q(),Z("div",se,[o("div",le,[o("div",ie,[a(y,{class:"mb-4"},{start:s(()=>[o("h2",re,d(t.$t("Parent Meetings Management")),1)]),end:s(()=>[o("div",de,[a(l,{label:t.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:b.value,onClick:R},null,8,["label","loading"]),a(l,{label:t.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:v.value,onClick:I},null,8,["label","loading"])])]),_:1}),a(z),o("div",ce,[a(E,{ref_key:"dt",ref:S,selection:D.value,"onUpdate:selection":i[1]||(i[1]=e=>D.value=e),value:$.value,loading:u.value,"data-key":"id",paginator:!0,rows:10,filters:g.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:s(()=>[o("div",ue,[o("h3",pe,d(t.$t("Parent Meetings List")),1),o("div",me,[o("span",ge,[he,a(F,{modelValue:g.value.global.value,"onUpdate:modelValue":i[0]||(i[0]=e=>g.value.global.value=e),placeholder:t.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),T(a(l,{icon:"pi pi-refresh",class:"p-button-text",onClick:h},null,512),[[M,"Refresh data",void 0,{top:!0}]])])])]),empty:s(()=>[ve]),loading:s(()=>[o("div",be,[a(j,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:s(()=>[a(c,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(c,{field:"id",header:t.$t("ID"),sortable:!0},{body:s(e=>[o("span",fe,d(e.data.id),1)]),_:1},8,["header"]),a(c,{header:t.$t("Parent Name"),sortable:!0},{body:s(e=>[x(d(e.data.parent.fname)+" "+d(e.data.parent.lname),1)]),_:1},8,["header"]),a(c,{header:t.$t("Child Name"),sortable:!0},{body:s(e=>[x(d(e.data.child.name),1)]),_:1},8,["header"]),a(c,{header:t.$t("Meeting Time"),sortable:!0},{body:s(e=>[x(d(ee(ne)(e.data.data.meeting_time).format("Y-MM-DD HH:mm:ss")),1)]),_:1},8,["header"]),a(c,{field:"status",header:t.$t("Status"),sortable:!0},{body:s(e=>[a(U,{"onUpdate:modelValue":[f=>B(e.data.id,f),f=>e.data.status=f],style:te({backgroundColor:e.data.status==1?"#10B981":e.data.status==-1?"#EF4444":e.data.status==0?"#F59E0B":"transparent",color:e.data.status!=null?"white":"inherit"}),modelValue:e.data.status,"option-value":"code",options:V.value,optionLabel:"name",class:"w-full md:w-10rem"},null,8,["onUpdate:modelValue","style","modelValue","options"])]),_:1},8,["header"]),a(c,{exportable:!1,"header-style":"width: 5rem","body-class":"text-center"},{body:s(e=>[o("div",_e,[T(a(l,{icon:"pi pi-trash",class:"p-button-rounded p-button-text p-button-danger",onClick:f=>P(e.data.id)},null,8,["onClick"]),[[M,"Delete",void 0,{top:!0}]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])]),a(q,{visible:p.value,"onUpdate:visible":i[3]||(i[3]=e=>p.value=e),style:{width:"450px"},header:t.$t("confirm"),modal:!0},{footer:s(()=>[a(l,{label:t.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:i[2]||(i[2]=e=>p.value=!1)},null,8,["label"]),a(l,{label:t.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:N},null,8,["label"])]),default:s(()=>[o("div",ye,[xe,o("span",null,d(t.$t("Are you sure you want to delete this meeting?")),1)])]),_:1},8,["visible","header"])])])])}}},Ce=H(we,[["__scopeId","data-v-6d7e3c73"]]);export{Ce as default};
