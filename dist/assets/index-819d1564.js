import{ah as ne,aa as ie,S as u,ab as ue,ap as de,T as re,ac as ve,r as f,ad as ce,o as d,d as v,e as s,f as o,g as r,i as D,H as me,t as n,h as w,j as c,w as O,n as p,U as Y,c as V}from"./main-21be89f2.js";import{E as R,P as W}from"./index-6ef77487.js";import{h as B}from"./moment-fbc5633a.js";const pe={class:"grid"},fe={class:"col-12"},ge={class:"card"},he={class:"my-2"},_e={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},be={class:"m-0"},we={class:"block mt-2 md:mt-0 p-input-icon-left"},ye=s("i",{class:"pi pi-search"},null,-1),$e={class:"flex align-items-center justify-content-center"},ke=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ve={key:0},xe=["onSubmit"],Ce={class:"flex flex-column gap-2"},De={class:"w-full text-right",for:"username"},Ue={key:0,class:"p-invalid text-red-600 w-full text-center"},Se={class:"flex flex-column gap-2"},Me={class:"w-full text-right",for:"username"},Fe={key:0,class:"p-invalid text-red-600 w-full text-center"},qe={class:"flex flex-column gap-2"},Te={class:"w-full text-right",for:"username "},Ye={key:0,class:"p-invalid text-red-600 w-full text-center"},Be={class:"flex flex-column gap-2"},Pe={class:"w-full text-right",for:"username"},Ie={key:0,class:"p-invalid text-red-600 w-full text-center"},Le={class:"flex flex-column gap-2"},Ne={class:"w-full text-right",for:"username"},Ee={key:0,class:"p-invalid text-red-600 w-full text-center"},He={class:"flex flex-column gap-2"},je={class:"w-full text-right",for:"username"},ze={key:0,class:"p-invalid text-red-600 w-full text-center"},Ae={class:"flex flex-column gap-2"},Oe={class:"w-full text-right",for:"username"},Re={key:0,class:"p-invalid text-red-600 w-full text-center"},We={class:"py-3"},Ze=["onSubmit"],Je={class:"flex flex-column gap-2"},Ke={class:"w-full text-right",for:"username"},Qe={key:0,class:"p-invalid text-red-600 w-full text-center"},Ge={class:"flex flex-column gap-2"},Xe={class:"w-full text-right",for:"username"},el={key:0,class:"p-invalid text-red-600 w-full text-center"},ll={class:"flex flex-column gap-2"},tl={class:"w-full text-right",for:"username "},al={key:0,class:"p-invalid text-red-600 w-full text-center"},sl={class:"flex flex-column gap-2"},ol={class:"w-full text-right",for:"username"},nl={key:0,class:"p-invalid text-red-600 w-full text-center"},il={class:"flex flex-column gap-2"},ul={class:"w-full text-right",for:"username"},dl={key:0,class:"p-invalid text-red-600 w-full text-center"},rl={class:"flex flex-column gap-2"},vl={class:"w-full text-right",for:"username"},cl={key:0,class:"p-invalid text-red-600 w-full text-center"},ml={class:"flex flex-column gap-2"},pl={class:"w-full text-right",for:"username"},fl={key:0,class:"p-invalid text-red-600 w-full text-center"},gl={class:"py-3"},yl={__name:"index",setup(hl){const{t:_}=ne(),U=ie(),e=u({long:"",lat:"",assigners:[]}),L=u(!0),N=u({});u("");const E=u(null),S=u(""),y=u(!1);u(!1);const H=u(null),M=u({}),i=u(!1),b=u(!1),$=u(!1),P=u([]);u({lat:10,lng:10});const m=u({name:"",latitude:31.984983325941823,longitude:35.900908045672196,distance:1e3});ue(()=>{le()}),de(()=>(console.log(m.value.distance),{center:{lat:m.value.latitude,lng:m.value.longitude},radius:parseInt(m.value.distance),strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}));function j(l){const t=l.latLng,h=t.lat(),g=t.lng();e.value.lat=h,e.value.long=g,console.log("Clicked coordinates:",h,g)}const F=()=>{V.get("/api/official-leaves").then(l=>{L.value=!1,E.value=l.data.data}),V.get("/api/employees").then(l=>{P.value=l.data.data})},Z=l=>{S.value=l,b.value=!b.value},J=()=>{V.delete(`/api/official-leaves/${S.value}`).then(l=>{F(),b.value=!b.value})},K=()=>{$.value=!$.value,e.value={}},Q=()=>{e.value.end=B(e.value.end).format("YYYY-MM-DD HH:mm:ss"),e.value.start=B(e.value.start).format("YYYY-MM-DD HH:mm:ss"),V.post("api/official-leaves",e.value).then(l=>{F(),$.value=!$.value,U.add({severity:"success",summary:_("success_message"),detail:`${_("element_add_success")}`,life:3e3})}).catch(l=>{U.add({severity:"error",summary:_("error"),detail:`${_("mission_error")}`,life:3e3})})},G=l=>{e.value=u({}),S.value=l,y.value=!y.value,V.get(`/api/official-leaves/${l}`).then(t=>{e.value.title=t.data.data.title,e.value.location=t.data.data.location,e.value.lat=t.data.data.lat,e.value.long=t.data.data.long,e.value.start=t.data.data.start,e.value.end=t.data.data.end,m.value.latitude=t.data.data.lat,m.value.longitude=t.data.data.long,e.value.assigners=[];for(let h=0;h<t.data.data.assigners.length;h++)e.value.assigners.push(t.data.data.assigners[h].employee_id)})},X=()=>{e.value.end=B(e.value.end).format("YYYY-MM-DD HH:mm:ss"),e.value.start=B(e.value.start).format("YYYY-MM-DD HH:mm:ss"),V.put(`api/official-leaves/${S.value}`,e.value).then(l=>{F(),y.value=!y.value,U.add({severity:"success",summary:_("success_message"),detail:`${_("element_update_success")}`,life:3e3})}).catch(l=>{U.add({severity:"error",summary:_("error"),detail:`${_("mission_error")}`,life:3e3})})};re(()=>{F()});const ee=()=>{H.value.exportCSV()},le=()=>{M.value={global:{value:null,matchMode:ve.CONTAINS}}};return(l,t)=>{const h=f("Toast"),g=f("Button"),te=f("Toolbar"),x=f("InputText"),ae=f("ProgressSpinner"),k=f("Column"),se=f("router-link"),oe=f("DataTable"),I=f("Dialog"),q=f("Calendar"),z=f("MultiSelect"),T=f("InputNumber"),C=ce("can");return d(),v("div",pe,[s("div",fe,[s("div",ge,[o(h),o(te,{class:"mb-4"},{start:r(()=>[s("div",he,[D(o(g,{label:l.$t("add_official_leaves"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:K},null,8,["label"]),[[C,"official leave create"]])])]),end:r(()=>[D(o(g,{label:l.$t("export"),icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=a=>ee(a))},null,8,["label"]),[[C,"official leave list"]])]),_:1}),D((d(),me(oe,{ref_key:"dt",ref:H,loading:L.value,value:E.value,selection:l.selectedUsers,"onUpdate:selection":t[2]||(t[2]=a=>l.selectedUsers=a),paginator:!0,rows:10,filters:M.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} users",responsiveLayout:"scroll"},{header:r(()=>[s("div",_e,[s("h5",be,n(l.$t("official_leaves")),1),s("span",we,[ye,o(x,{modelValue:M.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>M.value.global.value=a),placeholder:l.$t("search")},null,8,["modelValue","placeholder"])])])]),empty:r(()=>[w(" No official leaves found.")]),loading:r(()=>[o(ae)]),default:r(()=>[o(k,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(k,{field:"title",header:l.$t("title"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(a=>[w(n(a.data.title),1)]),_:1},8,["header"]),o(k,{field:"location",header:l.$t("location"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(a=>[w(n(a.data.location),1)]),_:1},8,["header"]),o(k,{field:"Start Date",header:l.$t("start_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(a=>[w(n(a.data.start),1)]),_:1},8,["header"]),o(k,{field:"End Date",header:l.$t("end_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:r(a=>[w(n(a.data.end),1)]),_:1},8,["header"]),o(k,{headerStyle:"min-width:10rem;"},{body:r(a=>[o(se,{to:{type:Object,required:!0},onClick:A=>l.showUser(a.data)},null,8,["onClick"]),D(o(g,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:A=>G(a.data.id)},null,8,["onClick"]),[[C,"official leave edit"]]),D(o(g,{icon:"pi pi-trash",class:"delete mt-2",onClick:A=>Z(a.data.id)},null,8,["onClick"]),[[C,"official leave delete"]])]),_:1})]),_:1},8,["loading","value","selection","filters"])),[[C,"official leave list"]]),o(I,{visible:b.value,"onUpdate:visible":t[4]||(t[4]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[o(g,{label:l.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=a=>b.value=!1)},null,8,["label"]),o(g,{label:l.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:J},null,8,["label"])]),default:r(()=>[s("div",$e,[ke,N.value?(d(),v("span",Ve,[w(n(l.$t("remove_item"))+" ",1),s("b",null,n(N.value.first_name),1),w("?")])):c("",!0)])]),_:1},8,["visible"]),o(I,{visible:$.value,"onUpdate:visible":t[13]||(t[13]=a=>$.value=a),style:{width:"550px"},header:l.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:r(()=>[s("form",{onSubmit:O(Q,["prevent"])},[s("div",Ce,[s("label",De,n(l.$t("title")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!e.value.title}]),modelValue:e.value.title,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.title=a)},null,8,["modelValue","class"]),i.value&&!e.value.title?(d(),v("small",Ue,n(l.$t("title")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",Se,[s("label",Me,n(l.$t("location")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!e.value.location}]),modelValue:e.value.location,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.location=a)},null,8,["modelValue","class"]),i.value&&!e.value.location?(d(),v("small",Fe,n(l.$t("location")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",qe,[s("label",Te,n(l.$t("start_date")),1),o(q,{showTime:"",id:"calendar-12h",hourFormat:"12",style:{width:"100%"},showButtonBar:"",modelValue:e.value.start,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.start=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!e.value.start})},null,8,["modelValue","class"]),i.value&&!e.value.start?(d(),v("small",Ye,n(l.$t("start_date")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",Be,[s("label",Pe,n(l.$t("end_date")),1),o(q,{showTime:"",id:"calendar-12h",hourFormat:"12",style:{width:"100%"},showButtonBar:"",modelValue:e.value.end,"onUpdate:modelValue":t[8]||(t[8]=a=>e.value.end=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!e.value.end})},null,8,["modelValue","class"]),i.value&&!e.value.end?(d(),v("small",Ie,n(l.$t("end_date")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",Le,[s("label",Ne,n(l.$t("Employees")),1),o(z,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:e.value.assigners,"onUpdate:modelValue":t[9]||(t[9]=a=>e.value.assigners=a),"option-value":"id",options:P.value,optionLabel:"name",class:p([{"p-invalid":i.value&&!e.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!e.value.assigners?(d(),v("small",Ee,n(l.$t("Employees")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",He,[s("label",je,n(l.$t("lat")),1),o(T,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!e.value.lat}]),modelValue:e.value.lat,"onUpdate:modelValue":t[10]||(t[10]=a=>e.value.lat=a)},null,8,["modelValue","class"]),i.value&&!e.value.lat?(d(),v("small",ze,n(l.$t("lat")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",Ae,[s("label",Oe,n(l.$t("long")),1),o(T,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!e.value.long}]),modelValue:e.value.long,"onUpdate:modelValue":t[11]||(t[11]=a=>e.value.long=a)},null,8,["modelValue","class"]),i.value&&!e.value.long?(d(),v("small",Re,n(l.$t("long")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",We,[o(Y(R),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:j,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:r(()=>[o(Y(W),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:l.$t("save"),icon:"pi pi-check ",type:"submit",class:"create",onClick:t[12]||(t[12]=a=>i.value=!0)},null,8,["label"])],40,xe)]),_:1},8,["visible","header"]),o(I,{visible:y.value,"onUpdate:visible":t[22]||(t[22]=a=>y.value=a),style:{width:"450px"},header:l.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:r(()=>[s("form",{onSubmit:O(X,["prevent"])},[s("div",Je,[s("label",Ke,n(l.$t("title")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!e.value.title}]),modelValue:e.value.title,"onUpdate:modelValue":t[14]||(t[14]=a=>e.value.title=a)},null,8,["modelValue","class"]),i.value&&!e.value.title?(d(),v("small",Qe,n(l.$t("title")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",Ge,[s("label",Xe,n(l.$t("location")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!e.value.location}]),modelValue:e.value.location,"onUpdate:modelValue":t[15]||(t[15]=a=>e.value.location=a)},null,8,["modelValue","class"]),i.value&&!e.value.location?(d(),v("small",el,n(l.$t("location")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",ll,[s("label",tl,n(l.$t("start_date")),1),o(q,{showTime:"",id:"calendar-12h",hourFormat:"12",style:{width:"100%"},showButtonBar:"",modelValue:e.value.start,"onUpdate:modelValue":t[16]||(t[16]=a=>e.value.start=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!e.value.start})},null,8,["modelValue","class"]),i.value&&!e.value.start?(d(),v("small",al,n(l.$t("start_date")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",sl,[s("label",ol,n(l.$t("end_date")),1),o(q,{showTime:"",id:"calendar-12h",hourFormat:"12",style:{width:"100%"},showButtonBar:"",modelValue:e.value.end,"onUpdate:modelValue":t[17]||(t[17]=a=>e.value.end=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!e.value.end})},null,8,["modelValue","class"]),i.value&&!e.value.end?(d(),v("small",nl,n(l.$t("end_date")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",il,[s("label",ul,n(l.$t("Employees")),1),o(z,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:e.value.assigners,"onUpdate:modelValue":t[18]||(t[18]=a=>e.value.assigners=a),"option-value":"id",options:P.value,optionLabel:"name",class:p([{"p-invalid":i.value&&!e.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!e.value.assigners?(d(),v("small",dl,n(l.$t("Employees")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",rl,[s("label",vl,n(l.$t("lat")),1),o(T,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!e.value.lat}]),modelValue:e.value.lat,"onUpdate:modelValue":t[19]||(t[19]=a=>e.value.lat=a)},null,8,["modelValue","class"]),i.value&&!e.value.lat?(d(),v("small",cl,n(l.$t("lat")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",ml,[s("label",pl,n(l.$t("long")),1),o(T,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!e.value.long}]),modelValue:e.value.long,"onUpdate:modelValue":t[20]||(t[20]=a=>e.value.long=a)},null,8,["modelValue","class"]),i.value&&!e.value.long?(d(),v("small",fl,n(l.$t("long")+" "+l.$t("required"))+".",1)):c("",!0)]),s("div",gl,[o(Y(R),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:j,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:r(()=>[o(Y(W),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:l.$t("save"),icon:"pi pi-check ",type:"submit",class:"create",onClick:t[21]||(t[21]=a=>i.value=!0)},null,8,["label"])],40,Ze)]),_:1},8,["visible","header"])])]),o(h)])}}};export{yl as default};
