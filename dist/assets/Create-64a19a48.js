import{a9 as I,Q as N,R as l,aa as R,S as U,ab as O,r as w,o as d,d as u,e,f as r,w as _,E as P,t as i,G as q,T as z,h as G,F as y,B as C,X as H,c as k}from"./main-e5551934.js";import"./editor.esm-11b3b755.js";import{g as Q}from"./flowbite-vue-0fefc1da.js";import{V as X}from"./VTextarea-be789721.js";const Z={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},j={class:"col-12"},J=["onSubmit"],K={class:"flex flex-column gap-2 py-1 w-[50%]"},W={class:"flex"},Y={class:"text-right"},ee=e("svg",{class:"my-auto mx-1",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1),se={class:"flex flex-column mx-2 items-stretch"},te={class:"text-right invisible"},le={class:"grid md:grid-cols-3 lg:grid-cols-4 grid-cols-1"},ae={class:"flex items-center"},oe={class:"mx-2 font-bold text-lg text-slate-800"},ne=["checked","onChange"],ie=["checked","onChange"],ce=["onClick"],de={class:""},ue={class:"flex flex-column gap-2"},re={class:"w-full text-right",for:"username"},_e={__name:"Create",setup(me){I();const L=N(),x=l(!1),V=l(!0),$=l({}),p=l(""),g=l(null),m=l(!1),v=l({});l(""),l(null),l(null);const S=l({});l(!1),l({}),l(!1);const a=l([]);R(()=>{A()});const M=()=>{k.get("/api/permissions").then(s=>{V.value=!1,g.value=s.data.permissions})},T=(s,t)=>{const h=t.map(c=>c.id);b(t)?a.value=a.value.filter(c=>!h.includes(c)):a.value=[...new Set([...a.value,...h])]},b=s=>s.every(t=>a.value.includes(t.id)),B=()=>{k.post("/api/roles/create",{permissions:a.value,name:v.value.name}).then(s=>{L.push({name:"Roles"})})};U(()=>{M()});const D=s=>{m.value=!m.value,p.value=s.description,$.value=s},A=()=>{S.value={global:{value:null,matchMode:O.CONTAINS}}},E=s=>{const t=a.value.indexOf(s);t===-1?a.value.push(s):a.value.splice(t,1),console.log(a.value)};return(s,t)=>{const h=w("InputText"),c=w("Dialog");return d(),u("div",Z,[e("div",j,[r(H,{class:"card shadow-md"},{default:_(()=>[e("form",{class:"flex",onSubmit:P(B,["prevent"])},[e("div",K,[e("div",W,[e("label",Y,i(s.$t("اسم الرول")),1),ee]),r(h,{class:q(["bg-[#f7f5f5] text-center",{"p-invalid":x.value&&!v.value.name}]),modelValue:v.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>v.value.name=o),required:""},null,8,["modelValue","class"])]),e("div",se,[e("label",te,i(s.$t("اسم الرول")),1),r(z(Q),{type:"submit",onClick:t[1]||(t[1]=o=>x.value=!0),class:"create my-auto"},{default:_(()=>[G(i(s.$t("submit")),1)]),_:1})])],40,J),e("div",le,[(d(!0),u(y,null,C(g.value,(o,f)=>(d(),u("div",{class:"p-4",key:f},[e("div",ae,[e("h3",oe,i(f),1),e("input",{type:"checkbox",class:"border my-auto mx-2",checked:b(o),onChange:n=>T(f,o)},null,40,ne)]),(d(!0),u(y,null,C(o,n=>(d(),u("div",{class:"flex py-[1px]",key:n.id},[e("input",{class:"border my-auto mx-2",type:"checkbox",checked:a.value.includes(n.id),onChange:F=>E(n.id)},null,40,ie),e("p",null,i(n.name),1),e("i",{onClick:F=>D(n),class:"pi pi-arrow-left px-4 my-auto text-base text-[#135C65]"},null,8,ce)]))),128))]))),128))]),r(c,{visible:m.value,"onUpdate:visible":t[3]||(t[3]=o=>m.value=o),style:{width:"550px"},header:s.$t("submit"),modal:!0},{default:_(()=>[e("div",de,[e("div",ue,[e("label",re,i(s.$t("description")),1),r(X,{disabled:"",readonly:"true","bg-color":"#EAE8E9",rows:"3",modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o)},null,8,["modelValue"])])])]),_:1},8,["visible","header"])]),_:1})])])}}};export{_e as default};
