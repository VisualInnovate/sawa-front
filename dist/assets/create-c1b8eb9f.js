import{_ as g,c as u,r,o as m,d as p,f as i,g as V,e as s,t as n,n as d,j as w,F as b,x,w as C,a0 as k}from"./main-fbaa623a.js";const q={data(){return{submitted:!1,selectedOption:"",employee_id:"",maxvalue:"",quantity:"",balance:[],options:[],employees:[],error:{}}},methods:{getallsetup(){u.get("api/leave-setup").then(e=>{this.options=e.data.data})},getallemployees(){u.get("api/employees/get/no-balance").then(e=>{this.employees=e.data})},deleteitem(e){this.balance.splice(e,1)},getmaxvalue(e){this.quantity="",u.get(`api/leave-setup/${e.id}`).then(l=>{this.maxvalue=l.data.data.days?l.data.data.days:l.data.data.hours})},addItem(){this.selectedOption&&this.quantity>0&&(this.balance.push({id:this.selectedOption.id,title:this.selectedOption.title,value:this.quantity}),this.selectedOption="",this.value=1)},submite(){this.error={},u.post("api/leave-balance",{employee_id:this.employee_id,balance:this.balance}).then(e=>{this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_add_success")}`,life:3e3})}).catch(e=>{this.error=e.response.data.errors,this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${e.response.data.message}`,life:3e3})})}},computed:{filteredDays(){const e=this.balance.map(l=>l.id);return this.options.filter(l=>!e.includes(l.id))}},mounted(){this.getallsetup(),this.getallemployees()}},O={for:"username"},I={key:0,class:"mt-1 mb-5 text-red-500"};function B(e,l,D,N,t,o){const y=r("Dropdown"),c=r("Button"),f=r("InputNumber"),v=r("Toast");return m(),p(b,null,[i(k,{class:"p-[2%] bg-slate-50 shadow-xl gap-4"},{default:V(()=>{var h;return[s("div",{class:d([{"animate__animated animate__bounce animate__delay-0s":t.error.employee_id},"flex flex-column gap-2 md:w-[50%] py-[2%]"])},[s("label",O,n(e.$t("employee_name")),1),i(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.employee_id,"onUpdate:modelValue":l[0]||(l[0]=a=>t.employee_id=a),"option-value":"id",options:t.employees,optionLabel:"name",placeholder:e.$t("employee_name"),class:d(["w-full bg-[#f7f5f5]",{"p-invalid":t.submitted&&!t.employee_id}])},null,8,["modelValue","options","placeholder","class"]),(h=t.error)!=null&&h.shift_id?(m(),p("div",I,n(t.error.shift_id[0]),1)):w("",!0)],2),s("form",{onSubmit:l[5]||(l[5]=C((...a)=>o.addItem&&o.addItem(...a),["prevent"]))},[s("table",{class:d([{"animate__animated animate__bounce animate__delay-0s":t.error.balance},"item-table w-[70%]"])},[s("thead",null,[s("tr",null,[s("th",null,n(e.$t("holiday_type")),1),s("th",null,n(e.$t("amount")),1)])]),s("tbody",null,[(m(!0),p(b,null,x(t.balance,(a,_)=>(m(),p("tr",{key:_},[s("td",null,n(a.title),1),s("td",null,n(a.value),1),s("td",null,[i(c,{onClick:L=>o.deleteitem(_),icon:"pi pi-trash",class:"p-button-rounded delete p-button-success m-auto"},null,8,["onClick"])])]))),128)),s("tr",null,[s("td",null,[i(y,{"onUpdate:modelValue":[l[1]||(l[1]=a=>o.getmaxvalue(a)),l[2]||(l[2]=a=>t.selectedOption=a)],style:{direction:"ltr !important"},modelValue:t.selectedOption,options:o.filteredDays,optionLabel:"title",placeholder:e.$t("holiday_type"),class:d(["w-full",{"p-invalid":t.submitted&&!t.selectedOption}])},null,8,["modelValue","options","placeholder","class"])]),s("td",null,[i(f,{class:d(["w-full",{"p-invalid":t.submitted&&!t.quantity}]),modelValue:t.quantity,"onUpdate:modelValue":l[3]||(l[3]=a=>t.quantity=a),placeholder:e.$t("max_value")+"="+t.maxvalue,max:t.maxvalue},null,8,["modelValue","placeholder","max","class"])]),s("td",null,[i(c,{onClick:l[4]||(l[4]=a=>t.submitted=!0),type:"submit",required:"",class:"create m-auto s",icon:"pi pi-plus"})])])])],2)],32),i(c,{onClick:o.submite,type:"submit",class:"create m-auto w-32 my-4",label:e.$t("submit")},null,8,["onClick","label"])]}),_:1}),i(v)],64)}const F=g(q,[["render",B]]);export{F as default};
