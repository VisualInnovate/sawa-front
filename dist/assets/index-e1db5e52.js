import{_ as he}from"./Ellipse2-b0842d90.js";import{_ as _e,m as be,a2 as ge,q as p,l as ye,u as xe,ak as we,a3 as ke,al as $e,r as f,am as le,o as d,d as r,e as a,f as s,g as m,t as o,i as b,L as Ve,h as w,j as c,c as g,y as Ce,z as Se}from"./main-cc752e98.js";const P=k=>(Ce("data-v-950b9c8a"),k=k(),Se(),k),De={class:"grid"},Ue={class:"col-12"},Le={class:"card p-4 shadow-2 border-round"},Te={class:"text-2xl font-bold"},Ie={class:"card shadow-1 surface-0"},Pe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},Be={class:"flex gap-2"},Ne={class:"p-input-icon-left"},qe=P(()=>a("i",{class:"pi pi-search"},null,-1)),Re={class:"font-medium"},Me={class:"flex gap-2"},Ee=P(()=>a("div",{class:"text-center py-4"},[a("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),a("p",{class:"text-xl"},"No records found")],-1)),Fe={class:"flex justify-content-center align-items-center py-4"},je={class:"flex align-items-center justify-content-center"},Ae=P(()=>a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ze={key:0},Ge={class:""},Oe=["src"],We={key:1,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:he},He={key:2,class:"mt-1 mb-5 text-red-500"},Je={class:"flex flex-column gap-2 py-1"},Ke={class:"w-full text-right",for:"username"},Qe={key:0,class:"mt-1 mb-5 text-red-500"},Xe={class:"flex flex-column gap-2 py-1"},Ye={class:"w-full text-right",for:"username"},Ze={key:0,class:"mt-1 mb-5 text-red-500"},et={key:0,class:"flex flex-column gap-2"},tt={class:"w-full text-right",for:"username"},lt={key:0,class:"mt-1 mb-5 text-red-500"},at={key:1,class:"flex flex-column gap-2"},st={class:"w-full text-right",for:"username"},ot={key:0,class:"mt-1 mb-5 text-red-500"},it={key:2,class:"flex flex-column gap-2"},nt={class:"w-full text-right",for:"username"},dt={key:0,class:"mt-1 mb-5 text-red-500"},rt={class:"flex flex-column gap-2 py-1"},ut={class:"w-full text-right",for:"username"},pt={key:0,class:"mt-1 mb-5 text-red-500"},ct={class:"flex flex-column gap-2 py-1"},mt={class:"w-full text-right",for:"username"},vt={key:0,class:"mt-1 mb-5 text-red-500"},ft={class:"flex flex-column gap-2 py-1"},ht={class:"w-full text-right",for:"username"},_t={key:0,class:"mt-1 mb-5 text-red-500"},bt={class:"flex flex-column gap-2 py-1"},gt={class:"w-full text-right",for:"username"},yt={key:0,class:"mt-1 mb-5 text-red-500"},xt={class:"flex-column gap-2 py-1 hidden"},wt={class:"w-full text-right",for:"username"},kt={key:0,class:"mt-1 mb-5 text-red-500"},$t={class:"w-full text-center"},Vt={__name:"index",setup(k){const B=be(),N=ge(),t=p({skills:[],department:[]}),{t:L}=ye(),q=p([]),R=p([]),ae=()=>[{name:L("driver"),id:1},{name:L("doctor"),id:2},{name:L("Evaluator"),id:5}],se=xe("doctor_id",Number),M=p({}),$=p(!0),E=p({}),n=p(""),F=p(null);p(!1);const y=p(!1),j=p(""),A=p(null),z=p(null),V=p({}),C=p(!1),G=p(!1);we(()=>{ce()});const S=()=>{$.value=!0,g.get("/api/doctors").then(e=>{F.value=e.data.doctors,$.value=!1}),g.post("/api/roles").then(e=>{$.value=!1,q.value=e.data.roles.data}),g.get("/api/skills").then(e=>{R.value=e.data.data}),g.get("/api/department").then(e=>{M.value=e.data.data})},oe=e=>{se.value=e,N.push({name:"doctors-show"})};ke(()=>{S()});const ie=e=>{N.push({name:"Employee-update",params:{id:e}})},ne=e=>{y.value=!0,j.value=e},de=e=>{const l=e.target.files[0],v=new FileReader;v.readAsDataURL(l),v.onload=T=>{t.value.image=T.target.result,t.value.file=l}},re=()=>{const e=new FormData;e.append("name",t.value.name),e.append("email",t.value.email),e.append("title",t.value.title),e.append("password",t.value.password),e.append("image",t.value.file),e.append("role",t.value.role),t.value.spotter&&e.append("spotter",t.value.spotter),t.value.skills&&e.append("skills",t.value.skills),t.value.department&&e.append("department_id",t.value.department),e.append("type",t.value.type),g.post("/api/users/create",e).then(l=>{S(),C.value=!C.value,B.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=p({})}).catch(l=>{n.value=l.response.data.errors})},ue=()=>{g.delete(`/api/users/${j.value}/delete`).then(e=>{y.value=!1,S(),B.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},pe=()=>{z.value.exportCSV()},ce=()=>{V.value={global:{value:null,matchMode:$e.CONTAINS}}};return(e,l)=>{const v=f("Button"),T=f("Toolbar"),me=f("Toast"),h=f("InputText"),_=f("Column"),ve=f("ProgressSpinner"),fe=f("DataTable"),I=f("Dialog"),O=f("Dropdown"),W=f("MultiSelect"),D=le("can"),U=le("tooltip");return d(),r("div",De,[a("div",Ue,[a("div",Le,[s(T,{class:"mb-4"},{start:m(()=>[a("h2",Te,o(e.$t("doctors")),1)]),end:m(()=>[b(s(v,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",onClick:pe},null,8,["label"]),[[D,"doctor list"]])]),_:1}),s(me),a("div",Ie,[b((d(),Ve(fe,{ref_key:"dt",ref:z,selection:A.value,"onUpdate:selection":l[2]||(l[2]=i=>A.value=i),value:F.value,loading:$.value,"data-key":"id",paginator:!0,rows:10,filters:V.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:m(()=>[a("div",Pe,[a("div",Be,[a("span",Ne,[qe,s(h,{modelValue:V.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=i=>V.value.global.value=i),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),b(s(v,{icon:"pi pi-refresh",class:"p-button-text",onClick:l[1]||(l[1]=i=>S())},null,512),[[U,"Refresh data",void 0,{top:!0}]])])])]),empty:m(()=>[Ee]),loading:m(()=>[a("div",Fe,[s(ve,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:m(()=>[s(_,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(_,{field:"index",header:e.$t("index"),sortable:!0},{body:m(i=>[w(o(i.data.id),1)]),_:1},8,["header"]),s(_,{field:"name",header:e.$t("name"),sortable:!0},{body:m(i=>[a("span",Re,o(i.data.name),1)]),_:1},8,["header"]),s(_,{field:"email",header:e.$t("email"),sortable:!0},{body:m(i=>[w(o(i.data.email),1)]),_:1},8,["header"]),s(_,{field:"title",header:e.$t("title"),sortable:!0},{body:m(i=>[w(o(i.data.title),1)]),_:1},8,["header"]),s(_,{"header-style":"min-width:10rem;",class:"no-print"},{body:m(i=>[a("div",Me,[b(s(v,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:x=>ie(i.data.id)},null,8,["onClick"]),[[D,"user edit"],[U,"Edit",void 0,{top:!0}]]),b(s(v,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:x=>ne(i.data.id)},null,8,["onClick"]),[[D,"user create"],[U,"Delete",void 0,{top:!0}]]),b(s(v,{icon:"pi pi-user",class:"p-button-rounded p-button-info",onClick:x=>oe(i.data.id)},null,8,["onClick"]),[[U,"View Details",void 0,{top:!0}]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[D,"doctor list"]])]),s(I,{visible:y.value,"onUpdate:visible":l[4]||(l[4]=i=>y.value=i),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:m(()=>[s(v,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=i=>y.value=!1)},null,8,["label"]),s(v,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:ue},null,8,["label"])]),default:m(()=>[a("div",je,[Ae,E.value?(d(),r("span",ze,[w(o(e.$t("remove_item"))+" ",1),a("b",null,o(E.value.first_name),1),w("? ")])):c("",!0)])]),_:1},8,["visible","header"]),s(I,{visible:C.value,"onUpdate:visible":l[14]||(l[14]=i=>C.value=i),style:{width:"450px"},header:e.$t("users"),modal:!0},{default:m(()=>{var i,x,H,J,K,Q,X,Y,Z,ee,te;return[a("div",Ge,[a("div",null,[t.value.image?(d(),r("img",{key:0,onclick:"document.getElementById('filr').click()",class:"m-auto rounded-full",style:{width:"150px",height:"150px"},src:"https://sawa.sawa.academy/"+t.value.image},null,8,Oe)):(d(),r("img",We)),(i=n.value)!=null&&i.image?(d(),r("div",He,o(n.value.image[0]),1)):c("",!0)])]),a("div",Je,[a("label",Ke,o(e.$t("name")),1),s(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.name,"onUpdate:modelValue":l[5]||(l[5]=u=>t.value.name=u),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(x=n.value)!=null&&x.name?(d(),r("div",Qe,o(n.value.name[0]),1)):c("",!0)]),a("div",Xe,[a("label",Ye,o(e.$t("type")),1),s(O,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:t.value.type,"onUpdate:modelValue":l[6]||(l[6]=u=>t.value.type=u),"option-value":"id",filter:"",options:ae(),optionLabel:"name",placeholder:e.$t("type"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(H=n.value)!=null&&H.type?(d(),r("div",Ze,o(n.value.type[0]),1)):c("",!0)]),t.value.type==0||t.value.type==2?(d(),r("div",et,[a("label",tt,o(e.$t("skill_name")),1),s(W,{modelValue:t.value.skills,"onUpdate:modelValue":l[7]||(l[7]=u=>t.value.skills=u),filter:"","option-value":"id",options:R.value,optionLabel:"name",placeholder:e.$t("skill_name"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(J=n.value)!=null&&J.permissions?(d(),r("div",lt,o(n.value.permissions[0]),1)):c("",!0)])):c("",!0),t.value.type==0||t.value.type==2?(d(),r("div",at,[a("label",st,o(e.$t("department")),1),s(W,{modelValue:t.value.department,"onUpdate:modelValue":l[8]||(l[8]=u=>t.value.department=u),filter:"","option-value":"id",options:M.value,optionLabel:"title",placeholder:e.$t("department"),class:"w-full bg-[#f7f5f5] md:w-20rem"},null,8,["modelValue","options","placeholder"]),(K=n.value)!=null&&K.permissions?(d(),r("div",ot,o(n.value.permissions[0]),1)):c("",!0)])):c("",!0),t.value.type==0||t.value.type==2?(d(),r("div",it,[a("label",nt,o(e.$t("Spotter")),1),s(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.spotter,"onUpdate:modelValue":l[9]||(l[9]=u=>t.value.spotter=u),placeholder:e.$t("Spotter")},null,8,["modelValue","placeholder"]),(Q=n.value)!=null&&Q.permissions?(d(),r("div",dt,o(n.value.permissions[0]),1)):c("",!0)])):c("",!0),a("div",rt,[a("label",ut,o(e.$t("email")),1),s(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.email,"onUpdate:modelValue":l[10]||(l[10]=u=>t.value.email=u),placeholder:e.$t("email")},null,8,["modelValue","placeholder"]),(X=n.value)!=null&&X.email?(d(),r("div",pt,o(n.value.email[0]),1)):c("",!0)]),a("div",ct,[a("label",mt,o(e.$t("title")),1),s(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.title,"onUpdate:modelValue":l[11]||(l[11]=u=>t.value.title=u),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(Y=n.value)!=null&&Y.title?(d(),r("div",vt,o(n.value.title[0]),1)):c("",!0)]),a("div",ft,[a("label",ht,o(e.$t("password")),1),s(h,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:t.value.password,"onUpdate:modelValue":l[12]||(l[12]=u=>t.value.password=u),placeholder:e.$t("password")},null,8,["modelValue","placeholder"]),(Z=n.value)!=null&&Z.password?(d(),r("div",_t,o(n.value.password[0]),1)):c("",!0)]),a("div",bt,[a("label",gt,o(e.$t("roles")),1),s(O,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:t.value.role,"onUpdate:modelValue":l[13]||(l[13]=u=>t.value.role=u),"option-value":"id",filter:"",options:q.value,optionLabel:"name",placeholder:e.$t("roles"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(ee=n.value)!=null&&ee.role?(d(),r("div",yt,o(n.value.role[0]),1)):c("",!0)]),a("div",xt,[a("label",wt,o(e.$t("personal_image")),1),s(h,{name:"file",ref:"file",onChange:de,accept:"image/*",id:"filr",type:"file",class:"w-full"},null,512),(te=n.value)!=null&&te.image?(d(),r("div",kt,o(n.value.image[0]),1)):c("",!0)]),a("div",$t,[s(v,{onClick:re,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),s(I,{visible:G.value,"onUpdate:visible":l[15]||(l[15]=i=>G.value=i),style:{width:"450px"},header:e.$t("submit"),modal:!0},null,8,["visible","header"])])])])}}},Dt=_e(Vt,[["__scopeId","data-v-950b9c8a"]]);export{Dt as default};
