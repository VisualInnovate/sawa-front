import{_ as E,H as L,a9 as U,b5 as B,T as x,z as a,E as h,l as g,o as r,e as n,h as i,t as o,q as u,x as l,y as m,X as V,a4 as j,i as y,a1 as N,a6 as I,$ as q,n as R,F as Y,B as A,f as G,Q as O,R as P}from"./main-89cf62a0.js";import{F as H,i as W,a as z,b as K,c as Q,l as k}from"./ar-01c02210.js";import{V as X}from"./VDialog-267c6b68.js";import{V as J}from"./VForm-2d8d576c.js";const Z={components:{FullCalendar:H,Calendar:L},data(){return{doctors:{},admin_id:"",deleteDialog:!1,setiontype:"",programes:{},child:{},rooms:{},error:{},doctors:{},isSubmitting:!1,programe_type:{},toast:U(),room_id:"",slot_id:"",student:{},capasityboj:{},capasity:[],maxcapsity:"",treaments:{},time_sloteobj:{},time_slots:[],time_slotename:[],buttomaddcal:!0,timeshow:!1,FullCalendarshow:!1,langStore:B(),visible:!1,create_visible:!1,event_id:null,creat_event:x(!1),updat_event:x(!1),event_title:"",start_event:"",end_event:"",loading:!1,modal_text:"",time_start:"",time_end:"",opts:{plugins:[W,z,K,Q],initialView:"dayGridMonth",footerToolbar:!0,valid:!1,buttonIcons:!1,locale:null,validRange:{start:new Date},selectable:!0,droppable:!1,editable:!0,selectHelper:!0,validRange:{start:new Date},headerToolbar:{center:"prev next today",left:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},eventsTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit"},eventDrop:function(e){console.log(e.event.id),a.post(`/api/calender/${e.event.id}/update`,{start:e.event.start,end:e.event.end}).then(t=>{console.log(t.data.k)})},eventDrop:function(e){a.post(`/api/calender/${e.event.id}/update`,{title:e.event.title,start:h(e.event.start).format("00:00:00 YYYY-MM-d"),end:h(e.event.end).format("00:00:00 YYYY-MM-d")}).then(t=>{console.log(t.data.k)})},eventClick:(function(e){this.event_id=e.event.id,this.event_title=e.event.title,this.modal_text=this.$t("update_event"),this.creat_event=!1,this.updat_event=!0,this.handleEventClick(e),this.time_slotename.push(e.event.title),console.log(this.time_slotename),this.start_event=h(e.event.start).format("YYYY-MM-DD"),this.end_event=h(e.event.end).format("YYYY-MM-DD"),console.log(this.start_event)}).bind(this),select:(function(e){console.log(e),this.event_title="",this.modal_text=this.$t("create_event"),this.creat_event=!0,this.updat_event=!1,this.visible=!0,console.log(e),this.start_event=h(e.start).format("YYYY-MM-DD"),this.end_event=h(e.end).format("YYYY-MM-DD"),console.log(e.backgroundColor)}).bind(this)}}},methods:{getAllDocto(){a.get("api/doctors").then(e=>{this.doctors=e.data.doctors,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},handleEventClick(e){this.deleteDialog=!this.deleteDialog,console.log(e);const t=e.event;console.log(t),t.setProp("backgroundColor","green"),t.setProp("visibility","hidden")},Therapeutic(){this.$router.push({name:"student-programe"})},programetype(){return this.roomType=[{name:this.$t("diurnal"),value:0},{name:this.$t("Clinics"),value:1},{name:this.$t("house"),value:2}]},deletearray(){this.capasity.length=this.capasity.length-1},addarray(){a.get(`/api/treatment/${this.student.Type}`).then(e=>{this.capasityboj={treatment_id:this.student.Type,sessions_number:this.student.sessions_number,name:e.data.data.name},this.capasity.push(this.capasityboj),this.maxcapsity=this.maxcapsity-this.student.sessions_number,this.student.sessions_number=""}),console.log(this.capasity)},getprograme(e){this.capasity=[],this.student.sessions_number="",a.get(`/api/program/${this.student.program_id}`).then(t=>{this.maxcapsity=t.data.data.individual_sessions,this.setiontype=t.data.data.session_type}),a.get(`api/users/filter/${e}`).then(t=>{this.doctors=t.data.data})},getalltreatement(){a.get("api/treatment/all").then(e=>{this.treaments=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},getallchild(){a.get("api/child").then(e=>{this.child=e.data.children,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},pushtimeslot(e){console.log(e),this.time_sloteobj={time_slot_id:this.event_id,doctor_id:e}},addtimedoctor(){console.log(this.time_sloteobj),this.time_slots.push(this.time_sloteobj),this.deleteDialog=!this.deleteDialog},cansel(){this.pushtimeslot(),this.addtimedoctor()},getallprogrames(){a.get("api/program").then(e=>{this.programes=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},createtreatment(){a.post("/api/student-program",{program_id:this.student.program_id,student_id:this.student.student_id,details:this.capasity,time_slots:this.time_slots}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3})}).catch(e=>{this.timeshow=!this.timeshow,console.log(e.response.data.errors.name),this.error=e.response.data.errors})},closeSuccessModal(){this.isSuccessModalOpen=!1},highlightSelectedDay(e){this.$store.state.calendar.selectedDay===e.dateStr&&e.el.classList.add("selected-day")},loo(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=k},goBack(){this.$router.go(-1)},deletevent(e){console.log(e),a.delete(`/api/calender/${this.event_id}/delete`).then(t=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.loading=!1},700)},updateevent(){a.post(`/api/calender/${this.event_id}/update`,{title:this.event_title,start:h(this.start_event).format(" YYYY-MM-d"),end:h(this.end_event).format(" YYYY-MM-d")}).then(e=>{}),setTimeout(()=>{this.visible=!1,this.event_title=null,this.event_id=null,this.loading=!1},700)},createvent(){this.loading=!0,a.post("/api/slot",{title:this.event_title,date:this.start_event,from:this.time_start,to:this.time_end,room_id:this.room_id}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3}),this.visible=!1,e.status!=200&&(this.valid=!0)}).catch(e=>{this.error=e.response.data.errors}),setTimeout(()=>{this.update(),this.event_title=null,this.start_event=null,this.end_event=null,this.create_visible=!1,this.loading=!1},2e3)},update(){a.get("/api/slot/student-program").then(e=>{console.log(e.data.data),this.opts.events=e.data.data.map(t=>({title:t.start_event+"T"+t.to,start:t.start_event+"T"+t.from,end:t.end_event+"T"+t.to,id:t.id,from:t.from}))})},refreshEvents(){this.$refs.calendar.$emit("refetch-events")}},mounted(){this.update(),this.getallprogrames(),this.getallchild(),this.getalltreatement(),localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=k,console.log(localStorage.appLang),console.log(this.opts)},watch:{"langStore.appLang"(e){e=="en"?this.opts.locale="":this.opts.locale=k,this.update()}}},w=e=>(O("data-v-49932ab1"),e=e(),P(),e),$={key:0,class:"loader"},ee={class:"flex flex-column gap-2"},te={for:"username"},se={key:0,class:"mt-1 mb-5 text-red-500"},oe={class:"flex flex-column gap-2"},le={for:"username"},ie={key:0,class:"mt-1 mb-5 text-red-500"},ae={key:0,class:"flex flex-column gap-2"},re={for:"username"},ne={key:0,class:"mt-1 mb-5 text-red-500"},de={key:1,class:"flex flex-column gap-2"},ce={for:"username"},ue={class:"flex"},me={key:0,class:"mt-1 mb-5 text-red-500"},pe={class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-1 gap-4"},he={class:"px-[2%] py-1 flex"},_e={class:"px-4"},ge={key:0,class:"mt-1 mb-5 text-red-500"},fe=w(()=>i("div",{class:"card flex justify-content-center"},null,-1)),ve={class:"flex flex-column gap-2 w-full"},be=w(()=>i("small",{id:"username-help"},null,-1)),ye={class:"flex flex-column gap-2"},ke={for:"username"},De={key:0,class:"mt-1 mb-5 text-red-500"};function Ce(e,t,xe,Ve,s,d){const b=g("Dropdown"),S=g("InputNumber"),f=g("Button"),M=g("Toast"),T=g("FullCalendar"),F=g("Dialog");return r(),n(Y,null,[i("div",null,[i("div",null,[i("p",{class:"text-xl p-4 text-[#135C65] cursor-pointer font-bold",onClick:t[0]||(t[0]=p=>d.Therapeutic())},o(e.$t("add_sp")),1)]),s.loading?(r(),n("div",$)):u("",!0)]),l(V,null,{default:m(()=>{var p;return[i("div",null,[l(X,{modelValue:e.isSuccessModalOpen,"onUpdate:modelValue":t[1]||(t[1]=c=>e.isSuccessModalOpen=c),"max-width":"400px"},{default:m(()=>[l(V,null,{default:m(()=>[l(j,null,{default:m(()=>[y(o(e.$t("Success!")),1)]),_:1}),l(N,null,{default:m(()=>[y(o(e.$t("Data seeded successfully!")),1)]),_:1}),l(I,null,{default:m(()=>[l(q,{onClick:d.closeSuccessModal,color:"success"},{default:m(()=>[y(o(e.$t("OK")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(J,{class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-2 gap-4",ref:"myForm",onSubmit:R(e.seedData,["prevent"])},{default:m(()=>{var c,v,D,C;return[i("div",ee,[i("label",te,o(e.$t("ProgramName")),1),l(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.program_id,"onUpdate:modelValue":[t[2]||(t[2]=_=>s.student.program_id=_),d.getprograme],"option-value":"id",filter:"",options:s.programes,optionLabel:"name",placeholder:e.$t("ProgramName"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(c=s.error)!=null&&c.program_id?(r(),n("div",se,o(s.error.program_id[0]),1)):u("",!0)]),i("div",oe,[i("label",le,o(e.$t("child_name")),1),l(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.student_id,"onUpdate:modelValue":[t[3]||(t[3]=_=>s.student.student_id=_),e.getAllDoctor],"option-value":"id",filter:"",options:s.child,optionLabel:"name",placeholder:e.$t("child_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(v=s.error)!=null&&v.student_id?(r(),n("div",ie,o(s.error.student_id[0]),1)):u("",!0)]),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",ae,[i("label",re,o(e.$t("Typetreatment"))+"-",1),l(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.Type,"onUpdate:modelValue":t[4]||(t[4]=_=>s.student.Type=_),"option-value":"id",filter:"",options:s.treaments,optionLabel:"name",placeholder:e.$t("Typetreatment"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(D=s.error)!=null&&D.details?(r(),n("div",ne,o(s.error.details[0]),1)):u("",!0)])):u("",!0),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",de,[i("label",ce,o(e.$t("Sn"))+" ("+o(s.maxcapsity)+")",1),i("div",ue,[l(S,{max:s.maxcapsity,min:1,required:"",class:"bg-[#f7f5f5] w-[90%]",modelValue:s.student.sessions_number,"onUpdate:modelValue":t[5]||(t[5]=_=>s.student.sessions_number=_),placeholder:e.$t("Sn")},null,8,["max","modelValue","placeholder"]),l(f,{onClick:d.addarray,class:"create m-auto s",icon:"pi pi-plus"},null,8,["onClick"]),l(f,{onClick:d.deletearray,class:"delete m-auto s",icon:"pi pi-minus"},null,8,["onClick"])]),(C=s.error)!=null&&C.details?(r(),n("div",me,o(s.error.details[0]),1)):u("",!0)])):u("",!0)]}),_:1},8,["onSubmit"]),i("div",pe,[i("div",he,[i("ol",null,[(r(!0),n(Y,null,A(s.capasity,(c,v)=>(r(),n("li",{key:v},o(v+1)+" - "+o(c.name)+" - "+o(e.$t("Sn"))+" - "+o(c.sessions_number),1))),128))])])]),l(M),i("div",_e,[l(T,{options:s.opts,onChange:t[6]||(t[6]=c=>d.refreshEvents()),ref:"fullCalendar",dayRender:d.highlightSelectedDay},null,8,["options","dayRender"]),(p=s.error)!=null&&p.time_slots?(r(),n("div",ge,o(s.error.time_slots[0]),1)):u("",!0),fe,i("div",ve,[s.buttomaddcal?(r(),G(f,{key:0,onClick:d.createtreatment,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])):u("",!0),be])])])]}),_:1}),l(F,{visible:s.deleteDialog,"onUpdate:visible":t[8]||(t[8]=p=>s.deleteDialog=p),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:m(()=>{var p;return[i("div",ye,[i("label",ke,o(e.$t("doctor")),1),l(b,{"onUpdate:modelValue":[d.pushtimeslot,t[7]||(t[7]=c=>s.admin_id=c)],required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.admin_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",placeholder:e.$t("doctor"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["onUpdate:modelValue","modelValue","options","placeholder"]),(p=s.error)!=null&&p.admin_id?(r(),n("div",De,o(s.error.admin_id[0]),1)):u("",!0),l(f,{onClick:d.addtimedoctor,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])]),l(f,{onClick:d.cansel,style:{position:"absolute",top:"15px",right:"15px"},icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel"},null,8,["onClick"])]}),_:1},8,["visible","header"])],64)}const Te=E(Z,[["render",Ce],["__scopeId","data-v-49932ab1"]]);export{Te as default};
