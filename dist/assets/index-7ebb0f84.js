import{_ as oe,m as ae,a1 as ne,q as i,aj as ie,a2 as ce,ak as de,r,al as O,o as y,d as D,e as o,f as l,g as c,t as u,i as m,L as re,h as S,n as ue,j as B,c as v,y as pe,z as me}from"./main-86b89e49.js";const E=k=>(pe("data-v-f9ecd9f8"),k=k(),me(),k),ve={class:"grid"},fe={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},_e={class:"text-2xl font-bold"},be={class:"flex gap-2"},ge={class:"card shadow-1 surface-0"},ye={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},ke={class:"flex gap-2"},we={class:"p-input-icon-left"},xe=E(()=>o("i",{class:"pi pi-search"},null,-1)),$e={class:"font-medium"},Ce={class:"flex gap-2"},De=E(()=>o("div",{class:"text-center py-4"},[o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),o("p",{class:"text-xl"},"No records found")],-1)),Se={class:"flex justify-content-center align-items-center py-4"},Le={class:"flex align-items-center justify-content-center"},Ve=E(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Te={key:0},Ne={class:"flex flex-column gap-2"},Ie={class:"w-full text-right",for:"username"},Be={key:0,class:"mt-1 mb-5 text-red-500"},Ee={class:"w-full text-center"},Me={class:"flex flex-column gap-2"},Pe={class:"w-full text-right",for:"username"},Re={key:0,class:"mt-1 mb-5 text-red-500"},Ue={class:"w-full text-center"},je={__name:"index",setup(k){const M=ae(),P=ne(),R=i([]),L=i(!0),U=i({}),h=i(""),V=i(null),_=i(!1),j=i(""),q=i(null),z=i(null),w=i({}),x=i(!1),A=i({}),T=i({}),F=i(!1);ie(()=>{te()});const W=()=>{v.post("/api/users").then(e=>{R.value=e.data.users.data})},$=()=>{L.value=!0,v.get("/api/employees").then(e=>{L.value=!1,V.value=e.data.data,console.log(V.value)})};ce(()=>{$(),W()});const H=e=>{P.push({name:"Employee-update",params:{id:e}})},J=e=>{v.get(`/api/employees/rest/${e}`,{action:"delete"}).then(s=>{console.log("Done",s.data)}).catch(s=>{console.error(s)})},K=(e,s)=>{v.get("/api/employees").then(n=>{console.log("Done get api");let C;n.data.data.forEach((p,N)=>{if(p.id==s){C=N;return}});let b=n.data.data[C].is_clocked_in,a;e.target.id=="stu"&&(a=e.target),e.target.id!="stu"&&(a=e.target.parentElement),b||v.post(`/api/attendance/dashboard/clock-in/${s}`).then(p=>{a.classList.remove("p-button-secondary"),a.classList.add("p-button-info"),a.children[0].classList.remove("pi-sign-out"),a.children[0].classList.add("pi-sign-in"),console.log("Done clock in")}).catch(p=>{console.log("cann't clock in",p)}),b&&v.post(`/api/attendance/dashboard/clock-out/${s}`).then(p=>{a.classList.remove("p-button-info"),a.classList.add("p-button-secondary"),a.children[0].classList.remove("pi-sign-in"),a.children[0].classList.add("pi-sign-out"),console.log("Done clock out")}).catch(p=>{console.log("cann't clock out",p)})}).catch(n=>{console.error(n)})},Q=()=>{P.push({name:"Employees-create"})},X=e=>{console.log(e),_.value=!0,j.value=e},Y=()=>{v.post("/api/employees/import/users",T.value).then(e=>{console.log(e.data),$(),x.value=!x.value,M.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=i({})}).catch(e=>{h.value=e.response.data.errors})},Z=()=>{v.delete(`/api/employees/${j.value}`).then(e=>{console.log(e.data),_.value=!1,$(),M.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},ee=()=>{z.value.exportCSV()},te=()=>{w.value={global:{value:null,matchMode:de.CONTAINS}}};return(e,s)=>{const n=r("Button"),C=r("Toolbar"),G=r("Toast"),b=r("InputText"),a=r("Column"),p=r("Tag"),N=r("ProgressSpinner"),le=r("DataTable"),I=r("Dialog"),se=r("MultiSelect"),f=O("can"),g=O("tooltip");return y(),D("div",ve,[o("div",fe,[o("div",he,[l(C,{class:"mb-4"},{start:c(()=>[o("h2",_e,u(e.$t("Employees")),1)]),end:c(()=>[o("div",be,[m(l(n,{label:e.$t("create_button"),icon:"pi pi-plus",class:"p-button-success mr-2 no-print",onClick:Q},null,8,["label"]),[[f,"employees create"]]),m(l(n,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",onClick:ee},null,8,["label"]),[[f,"employees list"]])])]),_:1}),l(G),o("div",ge,[m((y(),re(le,{ref_key:"dt",ref:z,selection:q.value,"onUpdate:selection":s[1]||(s[1]=t=>q.value=t),value:V.value,loading:L.value,"data-key":"id",paginator:!0,rows:10,filters:w.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:c(()=>[o("div",ye,[o("div",ke,[o("span",we,[xe,l(b,{modelValue:w.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=t=>w.value.global.value=t),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),m(l(n,{icon:"pi pi-refresh",class:"p-button-text",onClick:$},null,512),[[g,"Refresh data",void 0,{top:!0}]])])])]),empty:c(()=>[De]),loading:c(()=>[o("div",Se,[l(N,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[l(a,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(a,{field:"name",header:e.$t("name"),sortable:!0},{body:c(t=>[o("span",$e,u(t.data.name),1)]),_:1},8,["header"]),l(a,{field:"email",header:e.$t("email"),sortable:!0},{body:c(t=>[S(u(t.data.email),1)]),_:1},8,["header"]),l(a,{field:"basic_salary",header:e.$t("basic_salary"),sortable:!0},{body:c(t=>[S(u(t.data.basic_salary),1)]),_:1},8,["header"]),l(a,{field:"shift.title",header:e.$t("shift_title"),sortable:!0},{body:c(t=>{var d;return[l(p,{value:((d=t.data.shift)==null?void 0:d.title)||"N/A",severity:"info"},null,8,["value"])]}),_:1},8,["header"]),l(a,{"header-style":"min-width:10rem;",class:"no-print"},{body:c(t=>[o("div",Ce,[m(l(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:d=>H(t.data.user.id)},null,8,["onClick"]),[[f,"employees edit"],[g,"Edit",void 0,{top:!0}]]),m(l(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:d=>X(t.data.id)},null,8,["onClick"]),[[f,"employees delete"],[g,"Delete",void 0,{top:!0}]]),m(l(n,{icon:"pi pi-wrench",class:"p-button-rounded p-button-help",onClick:d=>J(t.data.id)},null,8,["onClick"]),[[g,"Rest",void 0,{top:!0}]]),m(l(n,{class:ue(["p-button-rounded",t.data.is_clocked_in?"p-button-info":"p-button-secondary"]),icon:t.data.is_clocked_in?"pi pi-sign-in":"pi pi-sign-out",onClick:d=>K(d,t.data.id),id:"stu"},null,8,["class","icon","onClick"]),[[f,"employees edit"],[g,e.Status,void 0,{top:!0}]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[f,"employees list"]])]),l(I,{visible:_.value,"onUpdate:visible":s[3]||(s[3]=t=>_.value=t),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:c(()=>[l(n,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[2]||(s[2]=t=>_.value=!1)},null,8,["label"]),l(n,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Z},null,8,["label"])]),default:c(()=>[o("div",Le,[Ve,U.value?(y(),D("span",Te,[S(u(e.$t("remove_item"))+" ",1),o("b",null,u(U.value.first_name),1),S("? ")])):B("",!0)])]),_:1},8,["visible","header"]),l(I,{visible:x.value,"onUpdate:visible":s[5]||(s[5]=t=>x.value=t),style:{width:"450px"},header:e.$t("create_employee"),modal:!0},{default:c(()=>{var t;return[o("div",Ne,[o("label",Ie,u(e.$t("users")),1),l(se,{modelValue:T.value.users_ids,"onUpdate:modelValue":s[4]||(s[4]=d=>T.value.users_ids=d),required:"",id:"pv_id_1",style:{direction:"ltr !important"},"option-value":"id",filter:"",options:R.value,optionLabel:"name",placeholder:e.$t("users"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(t=h.value)!=null&&t.name?(y(),D("div",Be,u(h.value.name[0]),1)):B("",!0)]),o("div",Ee,[l(n,{onClick:Y,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),l(I,{visible:F.value,"onUpdate:visible":s[7]||(s[7]=t=>F.value=t),style:{width:"450px"},header:e.$t("update_employee"),modal:!0},{default:c(()=>{var t;return[o("div",Me,[o("label",Pe,u(e.$t("title")),1),l(b,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:A.value.title,"onUpdate:modelValue":s[6]||(s[6]=d=>A.value.title=d),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(t=h.value)!=null&&t.title?(y(),D("div",Re,u(h.value.name[0]),1)):B("",!0)]),o("div",Ue,[l(n,{onClick:e.editescrud,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["onClick","label"])])]}),_:1},8,["visible","header"])])])])}}},ze=oe(je,[["__scopeId","data-v-f9ecd9f8"]]);export{ze as default};
