import{F as x,i as C,a as y,b as M,c as D,l as u}from"./ar-6afb5a4e.js";import{_ as w,H as B,b5 as T,T as m,z as a,E as i,l as h,o as r,e as V,h as n,x as d,y as f,J as S,i as F,t as _,$ as I,w as g,p as b,f as p,q as v}from"./main-8edbc651.js";const L={components:{FullCalendar:x,Calendar:B},data(){return{langStore:T(),visible:!1,create_visible:!1,event_id:null,creat_event:m(!1),updat_event:m(!1),event_title:"",start_event:"",end_event:"",loading:!1,modal_text:"",time_start:"",time_end:"",opts:{plugins:[C,y,M,D],initialView:"dayGridMonth",footerToolbar:!0,valid:!1,buttonIcons:!1,locale:null,validRange:{start:new Date},selectable:!0,droppable:!1,editable:!0,selectHelper:!0,validRange:{start:new Date},headerToolbar:{center:"prev next today",left:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},eventsTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit"},eventDrop:function(e){console.log(e.event.id),a.post(`/api/calender/${e.event.id}/update`,{start:e.event.start,end:e.event.end}).then(l=>{console.log(l.data.k)})},eventDrop:function(e){a.post(`/api/calender/${e.event.id}/update`,{title:e.event.title,start:i(e.event.start).format("00:00:00 YYYY-MM-d"),end:i(e.event.end).format("00:00:00 YYYY-MM-d")}).then(l=>{console.log(l.data.k)})},eventClick:(function(e){this.event_id=e.event.id,this.event_title=e.event.title,this.modal_text=this.$t("update_event"),this.creat_event=!1,this.updat_event=!0,this.visible=!0,this.start_event=i(e.event.start).format("YYYY-MM-DD"),this.end_event=i(e.event.end).format("YYYY-MM-DD"),console.log(this.start_event)}).bind(this),select:(function(e){console.log(e),this.event_title="",this.modal_text=this.$t("create_event"),this.creat_event=!0,this.updat_event=!1,this.visible=!0,console.log(e),this.start_event=i(e.start).format("YYYY-MM-DD"),this.end_event=i(e.end).format("YYYY-MM-DD"),console.log(e.backgroundColor)}).bind(this)}}},methods:{loo(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=u},goBack(){this.$router.go(-1)},deletevent(e){console.log(e),a.delete(`/api/calender/${this.event_id}/delete`).then(l=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.loading=!1},700)},updateevent(){a.post(`/api/calender/${this.event_id}/update`,{title:this.event_title,start:i(this.start_event).format(" YYYY-MM-d"),end:i(this.end_event).format(" YYYY-MM-d")}).then(e=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.event_id=null,this.loading=!1},700)},async createvent(){this.loading=!0,a.post("/api/calender/create",{title:this.event_title,start:this.start_event,end:this.end_event,time_start:this.time_start,time_end:this.time_end}).then(e=>{e.status!=200&&(this.valid=!0)}),await this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.start_event=null,this.end_event=null,this.create_visible=!1,this.loading=!1},700)},update(){a.post("/api/calender").then(e=>{console.log(e),this.opts.events=e.data.calender})},refreshEvents(){this.$refs.calendar.$emit("refetch-events")}},mounted(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=u,console.log(localStorage.appLang),this.update(),console.log(this.opts)},watch:{"localStorage.appLang"(e){e=="en"?this.opts.locale="":this.opts.locale=u,this.update()}}},E={class:"mb-5 text-white"},G={class:"card flex justify-content-center"},N={for:"time_start"},U={for:"time_end"};function H(e,l,R,W,t,o){const Y=h("FullCalendar"),c=h("Button"),k=h("Dialog");return r(),V("div",null,[n("div",E,[d(I,{height:"45",class:"mx-5 text-white",color:"#135c65",onClick:o.goBack},{default:f(()=>[d(S,{start:"",icon:"mdi-arrow-left"}),F(" "+_(e.$t("back")),1)]),_:1},8,["onClick"])]),d(Y,{options:t.opts,onChange:l[0]||(l[0]=s=>o.refreshEvents()),ref:"fullCalendar"},null,8,["options"]),n("div",G,[d(k,{visible:t.visible,"onUpdate:visible":l[3]||(l[3]=s=>t.visible=s),id:"modal",modal:"",header:t.modal_text,style:{width:"60vw"}},{default:f(()=>[n("form",null,[n("div",null,[n("div",null,[n("label",N,_(e.$t("from")),1),g(n("input",{type:"time",name:"time_start",id:"time_start","onUpdate:modelValue":l[1]||(l[1]=s=>t.time_start=s),style:{"border-radius":"5px"}},null,512),[[b,t.time_start]])]),n("div",null,[n("label",U,_(e.$t("to")),1),g(n("input",{type:"time",name:"time_end",id:"time_end","onUpdate:modelValue":l[2]||(l[2]=s=>t.time_end=s),style:{"border-radius":"5px"}},null,512),[[b,t.time_end]])]),t.creat_event?(r(),p(c,{key:0,style:{"background-color":"rgb(4, 171, 4)",border:"0"},label:"Create ",loading:t.loading,onClick:o.createvent},null,8,["loading","onClick"])):v("",!0),t.updat_event?(r(),p(c,{key:1,style:{"background-color":"#6241f1","margin-left":"10px","margin-right":"10px",border:"0"},label:"update ",loading:t.loading,onClick:o.updateevent},null,8,["loading","onClick"])):v("",!0),t.updat_event?(r(),p(c,{key:2,style:{"background-color":"#b00020",border:"0"},label:"Delet ",loading:t.loading,onClick:o.deletevent},null,8,["loading","onClick"])):v("",!0)])])]),_:1},8,["visible","header"])])])}const q=w(L,[["render",H],["__scopeId","data-v-3490fc35"]]);export{q as default};
