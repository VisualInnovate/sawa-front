import{aa as I,Q as U,R as l,S as F,r as C,o as c,d as r,e as t,f as m,w as x,E as M,t as i,G as N,U as O,h as P,F as L,B as V,Y as q,c as g}from"./main-4d136531.js";import"./editor.esm-11b3b755.js";import{g as z}from"./flowbite-vue-6b3ca830.js";import{V as G}from"./VTextarea-ab07b3dc.js";const H={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},Q={class:"col-12"},Y=["onSubmit"],Z={class:"flex flex-column gap-2 py-1 w-[50%]"},j={class:"flex"},J={class:"text-right"},K=t("svg",{class:"my-auto mx-1",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1),W={class:"flex flex-column mx-2 items-stretch"},X={class:"text-right invisible"},ee={class:"grid md:grid-cols-3 lg:grid-cols-4 grid-cols-1"},se={class:"flex items-center"},te={class:"mx-2 font-bold text-lg text-slate-800"},le=["checked","onChange"],ae=["checked","onChange"],oe=["onClick"],ne={class:""},ie={class:"flex flex-column gap-2"},de={class:"w-full text-right",for:"username"},he={__name:"Show",setup(ue){I();const p=U(),b=l(!1),w=l(!0),$=l({}),f=l(""),y=l(null),v=l(!1),d=l({});l(""),l(null),l(null),l({}),l(!1),l({}),l(!1);const a=l([]),k=e=>e.every(s=>a.value.includes(s.id)),S=(e,s)=>{const h=s.map(u=>u.id);k(s)?a.value=a.value.filter(u=>!h.includes(u)):a.value=[...new Set([...a.value,...h])]},D=()=>{g.get("/api/permissions").then(e=>{w.value=!1,y.value=e.data.permissions})},B=()=>{g.get(`/api/roles/${p.currentRoute.value.params.id}`).then(e=>{w.value=!1,d.value.name=e.data.role.name;for(let s=0;s<e.data.role.permissions.length;s++)a.value.push(e.data.role.permissions[s].id)})},E=()=>{g.put(`/api/roles/${p.currentRoute.value.params.id}/edit`,{permissions:a.value,name:d.value.name}).then(e=>{p.push({name:"Roles"})})};F(()=>{D(),B()});const R=e=>{v.value=!v.value,f.value=e.description,$.value=e},T=e=>{const s=a.value.indexOf(e);s===-1?a.value.push(e):a.value.splice(s,1),console.log(a.value)};return(e,s)=>{const h=C("InputText"),u=C("Dialog");return c(),r("div",H,[t("div",Q,[m(q,{class:"card shadow-md"},{default:x(()=>[t("form",{class:"flex",onSubmit:M(E,["prevent"])},[t("div",Z,[t("div",j,[t("label",J,i(e.$t("اسم الرول")),1),K]),m(h,{class:N(["bg-[#f7f5f5] text-center",{"p-invalid":b.value&&!d.value.name}]),modelValue:d.value.name,"onUpdate:modelValue":s[0]||(s[0]=o=>d.value.name=o),required:""},null,8,["modelValue","class"])]),t("div",W,[t("label",X,i(e.$t("اسم الرول")),1),m(O(z),{type:"submit",onClick:s[1]||(s[1]=o=>b.value=!0),class:"create my-auto"},{default:x(()=>[P(i(e.$t("submit")),1)]),_:1})])],40,Y),t("div",ee,[(c(!0),r(L,null,V(y.value,(o,_)=>(c(),r("div",{class:"p-4",key:_},[t("div",se,[t("h3",te,i(_),1),t("input",{type:"checkbox",class:"border my-auto mx-2",checked:k(o),onChange:n=>S(_,o)},null,40,le)]),(c(!0),r(L,null,V(o,n=>(c(),r("div",{class:"flex py-[1px]",key:n.id},[t("input",{class:"border my-auto mx-2",type:"checkbox",checked:a.value.includes(n.id),onChange:A=>T(n.id)},null,40,ae),t("p",null,i(n.name),1),t("i",{onClick:A=>R(n),class:"pi pi-arrow-left px-4 my-auto text-base text-[#135C65]"},null,8,oe)]))),128))]))),128))]),m(u,{visible:v.value,"onUpdate:visible":s[3]||(s[3]=o=>v.value=o),style:{width:"550px"},header:e.$t("submit"),modal:!0},{default:x(()=>[t("div",ne,[t("div",ie,[t("label",de,i(e.$t("description")),1),m(G,{disabled:"",readonly:"true","bg-color":"#EAE8E9",rows:"3",modelValue:f.value,"onUpdate:modelValue":s[2]||(s[2]=o=>f.value=o)},null,8,["modelValue"])])])]),_:1},8,["visible","header"])]),_:1})])])}}};export{he as default};
