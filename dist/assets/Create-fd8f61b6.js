import{m as E,W as U,q as l,ac as q,X as O,ad as P,r as C,o as r,d as m,e,t as n,f as c,g as x,w as R,n as j,Y as z,h as H,F as k,x as V,a0 as W,c as g}from"./main-bf09fc9d.js";import"./editor.esm-11b3b755.js";import{g as X}from"./flowbite-vue-f09553dd.js";import{V as Y}from"./VTextarea-a7530c19.js";const Z={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},G={class:"flex w-full pb-4 px-4 justify-between align-items-center"},J={class:"m-0 my-auto"},K={class:"block mt-2 md:mt-0 p-input-icon-left"},Q=e("i",{class:"pi pi-search"},null,-1),ee={class:"col-12"},se=["onSubmit"],te={class:"flex flex-column gap-2 py-1 w-[50%]"},le={class:"flex"},ae={class:"text-right"},oe=e("svg",{class:"my-auto mx-1",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1),ne={class:"flex flex-column mx-2 items-stretch"},ie={class:"text-right invisible"},ce={class:"grid md:grid-cols-3 lg:grid-cols-4 grid-cols-1"},de={class:"flex items-center"},ue={class:"mx-2 font-bold text-lg text-slate-800"},re=["checked","onChange"],me=["checked","onChange"],he=["onClick"],ve={class:""},pe={class:"flex flex-column gap-2"},fe={class:"w-full text-right",for:"username"},ye={__name:"Create",setup(_e){E();const L=U(),b=l(!1),w=l(!0),$=l({}),p=l(""),f=l(null),h=l(!1),v=l({});l(""),l(null),l(null);const S=l({});l(!1),l({}),l(!1);const a=l([]);q(()=>{B()});const M=()=>{g.get("/api/permissions").then(s=>{w.value=!1,f.value=s.data.permissions})},D=(s,t)=>{const d=t.map(u=>u.id);y(t)?a.value=a.value.filter(u=>!d.includes(u)):a.value=[...new Set([...a.value,...d])]},y=s=>s.every(t=>a.value.includes(t.id)),T=()=>{g.post("/api/roles/create",{permissions:a.value,name:v.value.name}).then(s=>{L.push({name:"Roles"})})};O(()=>{M()});const A=s=>{h.value=!h.value,p.value=s.description,$.value=s},B=()=>{S.value={global:{value:null,matchMode:P.CONTAINS}}},F=s=>{g.get(`/api/permissions?search=${s}`).then(t=>{w.value=!1,f.value=t.data.permissions})},I=s=>{const t=a.value.indexOf(s);t===-1?a.value.push(s):a.value.splice(t,1),console.log(a.value)};return(s,t)=>{const d=C("InputText"),u=C("Dialog");return r(),m("div",Z,[e("div",G,[e("h5",J,n(s.$t("roles")),1),e("div",null,[e("span",K,[Q,c(d,{"onUpdate:modelValue":F,placeholder:s.$t("search")},null,8,["placeholder"])])])]),e("div",ee,[c(W,{class:"card shadow-md"},{default:x(()=>[e("form",{class:"flex",onSubmit:R(T,["prevent"])},[e("div",te,[e("div",le,[e("label",ae,n(s.$t("اسم الرول")),1),oe]),c(d,{class:j(["bg-[#f7f5f5] text-center",{"p-invalid":b.value&&!v.value.name}]),modelValue:v.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>v.value.name=o),required:""},null,8,["modelValue","class"])]),e("div",ne,[e("label",ie,n(s.$t("اسم الرول")),1),c(z(X),{type:"submit",onClick:t[1]||(t[1]=o=>b.value=!0),class:"create my-auto"},{default:x(()=>[H(n(s.$t("submit")),1)]),_:1})])],40,se),e("div",ce,[(r(!0),m(k,null,V(f.value,(o,_)=>(r(),m("div",{class:"p-4",key:_},[e("div",de,[e("h3",ue,n(_),1),e("input",{type:"checkbox",class:"border my-auto mx-2",checked:y(o),onChange:i=>D(_,o)},null,40,re)]),(r(!0),m(k,null,V(o,i=>(r(),m("div",{class:"flex py-[1px]",key:i.id},[e("input",{class:"border my-auto mx-2",type:"checkbox",checked:a.value.includes(i.id),onChange:N=>I(i.id)},null,40,me),e("p",null,n(i.name),1),e("i",{onClick:N=>A(i),class:"pi pi-arrow-left px-4 my-auto text-base text-[#135C65]"},null,8,he)]))),128))]))),128))]),c(u,{visible:h.value,"onUpdate:visible":t[3]||(t[3]=o=>h.value=o),style:{width:"550px"},header:s.$t("submit"),modal:!0},{default:x(()=>[e("div",ve,[e("div",pe,[e("label",fe,n(s.$t("description")),1),c(Y,{disabled:"",readonly:"true","bg-color":"#EAE8E9",rows:"3",modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=o=>p.value=o)},null,8,["modelValue"])])])]),_:1},8,["visible","header"])]),_:1})])])}}};export{ye as default};
