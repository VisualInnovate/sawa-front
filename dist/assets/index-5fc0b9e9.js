import{_ as se,l as oe,m as ne,a1 as ie,q as d,aj as de,a2 as re,ak as ue,r as c,al as z,o as U,d as A,e as t,f as o,g as r,t as u,i as f,L as ce,h as B,j as pe,w as H,n as h,c as w,y as me,z as ve}from"./main-c4167cbc.js";import{h as S}from"./moment-fbc5633a.js";const N=$=>(me("data-v-b07ae45e"),$=$(),ve(),$),_e={class:"grid"},fe={class:"col-12"},he={class:"card p-4 shadow-2 border-round"},be={class:"text-2xl font-bold"},ge={class:"flex gap-2"},ye={class:"card shadow-1 surface-0"},xe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},we={class:"flex gap-2"},$e={class:"p-input-icon-left"},ke=N(()=>t("i",{class:"pi pi-search"},null,-1)),Ve={class:"font-medium"},Ce={class:"flex gap-2"},De=N(()=>t("div",{class:"text-center py-4"},[t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),t("p",{class:"text-xl"},"No records found")],-1)),Be={class:"flex justify-content-center align-items-center py-4"},Se={class:"flex align-items-center justify-content-center"},Me=N(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Te={key:0},Ye=["onSubmit"],Ie={class:"flex flex-column gap-2"},Le={class:"w-full text-right",for:"username"},Pe={class:"flex flex-column gap-2 mt-3"},Ue={style:{"text-align":"right !important"},for:"username"},Ne={class:"flex flex-column gap-2 mt-3"},Re={style:{"text-align":"right !important"},for:"username"},je={class:"w-full text-center mt-4"},qe=["onSubmit"],ze={class:"flex flex-column gap-2"},Ae={class:"w-full text-right",for:"username"},He={class:"flex flex-column gap-2 mt-3"},Fe={style:{"text-align":"right !important"},for:"username"},Ee={class:"flex flex-column gap-2 mt-3"},Ge={style:{"text-align":"right !important"},for:"username"},We={class:"w-full text-center mt-4"},Oe={__name:"index",setup($){const{t:i}=oe(),m=ne();ie();const p=d(!1),k=d(!0),R=d({}),M=d(null),b=d(!1),V=d(""),j=d(null),q=d(null),C=d({}),v=d(!1),a=d({}),_=d(!1),T=d(!1),Y=d(!1);de(()=>{X()});const g=()=>{k.value=!0,w.get("/api/holidays").then(e=>{k.value=!1,M.value=e.data.data,console.log(M.value)}).catch(()=>{k.value=!1,m.add({severity:"error",summary:i("error"),detail:i("mission_error"),life:3e3})})};re(()=>{g()});const F=e=>{w.get(`/api/holidays/${e}`).then(s=>{a.value=s.data.data}),V.value=e,_.value=!_.value},E=()=>{a.value.end_date=S(a.value.end_date).format("YYYY-MM-DD"),a.value.start_date=S(a.value.start_date).format("YYYY-MM-DD"),w.put(`/api/holidays/${V.value}`,a.value).then(e=>{g(),_.value=!_.value,m.add({severity:"success",summary:i("success_message"),detail:i("element_update_success"),life:3e3}),a.value={}}).catch(e=>{m.add({severity:"error",summary:i("error"),detail:i("mission_error"),life:3e3})})},G=()=>{v.value=!v.value,a.value={}},W=e=>{b.value=!0,V.value=e},O=()=>{a.value.end_date=S(a.value.end_date).format("YYYY-MM-DD"),a.value.start_date=S(a.value.start_date).format("YYYY-MM-DD"),w.post("/api/holidays",a.value).then(e=>{g(),v.value=!v.value,m.add({severity:"success",summary:i("success_message"),detail:i("element_add_success"),life:3e3}),a.value={}}).catch(e=>{m.add({severity:"error",summary:i("error"),detail:i("mission_error"),life:3e3})})},J=()=>{w.delete(`/api/holidays/${V.value}`).then(e=>{b.value=!1,g(),m.add({severity:"success",summary:i("success_message"),detail:i("element_delete_success"),life:3e3})}).catch(()=>{m.add({severity:"error",summary:i("error"),detail:i("mission_error"),life:3e3})})},K=()=>{T.value=!0,q.value.exportCSV(),setTimeout(()=>{T.value=!1},1e3)},Q=()=>{Y.value=!0;const e=document.querySelector(".p-datatable-wrapper").cloneNode(!0);document.body.innerHTML,e.querySelectorAll(".p-button").forEach(I=>I.remove());const n=window.open("","_blank");n.document.write(`
    <html>
      <head>
        <title>Holidays Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Holidays Report</h1>
        ${e.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close(),Y.value=!1},500)},X=()=>{C.value={global:{value:null,matchMode:ue.CONTAINS}}};return(e,s)=>{const n=c("Button"),I=c("Toolbar"),Z=c("Toast"),L=c("InputText"),y=c("Column"),ee=c("ProgressSpinner"),te=c("DataTable"),P=c("Dialog"),D=c("Calendar"),x=z("can"),le=z("tooltip");return U(),A("div",_e,[t("div",fe,[t("div",he,[o(I,{class:"mb-4"},{start:r(()=>[t("h2",be,u(e.$t("holidays")),1)]),end:r(()=>[t("div",ge,[o(n,{label:e.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:Y.value,onClick:Q},null,8,["label","loading"]),f(o(n,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:T.value,onClick:K},null,8,["label","loading"]),[[x,"holidays list"]]),f(o(n,{label:e.$t("holiday_add"),icon:"pi pi-plus",class:"p-button-success",onClick:G},null,8,["label"]),[[x,"holidays create"]])])]),_:1}),o(Z),t("div",ye,[f((U(),ce(te,{ref_key:"dt",ref:q,selection:j.value,"onUpdate:selection":s[1]||(s[1]=l=>j.value=l),value:M.value,loading:k.value,"data-key":"id",paginator:!0,rows:10,filters:C.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:r(()=>[t("div",xe,[t("div",we,[t("span",$e,[ke,o(L,{modelValue:C.value.global.value,"onUpdate:modelValue":s[0]||(s[0]=l=>C.value.global.value=l),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),f(o(n,{icon:"pi pi-refresh",class:"p-button-text",onClick:g},null,512),[[le,"Refresh data",void 0,{top:!0}]])])])]),empty:r(()=>[De]),loading:r(()=>[t("div",Be,[o(ee,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[o(y,{"selection-mode":"multiple","header-style":"width: 3rem"}),o(y,{field:"title",header:e.$t("title"),sortable:!0},{body:r(l=>[t("span",Ve,u(l.data.title),1)]),_:1},8,["header"]),o(y,{field:"start_date",header:e.$t("start_date"),sortable:!0},{body:r(l=>[B(u(l.data.start_date),1)]),_:1},8,["header"]),o(y,{field:"end_date",header:e.$t("end_date"),sortable:!0},{body:r(l=>[B(u(l.data.end_date),1)]),_:1},8,["header"]),o(y,{"header-style":"min-width:10rem;"},{body:r(l=>[t("div",Ce,[f(o(n,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:ae=>F(l.data.id)},null,8,["onClick"]),[[x,"holidays edit"]]),f(o(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:ae=>W(l.data.id)},null,8,["onClick"]),[[x,"holidays delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[x,"holidays list"]])]),o(P,{visible:b.value,"onUpdate:visible":s[3]||(s[3]=l=>b.value=l),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:r(()=>[o(n,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[2]||(s[2]=l=>b.value=!1)},null,8,["label"]),o(n,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:r(()=>[t("div",Se,[Me,R.value?(U(),A("span",Te,[B(u(e.$t("remove_item"))+" ",1),t("b",null,u(R.value.first_name),1),B("? ")])):pe("",!0)])]),_:1},8,["visible","header"]),o(P,{visible:v.value,"onUpdate:visible":s[8]||(s[8]=l=>v.value=l),style:{width:"450px"},header:e.$t("create_holiday"),modal:!0},{default:r(()=>[t("form",{onSubmit:H(O,["prevent"])},[t("div",Ie,[t("label",Le,u(e.$t("title")),1),o(L,{required:"",class:h(["bg-[#f7f5f5] text-center",{"p-invalid":p.value&&!a.value.title}]),modelValue:a.value.title,"onUpdate:modelValue":s[4]||(s[4]=l=>a.value.title=l)},null,8,["modelValue","class"])]),t("div",Pe,[t("label",Ue,u(e.$t("start_date")),1),o(D,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.start_date,"onUpdate:modelValue":s[5]||(s[5]=l=>a.value.start_date=l),showIcon:"",class:h({"p-invalid":p.value&&!a.value.start_date})},null,8,["modelValue","class"])]),t("div",Ne,[t("label",Re,u(e.$t("end_date")),1),o(D,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.end_date,"onUpdate:modelValue":s[6]||(s[6]=l=>a.value.end_date=l),showIcon:"",class:h({"p-invalid":p.value&&!a.value.end_date})},null,8,["modelValue","class"])]),t("div",je,[o(n,{type:"submit",onClick:s[7]||(s[7]=l=>p.value=!0),class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],40,Ye)]),_:1},8,["visible","header"]),o(P,{visible:_.value,"onUpdate:visible":s[13]||(s[13]=l=>_.value=l),style:{width:"450px"},header:e.$t("update_holiday"),modal:!0},{default:r(()=>[t("form",{onSubmit:H(E,["prevent"])},[t("div",ze,[t("label",Ae,u(e.$t("title")),1),o(L,{required:"",class:h(["bg-[#f7f5f5] text-center",{"p-invalid":p.value&&!a.value.title}]),modelValue:a.value.title,"onUpdate:modelValue":s[9]||(s[9]=l=>a.value.title=l)},null,8,["modelValue","class"])]),t("div",He,[t("label",Fe,u(e.$t("start_date")),1),o(D,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.start_date,"onUpdate:modelValue":s[10]||(s[10]=l=>a.value.start_date=l),showIcon:"",class:h({"p-invalid":p.value&&!a.value.start_date})},null,8,["modelValue","class"])]),t("div",Ee,[t("label",Ge,u(e.$t("end_date")),1),o(D,{style:{width:"100%"},showButtonBar:"",modelValue:a.value.end_date,"onUpdate:modelValue":s[11]||(s[11]=l=>a.value.end_date=l),showIcon:"",class:h({"p-invalid":p.value&&!a.value.end_date})},null,8,["modelValue","class"])]),t("div",We,[o(n,{type:"submit",onClick:s[12]||(s[12]=l=>p.value=!0),class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],40,qe)]),_:1},8,["visible","header"])])])])}}},Qe=se(Oe,[["__scopeId","data-v-b07ae45e"]]);export{Qe as default};
