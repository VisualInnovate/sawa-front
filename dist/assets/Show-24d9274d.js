import{_ as H,m as Z,a1 as G,q as o,a2 as J,r as D,al as I,i as R,o as r,d,e,t as n,f as u,w as K,n as Q,j as W,g as C,h as X,a3 as S,F as E,x as N,c as _,y as Y,z as ee}from"./main-86b89e49.js";import"./editor.esm-55efa958.js";import{g as L}from"./flowbite-vue-db5848ea.js";const f=m=>(Y("data-v-2c350718"),m=m(),ee(),m),se={class:"role-edit-container"},te={class:"header-container"},oe={class:"page-title"},ae={class:"search-container"},le={class:"p-input-icon-left"},ie=f(()=>e("i",{class:"pi pi-search"},null,-1)),ne={class:"card-container"},ce={class:"form-section"},re=["onSubmit"],de={class:"form-group"},ue={class:"flex items-center"},pe={class:"form-label"},he=f(()=>e("svg",{class:"required-icon",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1)),ve={key:0,class:"error-message"},me=f(()=>e("i",{class:"pi pi-save ml-2"},null,-1)),_e={class:"permissions-grid"},fe={class:"category-header"},ge=["checked","onChange"],be={class:"permission-list"},ye={class:"permission-info"},ke={class:"permission-checkbox-container"},we=["checked","onChange"],xe=f(()=>e("span",{class:"checkmark"},null,-1)),Ce={class:"permission-name"},Se={class:"dialog-content"},Le={class:"description-container"},$e={class:"description-label"},Ve={class:"description-text"},De={__name:"Show",setup(m){const g=Z(),b=G(),y=o(!1),k=o(!0),q=o({}),$=o(""),w=o(null),p=o(!1),i=o({});o(""),o(null),o(null),o({}),o(!1),o({}),o(!1);const a=o([]),V=s=>s.every(t=>a.value.includes(t.id)),B=(s,t)=>{const h=t.map(v=>v.id);V(t)?a.value=a.value.filter(v=>!h.includes(v)):a.value=[...new Set([...a.value,...h])]},F=s=>{_.get(`/api/permissions?search=${s}`).then(t=>{k.value=!1,w.value=t.data.permissions})},T=()=>{_.get("/api/permissions").then(s=>{k.value=!1,w.value=s.data.permissions})},A=()=>{_.get(`/api/roles/${b.currentRoute.value.params.id}`).then(s=>{k.value=!1,i.value.name=s.data.role.name;for(let t=0;t<s.data.role.permissions.length;t++)a.value.push(s.data.role.permissions[t].id)})},M=()=>{if(y.value=!0,!i.value.name){g.add({severity:"error",summary:"Validation Error",detail:"Role name is required",life:3e3});return}_.put(`/api/roles/${b.currentRoute.value.params.id}/edit`,{permissions:a.value,name:i.value.name}).then(s=>{g.add({severity:"success",summary:"Success",detail:"Role updated successfully",life:3e3}),b.push({name:"Roles"})}).catch(s=>{g.add({severity:"error",summary:"Error",detail:"Failed to update role",life:3e3})})};J(()=>{T(),A()});const P=s=>{p.value=!p.value,$.value=s.description,q.value=s},U=s=>{const t=a.value.indexOf(s);t===-1?a.value.push(s):a.value.splice(t,1)};return(s,t)=>{const h=D("InputText"),v=D("Dialog"),z=I("tooltip"),O=I("can");return R((r(),d("div",se,[e("div",te,[e("h1",oe,n(s.$t("Edit Role")),1),e("div",ae,[e("span",le,[ie,u(h,{"onUpdate:modelValue":F,placeholder:s.$t("search"),class:"search-input"},null,8,["placeholder"])])])]),e("div",ne,[e("div",ce,[e("form",{onSubmit:K(M,["prevent"]),class:"role-form"},[e("div",de,[e("div",ue,[e("label",pe,n(s.$t("اسم الرول")),1),he]),u(h,{modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value.name=l),class:Q(["form-input",{"input-error":y.value&&!i.value.name}]),placeholder:"Enter role name"},null,8,["modelValue","class"]),y.value&&!i.value.name?(r(),d("small",ve,"Role name is required")):W("",!0)]),u(S(L),{type:"submit",class:"submit-button"},{default:C(()=>[X(n(s.$t("submit"))+" ",1),me]),_:1})],40,re)]),e("div",_e,[(r(!0),d(E,null,N(w.value,(l,x)=>(r(),d("div",{class:"permission-category",key:x},[e("div",fe,[e("h3",null,n(x),1),e("input",{type:"checkbox",class:"category-checkbox",checked:V(l),onChange:c=>B(x,l)},null,40,ge)]),e("div",be,[(r(!0),d(E,null,N(l,c=>(r(),d("div",{class:"permission-item",key:c.id},[e("div",ye,[e("label",ke,[e("input",{type:"checkbox",checked:a.value.includes(c.id),onChange:j=>U(c.id)},null,40,we),xe,e("span",Ce,n(c.name),1)])]),R(u(S(L),{icon:"pi pi-info-circle",class:"p-button-rounded p-button-text info-button",onClick:j=>P(c)},null,8,["onClick"]),[[z,"View description",void 0,{top:!0}]])]))),128))])]))),128))])]),u(v,{visible:p.value,"onUpdate:visible":t[2]||(t[2]=l=>p.value=l),style:{width:"550px"},header:"Permission Description",modal:!0,class:"permission-dialog"},{footer:C(()=>[u(S(L),{label:"Close",icon:"pi pi-times",class:"p-button-text close-button",onClick:t[1]||(t[1]=l=>p.value=!1)})]),default:C(()=>[e("div",Se,[e("div",Le,[e("label",$e,n(s.$t("description")),1),e("div",Ve,n($.value||"No description available"),1)])])]),_:1},8,["visible"])])),[[O,"roles list"]])}}},Ne=H(De,[["__scopeId","data-v-2c350718"]]);export{Ne as default};
