import{_ as g,c as n,r as u,o as r,d as m,f as i,w as x,e as a,t as p,G as d,g as V,F as b,B as w,E as C,X as k}from"./main-e5551934.js";const q={data(){return{submitted:!1,selectedOption:"",employee_id:"",maxvalue:"",quantity:"",balance:[],options:[],employees:[],error:{}}},methods:{getallsetup(){n.get("api/leave-setup").then(e=>{this.options=e.data.data})},getallemployees(){n.get("api/employees").then(e=>{this.employees=e.data.data,this.getone(),this.getallsetup()})},deleteitem(e){this.balance.splice(e,1)},getmaxvalue(e){this.quantity="",n.get(`api/leave-setup/${e.id}`).then(l=>{this.maxvalue=l.data.data.days?l.data.data.days:l.data.data.hours})},addItem(){this.selectedOption&&this.quantity>0&&(this.balance.push({id:this.selectedOption.id,title:this.selectedOption.title,value:this.quantity}),this.selectedOption="",this.value=1)},getone(){n.get(`api/leave-balance/${this.$route.params.id}`).then(e=>{this.balance=e.data.data.balance,this.employee_id=e.data.data.employee_id})},submite(){this.error={},n.put(`api/leave-balance/${this.$route.params.id}`,{employee_id:this.employee_id,balance:this.balance}).then(e=>{this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_update_success")}`,life:3e3})}).catch(e=>{this.error=e.response.data.errors,this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${e.response.data.message}`,life:3e3})})}},computed:{filteredDays(){const e=this.balance.map(l=>l.id);return this.options.filter(l=>!e.includes(l.id))}},mounted(){this.getallemployees()}},O={for:"username"},B={key:0,class:"mt-1 mb-5 text-red-500"},I=a("thead",null,[a("tr",null,[a("th",null,"leave_setup"),a("th",null,"الكمية ")])],-1);function D(e,l,N,L,t,o){const h=u("Dropdown"),c=u("Button"),f=u("InputNumber"),v=u("Toast");return r(),m(b,null,[i(k,{class:"p-[2%] bg-slate-50 shadow-xl gap-4"},{default:x(()=>{var _;return[a("div",{class:d([{"animate__animated animate__bounce animate__delay-0s":t.error.employee_id},"flex flex-column gap-2 md:w-[50%] py-[2%]"])},[a("label",O,p(e.$t("employee_name")),1),i(h,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:t.employee_id,"onUpdate:modelValue":l[0]||(l[0]=s=>t.employee_id=s),"option-value":"id",options:t.employees,optionLabel:"name",placeholder:e.$t("employee_name"),class:d(["w-full bg-[#f7f5f5]",{"p-invalid":t.submitted&&!t.employee_id}])},null,8,["modelValue","options","placeholder","class"]),(_=t.error)!=null&&_.shift_id?(r(),m("div",B,p(t.error.shift_id[0]),1)):V("",!0)],2),a("form",{onSubmit:l[5]||(l[5]=C((...s)=>o.addItem&&o.addItem(...s),["prevent"]))},[a("table",{class:d([{"animate__animated animate__bounce animate__delay-0s":t.error.balance},"item-table w-[70%]"])},[I,a("tbody",null,[(r(!0),m(b,null,w(t.balance,(s,y)=>(r(),m("tr",{key:y},[a("td",null,p(s.title),1),a("td",null,p(s.value),1),a("td",null,[i(c,{onClick:U=>o.deleteitem(y),icon:"pi pi-trash",class:"p-button-rounded delete p-button-success m-auto"},null,8,["onClick"])])]))),128)),a("tr",null,[a("td",null,[i(h,{"onUpdate:modelValue":[l[1]||(l[1]=s=>o.getmaxvalue(s)),l[2]||(l[2]=s=>t.selectedOption=s)],style:{direction:"ltr !important"},modelValue:t.selectedOption,options:o.filteredDays,optionLabel:"title",placeholder:e.$t("shift_name"),class:d(["w-full",{"p-invalid":t.submitted&&!t.selectedOption}])},null,8,["modelValue","options","placeholder","class"])]),a("td",null,[i(f,{class:d(["w-full",{"p-invalid":t.submitted&&!t.quantity}]),modelValue:t.quantity,"onUpdate:modelValue":l[3]||(l[3]=s=>t.quantity=s),placeholder:e.$t("max_value")+"="+t.maxvalue,max:t.maxvalue},null,8,["modelValue","placeholder","max","class"])]),a("td",null,[i(c,{onClick:l[4]||(l[4]=s=>t.submitted=!0),type:"submit",required:"",class:"create m-auto s",icon:"pi pi-plus"})])])])],2)],32),i(c,{onClick:o.submite,type:"submit",class:"create m-auto w-32 my-4",label:e.$t("submit")},null,8,["onClick","label"])]}),_:1}),i(v)],64)}const F=g(q,[["render",D]]);export{F as default};
