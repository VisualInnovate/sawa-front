import{_ as U,m as G,a1 as H,q as s,aj as W,a2 as O,ak as J,r,al as N,o as p,d as m,e as o,f as a,g as l,t as d,i as v,L as K,h as S,c as A,y as Q,z as X}from"./main-db013b89.js";const $=h=>(Q("data-v-b1319e1a"),h=h(),X(),h),Y={class:"grid"},Z={class:"col-12"},ee={class:"card p-4 shadow-2 border-round"},te={class:"text-2xl font-bold"},ae={class:"flex gap-2"},oe={class:"card shadow-1 surface-0"},le={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},ne={class:"m-0"},se={class:"flex gap-2"},ie={class:"p-input-icon-left"},re=$(()=>o("i",{class:"pi pi-search"},null,-1)),de={class:"font-medium"},ce=["href"],pe={key:1},ue={key:0},me={key:1},he=$(()=>o("div",{class:"text-center py-4"},[o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),o("p",{class:"text-xl"},"No parents found")],-1)),fe={class:"flex justify-content-center align-items-center py-4"},_e={class:"flex align-items-center justify-content-center"},ve=$(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),ge={__name:"index",setup(h){const g=G();H();const f=s(!0),C=s({});s("");const D=s(null),u=s(!1),T=s(null),P=s(null),_=s({}),b=s(!1),y=s(!1);W(()=>{V()});const x=()=>{f.value=!0,A.get("/api/admin-parents").then(e=>{f.value=!1,D.value=e.data.parents}).catch(e=>{f.value=!1,g.add({severity:"error",summary:"Error",detail:"Failed to load parents data",life:3e3})})};O(()=>{x()});const B=e=>{u.value=!0,C.value.id=e},I=()=>{A.delete(`/api/admin-parents/delete/${C.value.id}`).then(()=>{u.value=!1,x(),g.add({severity:"success",summary:"Success",detail:"Parent deleted successfully",life:3e3})}).catch(e=>{g.add({severity:"error",summary:"Error",detail:"Failed to delete parent",life:3e3})})},M=()=>{b.value=!0,P.value.exportCSV(),setTimeout(()=>{b.value=!1},1e3)},R=()=>{y.value=!0;const e=document.querySelector(".p-datatable-wrapper").cloneNode(!0);document.body.innerHTML,e.querySelectorAll(".p-button").forEach(w=>w.remove());const n=window.open("","_blank");n.document.write(`
    <html>
      <head>
        <title>Parents Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Parents Report</h1>
        ${e.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),n.document.close(),n.focus(),setTimeout(()=>{n.print(),n.close(),y.value=!1},500)},V=()=>{_.value={global:{value:null,matchMode:J.CONTAINS}}};return(e,i)=>{const n=r("Button"),w=r("Toolbar"),F=r("Toast"),E=r("InputText"),c=r("Column"),j=r("ProgressSpinner"),z=r("DataTable"),q=r("Dialog"),k=N("can"),L=N("tooltip");return p(),m("div",Y,[o("div",Z,[o("div",ee,[a(w,{class:"mb-4"},{start:l(()=>[o("h2",te,d(e.$t("Parents Management")),1)]),end:l(()=>[o("div",ae,[a(n,{label:e.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:y.value,onClick:R},null,8,["label","loading"]),v(a(n,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:b.value,onClick:M},null,8,["label","loading"]),[[k,"child create"]])])]),_:1}),a(F),o("div",oe,[v((p(),K(z,{ref_key:"dt",ref:P,selection:T.value,"onUpdate:selection":i[1]||(i[1]=t=>T.value=t),value:D.value,loading:f.value,"data-key":"id",paginator:!0,rows:10,filters:_.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50],"current-page-report-template":"Showing {first} to {last} of {totalRecords} parents","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:l(()=>[o("div",le,[o("h3",ne,d(e.$t("Parents List")),1),o("div",se,[o("span",ie,[re,a(E,{modelValue:_.value.global.value,"onUpdate:modelValue":i[0]||(i[0]=t=>_.value.global.value=t),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),v(a(n,{icon:"pi pi-refresh",class:"p-button-text",onClick:x},null,512),[[L,"Refresh data",void 0,{top:!0}]])])])]),empty:l(()=>[he]),loading:l(()=>[o("div",fe,[a(j,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:l(()=>[a(c,{"selection-mode":"multiple","header-style":"width: 3rem"}),a(c,{field:"id",header:e.$t("ID"),sortable:!0},{body:l(t=>[o("span",de,d(t.data.id),1)]),_:1},8,["header"]),a(c,{field:"fname",header:e.$t("First Name"),sortable:!0},{body:l(t=>[S(d(t.data.fname||"N/A"),1)]),_:1},8,["header"]),a(c,{field:"lname",header:e.$t("Last Name"),sortable:!0},{body:l(t=>[S(d(t.data.lname||"N/A"),1)]),_:1},8,["header"]),a(c,{field:"email",header:e.$t("Email"),sortable:!0},{body:l(t=>[t.data.email?(p(),m("a",{key:0,href:`mailto:${t.data.email}`,class:"text-primary"},d(t.data.email),9,ce)):(p(),m("span",pe,"N/A"))]),_:1},8,["header"]),a(c,{field:"phone",header:e.$t("Phone"),sortable:!0},{body:l(t=>[t.data.phone?(p(),m("span",ue,d(t.data.phone),1)):(p(),m("span",me,"N/A"))]),_:1},8,["header"]),a(c,{"header-style":"width: 8rem; min-width: 8rem;",class:"no-print"},{body:l(t=>[v(a(n,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger p-button-sm",onClick:be=>B(t.data.id)},null,8,["onClick"]),[[k,"child delete"],[L,"Delete",void 0,{top:!0}]])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[k,"child list"]])]),a(q,{visible:u.value,"onUpdate:visible":i[3]||(i[3]=t=>u.value=t),style:{width:"450px"},header:e.$t("Confirm Deletion"),modal:!0},{footer:l(()=>[a(n,{label:e.$t("Cancel"),icon:"pi pi-times",class:"p-button-text",onClick:i[2]||(i[2]=t=>u.value=!1)},null,8,["label"]),a(n,{label:e.$t("Delete"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:I},null,8,["label"])]),default:l(()=>[o("div",_e,[ve,o("span",null,d(e.$t("Are you sure you want to delete this parent?")),1)])]),_:1},8,["visible","header"])])])])}}},xe=U(ge,[["__scopeId","data-v-b1319e1a"]]);export{xe as default};
