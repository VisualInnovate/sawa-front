import{a9 as Y,Q as Z,R as o,aa as ee,S as le,ab as se,r as c,ac as te,o as v,d as h,e as a,f as s,w as i,i as b,x as ae,t as n,h as V,g as w,c as _}from"./main-48e98bcd.js";const oe={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},ne={class:"col-12"},ie={class:"my-2"},re={style:{},class:"shadow-xl"},ue={class:"flex w-full justify-between align-items-center"},de={class:"m-0 my-auto"},ce={class:"block mt-2 md:mt-0 p-input-icon-left"},me=a("i",{class:"pi pi-search"},null,-1),pe={class:"flex align-items-center justify-content-center"},ve=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),fe={key:0},he={class:"flex flex-column gap-2 py-1"},be={class:"w-full text-right",for:"username"},_e={key:0,class:"mt-1 mb-5 text-red-500"},ge={class:"flex flex-column gap-2 py-1"},ye={class:"w-full text-right",for:"username"},we={key:0,class:"mt-1 mb-5 text-red-500"},ke={class:"w-full text-center"},$e={class:"flex flex-column gap-2"},xe={class:"w-full text-right",for:"username"},Ce={key:0,class:"mt-1 mb-5 text-red-500"},Ve={class:"flex flex-column gap-2"},Se={class:"w-full text-right",for:"username"},De={key:0,class:"mt-1 mb-5 text-red-500"},Te={class:"w-full text-center"},Ne={__name:"Index",setup(Ue){const S=Y(),B=Z(),D=o({}),T=o(!0),M=o({}),r=o(""),U=o(null);o(!1);const g=o(!1),L=o(""),R=o(null),j=o(null),k=o({}),$=o(!1),u=o({name:"",permissions:[]}),x=o(!1);ee(()=>{H()});const y=()=>{_.post("/api/roles").then(e=>{U.value=e.data.roles.data,console.log(U.value)}),_.get("/api/permissions").then(e=>{D.value=e.data.permissions,T.value=!1})};le(()=>{y()});const F=e=>{B.push({name:"ShowRole",params:{id:e}})},q=()=>{_.put(`/api/roles/${L.value}/edit`,u.value).then(e=>{console.log(e.data),y(),x.value=!x.value,S.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=o({})}).catch(e=>{r.value=e.response.data.errors})},A=()=>{B.push({name:"CreateRole"})},z=e=>{console.log(e),g.value=!0,L.value=e},E=()=>{_.post("/api/roles/create",u.value).then(e=>{console.log(e.data),y(),$.value=!$.value,S.add({severity:"success",summary:"Successful",detail:" Successful",life:3e3}),skill.value=o({})}).catch(e=>{r.value=e.response.data.errors})},O=()=>{_.delete(`/api/roles/${L.value}/delete`).then(e=>{console.log(e.data),y(),g.value=!1,S.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},Q=e=>{T.value=!0,_.get(`/api/permissions/copy/${e}`).then(t=>{y()}).catch(()=>{})},G=()=>{j.value.exportCSV()},H=()=>{k.value={global:{value:null,matchMode:se.CONTAINS}}};return(e,t)=>{const d=c("Button"),J=c("Toolbar"),K=c("Toast"),N=c("InputText"),C=c("Column"),W=c("DataTable"),P=c("Dialog"),I=c("MultiSelect"),X=c("va-card"),f=te("can");return v(),h("div",oe,[a("div",ne,[s(X,{class:"card"},{default:i(()=>[s(J,{class:"mb-4 shadow-md"},{start:i(()=>[a("div",ie,[b(s(d,{label:e.$t("roles"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:A},null,8,["label"]),[[f,"roles create"]])])]),end:i(()=>[b(s(d,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:t[0]||(t[0]=l=>G(l))},null,8,["label"]),[[f,"roles list"]])]),_:1}),s(K),a("div",re,[b((v(),ae(W,{ref_key:"dt",ref:j,selection:R.value,"onUpdate:selection":t[2]||(t[2]=l=>R.value=l),value:U.value,loading:T.value,"data-key":"id",paginator:!0,rows:10,filters:k.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:i(()=>[a("div",ue,[a("h5",de,n(e.$t("roles")),1),a("div",null,[a("span",ce,[me,s(N,{modelValue:k.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=l=>k.value.global.value=l),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:i(()=>[s(C,{"selection-mode":"multiple","header-style":"width: 3rem"}),s(C,{field:"index",header:e.$t("index"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:i(l=>[V(n(l.data.id),1)]),_:1},8,["header"]),s(C,{field:"name",header:e.$t("name"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:i(l=>[V(n(l.data.name),1)]),_:1},8,["header"]),s(C,{"header-style":"min-width:10rem;"},{body:i(l=>[a("div",null,[b(s(d,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:m=>F(l.data.id)},null,8,["onClick"]),[[f,"roles edit"]]),b(s(d,{icon:"pi pi-trash",class:"delete mt-2",onClick:m=>z(l.data.id)},null,8,["onClick"]),[[f,"roles delete"]]),b(s(d,{icon:"pi pi-wallet",class:"show mt-2",onClick:m=>Q(l.data.id)},null,8,["onClick"]),[[f,"roles delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[f,"roles list"]]),s(P,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=l=>g.value=l),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:i(()=>[s(d,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=l=>g.value=!1)},null,8,["label"]),s(d,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:O},null,8,["label"])]),default:i(()=>[a("div",pe,[ve,M.value?(v(),h("span",fe,[V(n(e.$t("remove_item"))+" ",1),a("b",null,n(M.value.first_name),1),V("?")])):w("",!0)])]),_:1},8,["visible","header"]),s(P,{visible:$.value,"onUpdate:visible":t[7]||(t[7]=l=>$.value=l),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:i(()=>{var l,m;return[a("div",he,[a("label",be,n(e.$t("name")),1),s(N,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:u.value.name,"onUpdate:modelValue":t[5]||(t[5]=p=>u.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(l=r.value)!=null&&l.name?(v(),h("div",_e,n(r.value.name[0]),1)):w("",!0)]),a("div",ge,[a("label",ye,n(e.$t("permissions")),1),s(I,{modelValue:u.value.permissions,"onUpdate:modelValue":t[6]||(t[6]=p=>u.value.permissions=p),filter:"","option-value":"id",options:D.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=r.value)!=null&&m.name?(v(),h("div",we,n(r.value.name[0]),1)):w("",!0)]),a("div",ke,[s(d,{onClick:E,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),s(P,{visible:x.value,"onUpdate:visible":t[10]||(t[10]=l=>x.value=l),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:i(()=>{var l,m;return[a("div",$e,[a("label",xe,n(e.$t("name")),1),s(N,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:u.value.name,"onUpdate:modelValue":t[8]||(t[8]=p=>u.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(l=r.value)!=null&&l.name?(v(),h("div",Ce,n(r.value.name[0]),1)):w("",!0)]),a("div",Ve,[a("label",Se,n(e.$t("permissions")),1),s(I,{modelValue:u.value.permissions,"onUpdate:modelValue":t[9]||(t[9]=p=>u.value.permissions=p),filter:"","option-value":"id",options:D.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=r.value)!=null&&m.permissions?(v(),h("div",De,n(r.value.permissions[0]),1)):w("",!0)]),a("div",Te,[s(d,{onClick:q,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Ne as default};
