import{_ as le,m as ae,a1 as se,q as n,aj as oe,a2 as ne,ak as ie,r as u,al as q,o as h,d as w,e as t,f as l,g as d,t as r,i as b,L as de,h as A,j as S,c as g,y as re,z as ce}from"./main-7f465f8a.js";const L=k=>(re("data-v-985d5124"),k=k(),ce(),k),ue={class:"grid"},pe={class:"col-12"},me={class:"card p-4 shadow-2 border-round"},ve={class:"text-2xl font-bold"},fe={class:"flex gap-2"},he={class:"card shadow-1 surface-0"},be={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},ge={class:"flex gap-2"},_e={class:"p-input-icon-left"},xe=L(()=>t("i",{class:"pi pi-search"},null,-1)),ye={class:"font-medium"},we={class:"line-clamp-2",style:{"max-width":"300px"}},ke={class:"flex gap-2"},$e=L(()=>t("div",{class:"text-center py-4"},[t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),t("p",{class:"text-xl"},"No departments found")],-1)),Ce={class:"flex justify-content-center align-items-center py-4"},Ve={class:"flex align-items-center justify-content-center"},De=L(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Te=L(()=>t("b",null,"this department",-1)),Se={class:"flex flex-column gap-2"},Le={class:"w-full text-right",for:"title"},Pe={key:0,class:"mt-1 mb-3 text-red-500"},Ne={class:"flex flex-column gap-2 mt-3"},Re={class:"w-full text-right",for:"description"},Ue={key:0,class:"mt-1 mb-3 text-red-500"},Be={class:"w-full text-center mt-4"},Ie={class:"flex flex-column gap-2"},Me={class:"w-full text-right",for:"title"},ze={key:0,class:"mt-1 mb-3 text-red-500"},je={class:"flex flex-column gap-2 mt-3"},qe={class:"w-full text-right",for:"description"},Ae={key:0,class:"mt-1 mb-3 text-red-500"},Fe={class:"w-full text-center mt-4"},Ee={__name:"index",setup(k){const $=ae();se();const F=n({}),C=n(!0);n({});const c=n(""),I=n(null),_=n(!1),V=n(""),M=n(null),z=n(null),D=n({}),v=n(!1),i=n({}),f=n(!1),P=n(!1),N=n(!1);oe(()=>{X()});const x=()=>{C.value=!0,g.get("/api/department").then(e=>{C.value=!1,I.value=e.data.data}).catch(()=>{C.value=!1,$.add({severity:"error",summary:"Error",detail:"Failed to load departments",life:3e3})}),g.get("/api/employees").then(e=>{F.value=e.data.data})};ne(()=>{x()});const E=e=>{g.get(`/api/department/${e}`).then(a=>{i.value=a.data.data}),V.value=e,f.value=!f.value},G=()=>{g.put(`/api/department/${V.value}`,i.value).then(e=>{x(),f.value=!f.value,$.add({severity:"success",summary:"Successful",detail:"Department updated successfully",life:3e3}),i.value={}}).catch(e=>{c.value=e.response.data.errors})},H=()=>{v.value=!v.value,i.value={}},W=e=>{_.value=!0,V.value=e},O=()=>{g.post("/api/department",i.value).then(e=>{x(),v.value=!v.value,$.add({severity:"success",summary:"Successful",detail:"Department created successfully",life:3e3}),i.value={}}).catch(e=>{c.value=e.response.data.errors})},J=()=>{g.delete(`/api/department/${V.value}`).then(e=>{_.value=!1,x(),$.add({severity:"success",summary:"Successful",detail:"Department deleted successfully",life:3e3})}).catch(()=>{})},K=()=>{P.value=!0,z.value.exportCSV(),setTimeout(()=>{P.value=!1},1e3)},Q=()=>{N.value=!0;const e=document.querySelector(".p-datatable-wrapper").cloneNode(!0);document.body.innerHTML,e.querySelectorAll(".p-button").forEach(R=>R.remove());const o=window.open("","_blank");o.document.write(`
    <html>
      <head>
        <title>Departments Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Departments Report</h1>
        ${e.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),o.document.close(),o.focus(),setTimeout(()=>{o.print(),o.close(),N.value=!1},500)},X=()=>{D.value={global:{value:null,matchMode:ie.CONTAINS}}};return(e,a)=>{const o=u("Button"),R=u("Toolbar"),Y=u("Toast"),U=u("InputText"),T=u("Column"),Z=u("ProgressSpinner"),ee=u("DataTable"),B=u("Dialog"),j=u("Textarea"),y=q("can"),te=q("tooltip");return h(),w("div",ue,[t("div",pe,[t("div",me,[l(R,{class:"mb-4"},{start:d(()=>[t("h2",ve,r(e.$t("Departments")),1)]),end:d(()=>[t("div",fe,[l(o,{label:e.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:N.value,onClick:Q},null,8,["label","loading"]),b(l(o,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:P.value,onClick:K},null,8,["label","loading"]),[[y,"department list"]]),b(l(o,{label:e.$t("department_add"),icon:"pi pi-plus",class:"p-button-success",onClick:H},null,8,["label"]),[[y,"department create"]])])]),_:1}),l(Y),t("div",he,[b((h(),de(ee,{ref_key:"dt",ref:z,selection:M.value,"onUpdate:selection":a[1]||(a[1]=s=>M.value=s),value:I.value,loading:C.value,"data-key":"id",paginator:!0,rows:10,filters:D.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:d(()=>[t("div",be,[t("div",ge,[t("span",_e,[xe,l(U,{modelValue:D.value.global.value,"onUpdate:modelValue":a[0]||(a[0]=s=>D.value.global.value=s),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),b(l(o,{icon:"pi pi-refresh",class:"p-button-text",onClick:x},null,512),[[te,"Refresh data",void 0,{top:!0}]])])])]),empty:d(()=>[$e]),loading:d(()=>[t("div",Ce,[l(Z,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:d(()=>[l(T,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(T,{field:"title",header:e.$t("title"),sortable:!0},{body:d(s=>[t("span",ye,r(s.data.title),1)]),_:1},8,["header"]),l(T,{field:"description",header:e.$t("description"),sortable:!0},{body:d(s=>[t("div",we,r(s.data.description||"--"),1)]),_:1},8,["header"]),l(T,{"header-style":"min-width:10rem;"},{body:d(s=>[t("div",ke,[b(l(o,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:p=>E(s.data.id)},null,8,["onClick"]),[[y,"department edit"]]),b(l(o,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:p=>W(s.data.id)},null,8,["onClick"]),[[y,"department delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[y,"department list"]])]),l(B,{visible:_.value,"onUpdate:visible":a[3]||(a[3]=s=>_.value=s),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:d(()=>[l(o,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[2]||(a[2]=s=>_.value=!1)},null,8,["label"]),l(o,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:J},null,8,["label"])]),default:d(()=>[t("div",Ve,[De,t("span",null,[A(r(e.$t("remove_item"))+" ",1),Te,A("? ")])])]),_:1},8,["visible","header"]),l(B,{visible:v.value,"onUpdate:visible":a[6]||(a[6]=s=>v.value=s),style:{width:"450px"},header:e.$t("Add Department"),modal:!0},{default:d(()=>{var s,p;return[t("div",Se,[t("label",Le,r(e.$t("title")),1),l(U,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:i.value.title,"onUpdate:modelValue":a[4]||(a[4]=m=>i.value.title=m),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(s=c.value)!=null&&s.title?(h(),w("div",Pe,r(c.value.title[0]),1)):S("",!0)]),t("div",Ne,[t("label",Re,r(e.$t("description")),1),l(j,{modelValue:i.value.description,"onUpdate:modelValue":a[5]||(a[5]=m=>i.value.description=m),autoResize:!0,rows:"5",cols:"30",class:"w-full bg-[#f7f5f5]",placeholder:e.$t("description")},null,8,["modelValue","placeholder"]),(p=c.value)!=null&&p.description?(h(),w("div",Ue,r(c.value.description[0]),1)):S("",!0)]),t("div",Be,[l(o,{onClick:O,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),l(B,{visible:f.value,"onUpdate:visible":a[9]||(a[9]=s=>f.value=s),style:{width:"450px"},header:e.$t("Update Department"),modal:!0},{default:d(()=>{var s,p;return[t("div",Ie,[t("label",Me,r(e.$t("title")),1),l(U,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:i.value.title,"onUpdate:modelValue":a[7]||(a[7]=m=>i.value.title=m),placeholder:e.$t("title")},null,8,["modelValue","placeholder"]),(s=c.value)!=null&&s.title?(h(),w("div",ze,r(c.value.title[0]),1)):S("",!0)]),t("div",je,[t("label",qe,r(e.$t("description")),1),l(j,{modelValue:i.value.description,"onUpdate:modelValue":a[8]||(a[8]=m=>i.value.description=m),autoResize:!0,rows:"5",cols:"30",class:"w-full bg-[#f7f5f5]",placeholder:e.$t("description")},null,8,["modelValue","placeholder"]),(p=c.value)!=null&&p.description?(h(),w("div",Ae,r(c.value.description[0]),1)):S("",!0)]),t("div",Fe,[l(o,{onClick:G,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])])])}}},He=le(Ee,[["__scopeId","data-v-985d5124"]]);export{He as default};
