import{_ as j,m as q,a1 as z,q as t,aj as A,a2 as L,ak as O,r as h,al as k,i as I,o as l,d as c,e,t as p,f as n,F as $,x as D,g as S,a3 as P,c as m,y as R,z as G}from"./main-f45b4568.js";import{s as H}from"./editor.esm-920d81cb.js";const f=d=>(R("data-v-d1859873"),d=d(),G(),d),J={class:"permissions-container"},K={class:"header-container"},Q={class:"page-title"},W={class:"search-container"},X={class:"p-input-icon-left"},Y=f(()=>e("i",{class:"pi pi-search"},null,-1)),Z={class:"permissions-grid"},ee={class:"category-header"},se=f(()=>e("i",{class:"pi pi-lock category-icon"},null,-1)),te={class:"permission-list"},oe={class:"permission-info"},ie=f(()=>e("i",{class:"pi pi-key permission-icon"},null,-1)),ae={class:"permission-name"},ne={class:"dialog-content"},le={class:"flex flex-column gap-2"},ce={class:"dialog-label",for:"username"},de={__name:"Index",setup(d){const C=q();z();const g=t(!0),b=t({}),r=t(""),u=t(null),i=t(!1);t(!1),t(""),t(null),t(null);const w=t({});t(!1),t({}),t(!1),A(()=>{F()});const x=s=>{m.get("/api/permissions").then(o=>{g.value=!1,u.value=o.data.permissions})},B=s=>{m.get(`/api/permissions?search=${s}`).then(o=>{g.value=!1,u.value=o.data.permissions})},V=()=>{m.put(`/api/permissions/${b.value.id}/edit`,{description:r.value}).then(s=>{x(),i.value=!i.value,C.add({severity:"success",summary:"Success",detail:"Permission updated",life:3e3})})};L(()=>{x()});const M=s=>{i.value=!i.value,r.value=s.description,b.value=s},F=()=>{w.value={global:{value:null,matchMode:O.CONTAINS}}};return(s,o)=>{const N=h("InputText"),_=h("Button"),T=h("Dialog"),U=k("tooltip"),E=k("can");return I((l(),c("div",J,[e("div",K,[e("h1",Q,p(s.$t("permissions")),1),e("div",W,[e("span",X,[Y,n(N,{"onUpdate:modelValue":B,placeholder:s.$t("search"),class:"search-input"},null,8,["placeholder"])])])]),e("div",Z,[(l(!0),c($,null,D(u.value,(a,y)=>(l(),c("div",{class:"permission-category",key:y},[e("div",ee,[e("h3",null,p(y),1),se]),e("div",te,[(l(!0),c($,null,D(a,v=>(l(),c("div",{class:"permission-item",key:v.id},[e("div",oe,[ie,e("span",ae,p(v.name),1)]),I(n(_,{icon:"pi pi-pencil",class:"p-button-rounded p-button-text edit-btn",onClick:re=>M(v)},null,8,["onClick"]),[[U,"Edit description",void 0,{top:!0}]])]))),128))])]))),128))]),n(T,{visible:i.value,"onUpdate:visible":o[2]||(o[2]=a=>i.value=a),style:{width:"550px"},header:s.$t("update_description"),modal:!0,class:"description-dialog"},{footer:S(()=>[n(_,{label:s.$t("cancel"),icon:"pi pi-times",class:"p-button-text p-button-danger",onClick:o[1]||(o[1]=a=>i.value=!1)},null,8,["label"]),n(_,{label:s.$t("save"),icon:"pi pi-check",class:"p-button-text p-button-success",onClick:V},null,8,["label"])]),default:S(()=>[e("div",ne,[e("div",le,[e("label",ce,p(s.$t("description")),1),n(P(H),{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value=a),editorStyle:"height: 150px",class:"rich-text-editor"},null,8,["modelValue"])])])]),_:1},8,["visible","header"])])),[[E,"permissions list"]])}}},_e=j(de,[["__scopeId","data-v-d1859873"]]);export{_e as default};
