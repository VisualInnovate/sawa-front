import{_ as S,u as P,c as m,r as _,o as r,d as u,f as o,g as v,e as l,F as L,l as U,t as n,j as p,h as B,Y as N,w as I,n as f}from"./main-e9f01f56.js";import{C as M}from"./ChildTaps-bd3118bf.js";import{h as D}from"./moment-fbc5633a.js";const q={components:{ChildTaps:M},data(){return{child_id:P("child_id",Number),maxDate:new Date,details:[],evalate:{},error:{},days:[0,1,2,3,4,5,6],business_hours:[],submitted:!1,slots:[],delete_id:0,doctors:{},deleteDialog:!1,total_pages:0,current_page:0,updatedialog:!1,evaluate_types:[{name:"side profile",id:1},{name:"milestone",id:2},{name:"barrier",id:3},{name:"ablls",id:4},{name:"carolina",id:5}]}},methods:{opennew(){this.updatedialog=!this.updatedialog},getdoctor_evalte(e){m.post("api/evaluation-doctors",{evaluation_type:e}).then(t=>{this.doctors=t.data.doctors})},getDays(e){this.business_hours=this.doctors.find(t=>t.id==e).business_hours,console.log(this.business_hours)},gettimes(e){m.post("api/users/available/slots",{user_id:this.evalate.specialist_id,evaluation_type:this.evalate.evaluation_type,date:D(e).format("Y-MM-DD")}).then(t=>{this.slots=t.data.slots})},go_evaluate(e,t,c){t==2&&this.$router.push({name:"milestone-resulte",params:{id:c,evla_id:e}}),t==3&&this.$router.push({name:"barrier-resulte",params:{id:c}}),t==4&&this.$router.push({name:"ablls-resulte",params:{id:e}}),t==5&&this.$router.push({name:"carolina-resulte",params:{id:e}})},create(){var e,t,c,y,s;m.post("api/evaluation-request",{child_id:localStorage.getItem("child_id"),consultant_id:localStorage.getItem("user_id"),evaluation_type:this.evalate.evaluation_type,date:D(this.evalate.date).format("Y-MM-DD"),specialist_id:(e=this.evalate)==null?void 0:e.specialist_id,start_time:(c=(t=this.evalate)==null?void 0:t.Session_time)==null?void 0:c.start,end_time:(s=(y=this.evalate)==null?void 0:y.Session_time)==null?void 0:s.end}).then(d=>{this.updatedialog=!this.updatedialog,this.$toast.add({severity:"success",summary:this.$t("success_message"),detail:`${this.$t("element_add_success")}`,life:3e3}),this.$router.push({name:"children-request"})}).catch(d=>{this.$toast.add({severity:"error",summary:this.$t("error"),detail:`${this.$t("mission_error")}`,life:3e3})})},getusers(){m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations`).then(e=>{this.total_pages=e.data.evaluations.last_page+1,this.details=e.data.evaluations}).catch(e=>{})},deleteevalution(e){this.delete_id=e,this.deleteDialog=!this.deleteDialog},deleteAction(){m.delete(`api/evaluations/${this.delete_id}/delete`).then(e=>{this.getusers(),this.deleteDialog=!this.deleteDialog})},getdoctors(){m.get("api/doctors").then(e=>{this.doctors=e.data.doctors}).catch(e=>{})}},computed:{filteredDays(){const e=this.business_hours.map(t=>t.day);return this.days.filter(t=>!e.includes(t))}},watch:{current_page(e,t){console.log(`Counter changed from ${t} to ${e}`),m.get(`api/child/${localStorage.getItem("child_id")}/get/evaluations?page=${e}`).then(c=>{this.details=c.data.evaluations})}},mounted(){this.getusers(),this.getdoctors(),this.child_id=localStorage.getItem("child_id")}},T={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 p-4"},F={class:"shadow-md bg-slate-100 rounded-sm p-4 grid grid-cols-2"},Y={class:"flex py-2"},j={class:"my-auto font-bold"},z={class:"text-xl px-1 my-auto"},A={class:"flex py-2"},E={class:"my-auto font-bold"},R={class:"text-xl px-1 my-auto"},J={class:"flex py-2"},O={class:"my-auto font-bold"},G={class:"text-xl px-1 my-auto"},H={class:"flex py-2"},K={class:"my-auto font-bold"},Q={key:0,class:"text-xl px-1 my-auto"},W={key:1,class:"text-xl px-1 my-auto"},X={class:"text-center"},Z={class:"w-full pb-2 text-center"},$={key:0,class:"card"},ee={class:"flex align-items-center justify-content-center"},te=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),se={class:"flex flex-column gap-2 py-1"},le={class:"w-full text-right",for:"username"},ie={key:0,class:"flex flex-column gap-2 py-1"},oe={class:"w-full text-right",for:"username"},ae={key:1,class:"flex flex-column gap-2"},ne={class:"w-full text-right",for:"username"},de={key:0,class:"mt-1 mb-5 text-red-500"},re={key:2,class:"flex flex-column gap-2 py-1"},ue={class:"w-full text-right",for:"username"},ce={key:0,class:"mt-1 mb-5 text-red-500"},pe={class:"w-full text-center"};function me(e,t,c,y,s,d){const k=_("ChildTaps"),h=_("Button"),w=_("Paginator"),x=_("Dialog"),b=_("Dropdown"),C=_("Calendar"),V=_("toast");return r(),u("div",null,[o(k),o(N,null,{default:v(()=>[l("div",T,[(r(!0),u(L,null,U(s.details.data,i=>{var g;return r(),u("div",F,[l("div",null,[l("div",Y,[l("h3",j,n(e.$t("اسم التقييم"))+" :",1),l("p",z,n(i.title),1)]),l("div",A,[l("h3",E,n(e.$t("تاريخ التقييم"))+" :",1),l("p",R,n(i.date),1)]),l("div",J,[l("h3",O,n(e.$t("اسم المقييم"))+" :",1),l("p",G,n((g=i.specialist)==null?void 0:g.name),1)]),l("div",H,[l("h3",K,n(e.$t(" حالة التقييم"))+" :",1),i.status==1?(r(),u("p",Q," منتهي")):p("",!0),i.status==0?(r(),u("p",W," تحت التقييم ")):p("",!0)])]),l("div",X,[o(h,{onClick:a=>d.go_evaluate(i.id,i.type,i.child_id),class:"details m-auto"},{default:v(()=>[B(" نتائج التقييم")]),_:2},1032,["onClick"]),o(h,{icon:"pi pi-trash",onClick:a=>d.deleteevalution(i.id,i.child_id),class:"delete m-auto"},null,8,["onClick"])])])}),256))]),l("div",Z,[s.details.data!=[]?(r(),u("div",$,[o(w,{first:s.current_page,"onUpdate:first":t[0]||(t[0]=i=>s.current_page=i),rows:1,totalRecords:s.total_pages,rowsPerPageOptions:[10,20,30],template:{default:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  JumpToPageDropdown"}},null,8,["first","totalRecords"])])):p("",!0)])]),_:1}),l("div",null,[o(x,{visible:s.deleteDialog,"onUpdate:visible":t[2]||(t[2]=i=>s.deleteDialog=i),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:v(()=>[o(h,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[1]||(t[1]=i=>s.deleteDialog=!1)},null,8,["label"]),o(h,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:d.deleteAction},null,8,["label","onClick"])]),default:v(()=>[l("div",ee,[te,l("span",null,n(e.$t("هل انت متاكد من ازالة هذا العنصر"))+" >?",1)])]),_:1},8,["visible","header"]),o(x,{visible:s.updatedialog,"onUpdate:visible":t[10]||(t[10]=i=>s.updatedialog=i),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:v(()=>{var i,g;return[l("form",{onSubmit:t[9]||(t[9]=I((...a)=>d.create&&d.create(...a),["prevent"])),class:""},[l("div",se,[l("label",le,n(e.$t("evalute_type")),1),o(b,{"onUpdate:modelValue":[d.getdoctor_evalte,t[3]||(t[3]=a=>s.evalate.evaluation_type=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.evaluation_type,"option-value":"id",filter:"",options:s.evaluate_types,optionLabel:"name",class:f(["w-full",{"p-invalid":s.submitted&&!s.evalate.evaluation_type}])},null,8,["onUpdate:modelValue","modelValue","options","class"])]),s.evalate.evaluation_type?(r(),u("div",ie,[l("label",oe,n(e.$t("Name_evaluator")),1),o(b,{"onUpdate:modelValue":[d.getDays,t[4]||(t[4]=a=>s.evalate.specialist_id=a)],required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.specialist_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",class:f(["w-full",{"p-invalid":s.submitted&&!s.evalate.specialist_id}])},null,8,["onUpdate:modelValue","modelValue","options","class"])])):p("",!0),s.evalate.specialist_id?(r(),u("div",ae,[l("label",ne,n(e.$t("Evaluation_date")),1),o(C,{"onUpdate:modelValue":[t[5]||(t[5]=a=>d.gettimes(a)),t[6]||(t[6]=a=>s.evalate.date=a)],disabledDays:d.filteredDays,style:{width:"100%"},showButtonBar:"",modelValue:s.evalate.date,modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":s.submitted&&!s.evalate.date}),minDate:s.maxDate},null,8,["disabledDays","modelValue","class","minDate"]),(i=s.error)!=null&&i.date?(r(),u("div",de,n(s.error.date[0]),1)):p("",!0)])):p("",!0),s.evalate.date?(r(),u("div",re,[l("label",ue,n(e.$t("hour_evaluator")),1),o(b,{required:"",id:"pv_id_1",style:{direction:"ltr !important","text-align":"center !important"},modelValue:s.evalate.Session_time,"onUpdate:modelValue":t[7]||(t[7]=a=>s.evalate.Session_time=a),filter:"",options:s.slots,optionLabel:"key",class:f([{"p-invalid":s.submitted&&!s.evalate.Session_time},"w-full"])},null,8,["modelValue","options","class"]),(g=s.error)!=null&&g.specialist_id?(r(),u("div",ce,n(s.error.specialist_id[0]),1)):p("",!0)])):p("",!0),l("div",pe,[o(h,{type:"submit",onClick:t[8]||(t[8]=a=>s.submitted=!0),class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])],32)]}),_:1},8,["visible","header"])]),o(V)])}const ve=S(q,[["render",me]]);export{ve as default};
