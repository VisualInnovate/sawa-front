import{_ as L,H as U,a9 as B,b5 as j,T as V,z as a,E as _,l as f,o as r,e as n,h as i,t as o,q as u,x as l,y as p,X as Y,a4 as N,i as k,a1 as I,a6 as q,$ as R,n as A,F as w,B as G,f as O,Q as P,R as H}from"./main-393991d5.js";import{F as W,i as z,a as K,b as Q,c as X,l as D}from"./ar-9de7829d.js";import{V as J}from"./VDialog-8943d84f.js";import{V as Z}from"./VForm-411831ad.js";const $={components:{FullCalendar:W,Calendar:U},data(){return{doctors:{},admin_id:"",deleteDialog:!1,setiontype:"",programes:{},child:{},rooms:{},error:{},doctors:{},isSubmitting:!1,programe_type:{},toast:B(),room_id:"",slot_id:"",student:{},capasityboj:{},capasity:[],maxcapsity:"",treaments:{},time_sloteobj:{},time_slots:[],time_slotename:[],buttomaddcal:!0,timeshow:!1,FullCalendarshow:!1,langStore:j(),visible:!1,create_visible:!1,event_id:null,creat_event:V(!1),updat_event:V(!1),event_title:"",start_event:"",end_event:"",loading:!1,modal_text:"",time_start:"",time_end:"",opts:{plugins:[z,K,Q,X],initialView:"dayGridMonth",footerToolbar:!0,valid:!1,buttonIcons:!1,locale:null,validRange:{start:new Date},selectable:!0,droppable:!1,editable:!0,selectHelper:!0,validRange:{start:new Date},headerToolbar:{center:"prev next today",left:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},eventsTimeFormat:{hour:"2-digit",minute:"2-digit",second:"2-digit"},eventDrop:function(e){console.log(e.event.id),a.post(`/api/calender/${e.event.id}/update`,{start:e.event.start,end:e.event.end}).then(t=>{console.log(t.data.k)})},eventDrop:function(e){a.post(`/api/calender/${e.event.id}/update`,{title:e.event.title,start:_(e.event.start).format("00:00:00 YYYY-MM-d"),end:_(e.event.end).format("00:00:00 YYYY-MM-d")}).then(t=>{console.log(t.data.k)})},eventClick:(function(e){this.event_id=e.event.id,this.event_title=e.event.title,this.modal_text=this.$t("update_event"),this.creat_event=!1,this.updat_event=!0,this.handleEventClick(e),this.time_slotename.push(e.event.title),console.log(this.time_slotename),this.start_event=_(e.event.start).format("YYYY-MM-DD"),this.end_event=_(e.event.end).format("YYYY-MM-DD"),console.log(this.start_event)}).bind(this),select:(function(e){console.log(e),this.event_title="",this.modal_text=this.$t("create_event"),this.creat_event=!0,this.updat_event=!1,this.visible=!0,console.log(e),this.start_event=_(e.start).format("YYYY-MM-DD"),this.end_event=_(e.end).format("YYYY-MM-DD"),console.log(e.backgroundColor)}).bind(this)}}},methods:{getAllDocto(){a.get("api/doctors").then(e=>{this.doctors=e.data.doctors,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},handleEventClick(e){this.deleteDialog=!this.deleteDialog,console.log(e);const t=e.event;console.log(t),t.setProp("backgroundColor","green"),t.setProp("visibility","hidden")},Therapeutic(){this.$router.push({name:"student-programe"})},programetype(){return this.roomType=[{name:this.$t("diurnal"),value:0},{name:this.$t("Clinics"),value:1},{name:this.$t("house"),value:2}]},deletearray(){this.capasity.length=this.capasity.length-1},addarray(){a.get(`/api/treatment/${this.student.Type}`).then(e=>{this.capasityboj={treatment_id:this.student.Type,sessions_number:this.student.sessions_number,name:e.data.data.name},this.capasity.push(this.capasityboj),this.maxcapsity=this.maxcapsity-this.student.sessions_number,this.student.sessions_number=""}),console.log(this.capasity)},getprograme(e){this.capasity=[],this.student.sessions_number="",a.get(`/api/program/${this.student.program_id}`).then(t=>{this.maxcapsity=t.data.data.individual_sessions,this.setiontype=t.data.data.session_type}),a.get(`api/users/filter/${e}`).then(t=>{this.doctors=t.data.data}),a.get(`api/slot/filter/${e}`).then(t=>{this.opts.events=t.data.data.map(m=>({title:m.start_event+"T"+m.to,start:m.start_event+"T"+m.from,end:m.end_event+"T"+m.to,id:m.id,from:m.from}))})},getalltreatement(){a.get("api/treatment/all").then(e=>{this.treaments=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},getallchild(){a.get("api/child").then(e=>{this.child=e.data.children,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},pushtimeslot(e){console.log(e),this.time_sloteobj={time_slot_id:this.event_id,doctor_id:e}},addtimedoctor(){console.log(this.time_sloteobj),this.time_slots.push(this.time_sloteobj),this.deleteDialog=!this.deleteDialog},cansel(){this.pushtimeslot(),this.addtimedoctor()},getallprogrames(){a.get("api/program").then(e=>{this.programes=e.data.data,console.log(this.doctors)}).catch(e=>{console.error("Error retrieving doctors:",e)})},createtreatment(){a.post("/api/student-program",{program_id:this.student.program_id,student_id:this.student.student_id,details:this.capasity,time_slots:this.time_slots}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3})}).catch(e=>{this.timeshow=!this.timeshow,console.log(e.response.data.errors.name),this.error=e.response.data.errors})},closeSuccessModal(){this.isSuccessModalOpen=!1},highlightSelectedDay(e){this.$store.state.calendar.selectedDay===e.dateStr&&e.el.classList.add("selected-day")},loo(){localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=D},goBack(){this.$router.go(-1)},deletevent(e){console.log(e),a.delete(`/api/calender/${this.event_id}/delete`).then(t=>{}),this.update(),setTimeout(()=>{this.visible=!1,this.event_title=null,this.loading=!1},700)},updateevent(){a.post(`/api/calender/${this.event_id}/update`,{title:this.event_title,start:_(this.start_event).format(" YYYY-MM-d"),end:_(this.end_event).format(" YYYY-MM-d")}).then(e=>{}),setTimeout(()=>{this.visible=!1,this.event_title=null,this.event_id=null,this.loading=!1},700)},createvent(){this.loading=!0,a.post("/api/slot",{title:this.event_title,date:this.start_event,from:this.time_start,to:this.time_end,room_id:this.room_id}).then(e=>{this.$toast.add({severity:"success",summary:"Success Message",detail:"Success",life:3e3}),this.visible=!1,e.status!=200&&(this.valid=!0)}).catch(e=>{this.error=e.response.data.errors}),setTimeout(()=>{this.update(),this.event_title=null,this.start_event=null,this.end_event=null,this.create_visible=!1,this.loading=!1},2e3)},update(){a.get("/api/slot/student-program").then(e=>{console.log(e.data.data),this.opts.events=e.data.data.map(t=>({title:t.start_event+"T"+t.to,start:t.start_event+"T"+t.from,end:t.end_event+"T"+t.to,id:t.id,from:t.from}))})},refreshEvents(){this.$refs.calendar.$emit("refetch-events")}},mounted(){this.getallprogrames(),this.getallchild(),this.getalltreatement(),localStorage.appLang=="en"?console.log("ascasc"):this.opts.locale=D,console.log(localStorage.appLang),console.log(this.opts)},watch:{"langStore.appLang"(e){e=="en"?this.opts.locale="":this.opts.locale=D,this.update()}}},S=e=>(P("data-v-47abebb8"),e=e(),H(),e),ee={key:0,class:"loader"},te={class:"flex flex-column gap-2"},se={for:"username"},oe={key:0,class:"mt-1 mb-5 text-red-500"},le={class:"flex flex-column gap-2"},ie={for:"username"},ae={key:0,class:"mt-1 mb-5 text-red-500"},re={key:0,class:"flex flex-column gap-2"},ne={for:"username"},de={key:0,class:"mt-1 mb-5 text-red-500"},ce={key:1,class:"flex flex-column gap-2"},ue={for:"username"},me={class:"flex"},pe={key:0,class:"mt-1 mb-5 text-red-500"},he={class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-1 gap-4"},_e={class:"px-[2%] py-1 flex"},ge={class:"px-4"},fe={key:0,class:"mt-1 mb-5 text-red-500"},ve=S(()=>i("div",{class:"card flex justify-content-center"},null,-1)),be={class:"flex flex-column gap-2 w-full"},ye=S(()=>i("small",{id:"username-help"},null,-1)),ke={class:"flex flex-column gap-2"},De={for:"username"},Ce={key:0,class:"mt-1 mb-5 text-red-500"};function xe(e,t,m,Ve,s,d){const y=f("Dropdown"),T=f("InputNumber"),v=f("Button"),M=f("Toast"),F=f("FullCalendar"),E=f("Dialog");return r(),n(w,null,[i("div",null,[i("div",null,[i("p",{class:"text-xl p-4 text-[#135C65] cursor-pointer font-bold",onClick:t[0]||(t[0]=h=>d.Therapeutic())},o(e.$t("add_sp")),1)]),s.loading?(r(),n("div",ee)):u("",!0)]),l(Y,null,{default:p(()=>{var h;return[i("div",null,[l(J,{modelValue:e.isSuccessModalOpen,"onUpdate:modelValue":t[1]||(t[1]=c=>e.isSuccessModalOpen=c),"max-width":"400px"},{default:p(()=>[l(Y,null,{default:p(()=>[l(N,null,{default:p(()=>[k(o(e.$t("Success!")),1)]),_:1}),l(I,null,{default:p(()=>[k(o(e.$t("Data seeded successfully!")),1)]),_:1}),l(q,null,{default:p(()=>[l(R,{onClick:d.closeSuccessModal,color:"success"},{default:p(()=>[k(o(e.$t("OK")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Z,{class:"p-[2%] bg-[#FDFDFD] grid grid-cols-1 lg:grid-cols-2 gap-4",ref:"myForm",onSubmit:A(e.seedData,["prevent"])},{default:p(()=>{var c,b,C,x;return[i("div",te,[i("label",se,o(e.$t("ProgramName")),1),l(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.program_id,"onUpdate:modelValue":[t[2]||(t[2]=g=>s.student.program_id=g),d.getprograme],"option-value":"id",filter:"",options:s.programes,optionLabel:"name",placeholder:e.$t("ProgramName"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(c=s.error)!=null&&c.program_id?(r(),n("div",oe,o(s.error.program_id[0]),1)):u("",!0)]),i("div",le,[i("label",ie,o(e.$t("child_name")),1),l(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.student_id,"onUpdate:modelValue":[t[3]||(t[3]=g=>s.student.student_id=g),e.getAllDoctor],"option-value":"id",filter:"",options:s.child,optionLabel:"name",placeholder:e.$t("child_name"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","onUpdate:modelValue","options","placeholder"]),(b=s.error)!=null&&b.student_id?(r(),n("div",ae,o(s.error.student_id[0]),1)):u("",!0)]),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",re,[i("label",ne,o(e.$t("Typetreatment"))+"-",1),l(y,{required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.student.Type,"onUpdate:modelValue":t[4]||(t[4]=g=>s.student.Type=g),"option-value":"id",filter:"",options:s.treaments,optionLabel:"name",placeholder:e.$t("Typetreatment"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["modelValue","options","placeholder"]),(C=s.error)!=null&&C.details?(r(),n("div",de,o(s.error.details[0]),1)):u("",!0)])):u("",!0),s.student.program_id&&s.maxcapsity>0&&s.setiontype!=1?(r(),n("div",ce,[i("label",ue,o(e.$t("Sn"))+" ("+o(s.maxcapsity)+")",1),i("div",me,[l(T,{max:s.maxcapsity,min:1,required:"",class:"bg-[#f7f5f5] w-[90%]",modelValue:s.student.sessions_number,"onUpdate:modelValue":t[5]||(t[5]=g=>s.student.sessions_number=g),placeholder:e.$t("Sn")},null,8,["max","modelValue","placeholder"]),l(v,{onClick:d.addarray,class:"create m-auto s",icon:"pi pi-plus"},null,8,["onClick"]),l(v,{onClick:d.deletearray,class:"delete m-auto s",icon:"pi pi-minus"},null,8,["onClick"])]),(x=s.error)!=null&&x.details?(r(),n("div",pe,o(s.error.details[0]),1)):u("",!0)])):u("",!0)]}),_:1},8,["onSubmit"]),i("div",he,[i("div",_e,[i("ol",null,[(r(!0),n(w,null,G(s.capasity,(c,b)=>(r(),n("li",{key:b},o(b+1)+" - "+o(c.name)+" - "+o(e.$t("Sn"))+" - "+o(c.sessions_number),1))),128))])])]),l(M),i("div",ge,[l(F,{options:s.opts,onChange:t[6]||(t[6]=c=>d.refreshEvents()),ref:"fullCalendar",dayRender:d.highlightSelectedDay},null,8,["options","dayRender"]),(h=s.error)!=null&&h.time_slots?(r(),n("div",fe,o(s.error.time_slots[0]),1)):u("",!0),ve,i("div",be,[s.buttomaddcal?(r(),O(v,{key:0,onClick:d.createtreatment,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])):u("",!0),ye])])])]}),_:1}),l(E,{visible:s.deleteDialog,"onUpdate:visible":t[8]||(t[8]=h=>s.deleteDialog=h),style:{width:"450px"},header:e.$t("submit"),modal:!0},{default:p(()=>{var h;return[i("div",ke,[i("label",De,o(e.$t("doctor")),1),l(y,{"onUpdate:modelValue":[d.pushtimeslot,t[7]||(t[7]=c=>s.admin_id=c)],required:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:s.admin_id,"option-value":"id",filter:"",options:s.doctors,optionLabel:"name",placeholder:e.$t("doctor"),class:"w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem"},null,8,["onUpdate:modelValue","modelValue","options","placeholder"]),(h=s.error)!=null&&h.admin_id?(r(),n("div",Ce,o(s.error.admin_id[0]),1)):u("",!0),l(v,{onClick:d.addtimedoctor,class:"create m-auto w-full lg:w-[50%]",label:e.$t("submit")},null,8,["onClick","label"])]),l(v,{onClick:d.cansel,style:{position:"absolute",top:"15px",right:"15px"},icon:"pi pi-times",severity:"danger",rounded:"","aria-label":"Cancel"},null,8,["onClick"])]}),_:1},8,["visible","header"])],64)}const Me=L($,[["render",xe],["__scopeId","data-v-47abebb8"]]);export{Me as default};
