import{a9 as W,aa as X,T as o,ab as Y,a2 as Z,ac as ee,l as c,ad as le,o as v,e as b,h as a,x as t,y as u,w,f as se,t as r,i as S,q as k,z as _}from"./main-e7ab5e9a.js";const te={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},ae={class:"col-12"},oe={class:"my-2"},ne={style:{},class:"shadow-xl"},ie={class:"flex w-full justify-between align-items-center"},re={class:"m-0 my-auto"},ue={class:"block mt-2 md:mt-0 p-input-icon-left"},de=a("i",{class:"pi pi-search"},null,-1),ce={class:"flex align-items-center justify-content-center"},me=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),pe={key:0},ve={class:"flex flex-column gap-2 py-1"},fe={class:"w-full text-right",for:"username"},he={key:0,class:"mt-1 mb-5 text-red-500"},be={class:"flex flex-column gap-2 py-1"},_e={class:"w-full text-right",for:"username"},ge={key:0,class:"mt-1 mb-5 text-red-500"},ye={class:"w-full text-center"},we={class:"flex flex-column gap-2"},ke={class:"w-full text-right",for:"username"},$e={key:0,class:"mt-1 mb-5 text-red-500"},xe={class:"flex flex-column gap-2"},Ve={class:"w-full text-right",for:"username"},Ce={key:0,class:"mt-1 mb-5 text-red-500"},Se={class:"w-full text-center"},Pe={__name:"Index",setup(Te){const T=W();X();const D=o({}),P=o(!0),B=o({}),d=o(""),U=o(null);o(!1);const g=o(!1),$=o(""),M=o(null),j=o(null),x=o({}),f=o(!1),n=o({name:"",permissions:[]}),h=o(!1);Y(()=>{G()});const V=()=>{_.post("/api/roles").then(e=>{U.value=e.data.roles.data,console.log(U.value)}),_.post("/api/permissions").then(e=>{D.value=e.data.permissions,P.value=!1})};Z(()=>{V()});const R=e=>{_.get(`/api/roles/${e}`).then(l=>{P.value=!1,n.value.name=l.data.role.name;for(let i=0;i<l.data.role.permissions.length;i++)l.data.role.permissions[i].id,n.value.permissions.push(l.data.role.permissions[i].id)}),console.log(n.value.permissions),$.value=e,h.value=!h.value},q=()=>{_.put(`/api/roles/${$.value}/edit`,n.value).then(e=>{console.log(e.data),V(),h.value=!h.value,T.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=o({})}).catch(e=>{d.value=e.response.data.errors})},F=()=>{f.value=!f.value},z=e=>{console.log(e),g.value=!0,$.value=e},A=()=>{_.post("/api/roles/create",n.value).then(e=>{console.log(e.data),V(),f.value=!f.value,T.add({severity:"success",summary:"Successful",detail:" Successful",life:3e3}),skill.value=o({})}).catch(e=>{d.value=e.response.data.errors})},E=()=>{_.delete(`/api/roles/${$.value}/delete`).then(e=>{console.log(e.data),V(),g.value=!1,T.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},O=()=>{j.value.exportCSV()},G=()=>{x.value={global:{value:null,matchMode:ee.CONTAINS}}};return(e,l)=>{const i=c("Button"),H=c("Toolbar"),J=c("Toast"),L=c("InputText"),C=c("Column"),K=c("DataTable"),N=c("Dialog"),I=c("MultiSelect"),Q=c("va-card"),y=le("can");return v(),b("div",te,[a("div",ae,[t(Q,{class:"card"},{default:u(()=>[t(H,{class:"mb-4 shadow-md"},{start:u(()=>[a("div",oe,[w(t(i,{label:e.$t("roles"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:F},null,8,["label"]),[[y,"roles create"]])])]),end:u(()=>[w(t(i,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:l[0]||(l[0]=s=>O(s))},null,8,["label"]),[[y,"roles list"]])]),_:1}),t(J),a("div",ne,[w((v(),se(K,{ref_key:"dt",ref:j,selection:M.value,"onUpdate:selection":l[2]||(l[2]=s=>M.value=s),value:U.value,loading:P.value,"data-key":"id",paginator:!0,rows:10,filters:x.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:u(()=>[a("div",ie,[a("h5",re,r(e.$t("roles")),1),a("div",null,[a("span",ue,[de,t(L,{modelValue:x.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=s=>x.value.global.value=s),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:u(()=>[t(C,{"selection-mode":"multiple","header-style":"width: 3rem"}),t(C,{field:"index",header:e.$t("index"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:u(s=>[S(r(s.data.id),1)]),_:1},8,["header"]),t(C,{field:"name",header:e.$t("name"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:u(s=>[S(r(s.data.name),1)]),_:1},8,["header"]),t(C,{"header-style":"min-width:10rem;"},{body:u(s=>[a("div",null,[w(t(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:m=>R(s.data.id)},null,8,["onClick"]),[[y,"roles edit"]]),w(t(i,{icon:"pi pi-trash",class:"delete mt-2",onClick:m=>z(s.data.id)},null,8,["onClick"]),[[y,"roles delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[y,"roles list"]]),t(N,{visible:g.value,"onUpdate:visible":l[4]||(l[4]=s=>g.value=s),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:u(()=>[t(i,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=s=>g.value=!1)},null,8,["label"]),t(i,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:E},null,8,["label"])]),default:u(()=>[a("div",ce,[me,B.value?(v(),b("span",pe,[S(r(e.$t("remove_item"))+" ",1),a("b",null,r(B.value.first_name),1),S("?")])):k("",!0)])]),_:1},8,["visible","header"]),t(N,{visible:f.value,"onUpdate:visible":l[7]||(l[7]=s=>f.value=s),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:u(()=>{var s,m;return[a("div",ve,[a("label",fe,r(e.$t("name")),1),t(L,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:n.value.name,"onUpdate:modelValue":l[5]||(l[5]=p=>n.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(s=d.value)!=null&&s.name?(v(),b("div",he,r(d.value.name[0]),1)):k("",!0)]),a("div",be,[a("label",_e,r(e.$t("permissions")),1),t(I,{modelValue:n.value.permissions,"onUpdate:modelValue":l[6]||(l[6]=p=>n.value.permissions=p),filter:"","option-value":"id",options:D.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=d.value)!=null&&m.name?(v(),b("div",ge,r(d.value.name[0]),1)):k("",!0)]),a("div",ye,[t(i,{onClick:A,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),t(N,{visible:h.value,"onUpdate:visible":l[10]||(l[10]=s=>h.value=s),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:u(()=>{var s,m;return[a("div",we,[a("label",ke,r(e.$t("name")),1),t(L,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:n.value.name,"onUpdate:modelValue":l[8]||(l[8]=p=>n.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(s=d.value)!=null&&s.name?(v(),b("div",$e,r(d.value.name[0]),1)):k("",!0)]),a("div",xe,[a("label",Ve,r(e.$t("permissions")),1),t(I,{modelValue:n.value.permissions,"onUpdate:modelValue":l[9]||(l[9]=p=>n.value.permissions=p),filter:"","option-value":"id",options:D.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=d.value)!=null&&m.permissions?(v(),b("div",Ce,r(d.value.permissions[0]),1)):k("",!0)]),a("div",Se,[t(i,{onClick:q,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Pe as default};
