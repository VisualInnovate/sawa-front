import{R as o,a7 as U,Q as g,a9 as M,S as D,r as v,o as c,d as r,f as d,e as s,w as y,t as h,G as p,F,B as O,i as B,bt as I,E as $,h as N,X as q,c as V}from"./main-273050ca.js";import"./moment-fbc5633a.js";const E={class:"card"},R={class:"w-full m-5"},W={class:"",for:"name"},Z={class:"field mx-5"},z=["onUpdate:modelValue","onClick"],G={class:"field mr-7 w-20"},L={key:0,class:"field mx-5"},Q=s("label",{class:"mx-5"},"Clock In",-1),X={key:1,class:"field mr-5"},j=s("label",{class:"mx-5"},"Clock In",-1),A={key:2,class:"field"},H=s("label",{class:"mx-2.5 w-10"},"Clock Out",-1),J={key:3,class:"field"},K=s("label",{class:"mx-5"},"Clock Out",-1),le={__name:"update",setup(P){o(""),o(!0),o(1),o({});const l=o({title:null,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,days:[]}),m=o(!1),f=U(),b=g(),k=M();o([]),o({});const w=o([{name:"Sunday",value:"Sunday"},{name:"Monday",value:"Monday"},{name:"Tuesday",value:"Tuesday"},{name:"Wednesday",value:"Wednesday"},{name:"Thursday",value:"Thursday"},{name:"Friday",value:"Friday"},{name:"Saturday",value:"Saturday"}]);o(),o([{name:"Normal Shift",value:"1"},{name:"24 Shift",value:"2"},{name:"directorate shift",value:"3"}]);const x=()=>{m.value=!0;let a=0;l.value.title||a++,l.value.days.forEach(t=>{t.week_end&&(!t.clock_out||!t.clock_in)&&a++}),!a&&(V.put(`/api/shifts/${f.params.id}`,l.value).then(t=>{k.add({severity:"success",summary:"Success",detail:"created Successfully",life:3e3}),b.go(-1),console.log(l.value)}).catch(t=>{k.add({severity:"error",summary:"Success",detail:t,life:3e3})}),console.log(l))},S=()=>{V.get(`/api/shifts/${f.params.id}`).then(a=>{const t=a.data.data.shift_days,_=w.value.map(u=>{const i=t.find(e=>e.day===u.name);return{day:u.name,clock_in:i?i.clock_in:null,clock_out:i?i.clock_out:null,week_end:i?i.week_end===1:!1}});l.value.title=a.data.data.title,l.value.days=_})};D(()=>{S()});const C=a=>{l.value.days[a].clock_in=null,l.value.days[a].clock_out=null};return(a,t)=>{const _=v("Toast"),u=v("InputText"),i=v("Button");return c(),r("div",null,[d(_),s("form",null,[d(q,{style:{"overflow-x":"scroll"}},{default:y(()=>[s("div",E,[s("div",R,[s("p",W,h(a.$t("title")),1),d(u,{modelValue:l.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.title=e),id:"name",required:"",class:p({"p-invalid":m.value&&!l.value.title})},null,8,["modelValue","class"])]),(c(!0),r(F,null,O(l.value.days,(e,T)=>(c(),r("div",{key:e.day,class:"flex align-items-center mb-2"},[s("div",Z,[B(s("input",{type:"checkbox",style:{border:"1px solid black"},"onUpdate:modelValue":n=>e.week_end=n,binary:!0,onClick:n=>C(T)},null,8,z),[[I,e.week_end]])]),s("div",G,h(e.day),1),e.week_end?(c(),r("div",X,[j,d(u,{type:"time",modelValue:e.clock_in,"onUpdate:modelValue":n=>e.clock_in=n,modelModifiers:{trim:!0},required:"",timeOnly:"",autofocus:"",hourFormat:"12",class:p({"p-invalid":m.value&&!e.clock_out})},null,8,["modelValue","onUpdate:modelValue","class"])])):(c(),r("div",L,[Q,d(u,{type:"time",modelValue:e.clock_in,"onUpdate:modelValue":n=>e.clock_in=n,modelModifiers:{trim:!0},timeOnly:"",disabled:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])])),e.week_end?(c(),r("div",J,[K,d(u,{type:"time",modelValue:e.clock_out,"onUpdate:modelValue":n=>e.clock_out=n,modelModifiers:{trim:!0},timeOnly:"",class:p(["w-28",{"p-invalid":m.value&&!e.clock_out}]),required:"",hourFormat:"12",autofocus:""},null,8,["modelValue","onUpdate:modelValue","class"])])):(c(),r("div",A,[H,d(u,{class:"w-28",type:"time",modelValue:e.clock_out,"onUpdate:modelValue":n=>e.clock_out=n,modelModifiers:{trim:!0},timeOnly:"",disabled:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]))]))),128)),d(i,{class:"create m-5",type:"submit",onClick:t[1]||(t[1]=$(e=>x(),["prevent"]))},{default:y(()=>[N("Submit")]),_:1})])]),_:1})])])}}};export{le as default};
