import{a8 as K,a9 as Q,S as o,aa as W,a1 as X,ab as Y,l as c,o as h,e as b,h as a,x as t,y as r,t as u,i as V,q as y,z as g}from"./main-e2500f66.js";const Z={class:"grid"},ee={class:"col-12"},le={class:"my-2"},se={style:{},class:"shadow-xl"},te={class:"flex w-full justify-between align-items-center"},ae={class:"m-0 my-auto"},oe={class:"block mt-2 md:mt-0 p-input-icon-left"},ne=a("i",{class:"pi pi-search"},null,-1),ie={class:"flex align-items-center justify-content-center"},ue=a("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),re={key:0},de={class:"flex flex-column gap-2 py-1"},ce={class:"w-full text-right",for:"username"},me={key:0,class:"mt-1 mb-5 text-red-500"},pe={class:"flex flex-column gap-2 py-1"},ve={class:"w-full text-right",for:"username"},fe={key:0,class:"mt-1 mb-5 text-red-500"},he={class:"w-full text-center"},be={class:"flex flex-column gap-2"},ge={class:"w-full text-right",for:"username"},_e={key:0,class:"mt-1 mb-5 text-red-500"},ye={class:"flex flex-column gap-2"},we={class:"w-full text-right",for:"username"},ke={key:0,class:"mt-1 mb-5 text-red-500"},$e={class:"w-full text-center"},Ce={__name:"Index",setup(xe){const C=K();Q();const S=o({}),T=o(!0),L=o({}),d=o(""),D=o(null);o(!1);const _=o(!1),w=o(""),N=o(null),M=o(null),k=o({}),v=o(!1),n=o({name:"",permissions:[]}),f=o(!1);W(()=>{E()});const $=()=>{g.post("/api/roles").then(e=>{D.value=e.data.roles.data,console.log(D.value)}),g.post("/api/permissions").then(e=>{S.value=e.data.permissions,T.value=!1})};X(()=>{$()});const j=e=>{g.get(`/api/roles/${e}`).then(l=>{T.value=!1,n.value.name=l.data.role.name;for(let i=0;i<l.data.role.permissions.length;i++)l.data.role.permissions[i].id,n.value.permissions.push(l.data.role.permissions[i].id)}),console.log(n.value.permissions),w.value=e,f.value=!f.value},I=()=>{g.put(`/api/roles/${w.value}/edit`,n.value).then(e=>{console.log(e.data),$(),f.value=!f.value,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3}),skill.value=o({})}).catch(e=>{d.value=e.response.data.errors})},R=()=>{v.value=!v.value},q=e=>{console.log(e),_.value=!0,w.value=e},F=()=>{g.post("/api/roles/create",n.value).then(e=>{console.log(e.data),$(),v.value=!v.value,C.add({severity:"success",summary:"Successful",detail:" Successful",life:3e3}),skill.value=o({})}).catch(e=>{d.value=e.response.data.errors})},z=()=>{g.delete(`/api/roles/${w.value}/delete`).then(e=>{console.log(e.data),$(),_.value=!1,C.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(()=>{})},A=()=>{M.value.exportCSV()},E=()=>{k.value={global:{value:null,matchMode:Y.CONTAINS}}};return(e,l)=>{const i=c("Button"),O=c("Toolbar"),G=c("Toast"),P=c("InputText"),x=c("Column"),H=c("DataTable"),U=c("Dialog"),B=c("MultiSelect"),J=c("va-card");return h(),b("div",Z,[a("div",ee,[t(J,{class:"card"},{default:r(()=>[t(O,{class:"mb-4 shadow-md"},{start:r(()=>[a("div",le,[t(i,{label:e.$t("roles"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:R},null,8,["label"])])]),end:r(()=>[t(i,{label:e.$t("export"),icon:"pi pi-upload",class:"export",onClick:l[0]||(l[0]=s=>A(s))},null,8,["label"])]),_:1}),t(G),a("div",se,[t(H,{ref_key:"dt",ref:M,selection:N.value,"onUpdate:selection":l[2]||(l[2]=s=>N.value=s),value:D.value,loading:T.value,"data-key":"id",paginator:!0,rows:10,filters:k.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25],"current-page-report-template":"Showing {first} to {last} of {totalRecords} products","responsive-layout":"scroll"},{header:r(()=>[a("div",te,[a("h5",ae,u(e.$t("roles")),1),a("div",null,[a("span",oe,[ne,t(P,{modelValue:k.value.global.value,"onUpdate:modelValue":l[1]||(l[1]=s=>k.value.global.value=s),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])])]),default:r(()=>[t(x,{"selection-mode":"multiple","header-style":"width: 3rem"}),t(x,{field:"index",header:e.$t("index"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:r(s=>[V(u(s.data.id),1)]),_:1},8,["header"]),t(x,{field:"name",header:e.$t("name"),sortable:!0,"header-style":"width:14%; min-width:10rem;",class:"ltr:text-justify"},{body:r(s=>[V(u(s.data.name),1)]),_:1},8,["header"]),t(x,{"header-style":"min-width:10rem;"},{body:r(s=>[a("div",null,[t(i,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:m=>j(s.data.id)},null,8,["onClick"]),t(i,{icon:"pi pi-trash",class:"delete mt-2",onClick:m=>q(s.data.id)},null,8,["onClick"])])]),_:1})]),_:1},8,["selection","value","loading","filters"]),t(U,{visible:_.value,"onUpdate:visible":l[4]||(l[4]=s=>_.value=s),style:{width:"450px"},header:e.$t("submit"),modal:!0},{footer:r(()=>[t(i,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:l[3]||(l[3]=s=>_.value=!1)},null,8,["label"]),t(i,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:z},null,8,["label"])]),default:r(()=>[a("div",ie,[ue,L.value?(h(),b("span",re,[V(u(e.$t("remove_item"))+" ",1),a("b",null,u(L.value.first_name),1),V("?")])):y("",!0)])]),_:1},8,["visible","header"]),t(U,{visible:v.value,"onUpdate:visible":l[7]||(l[7]=s=>v.value=s),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:r(()=>{var s,m;return[a("div",de,[a("label",ce,u(e.$t("name")),1),t(P,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:n.value.name,"onUpdate:modelValue":l[5]||(l[5]=p=>n.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(s=d.value)!=null&&s.name?(h(),b("div",me,u(d.value.name[0]),1)):y("",!0)]),a("div",pe,[a("label",ve,u(e.$t("permissions")),1),t(B,{modelValue:n.value.permissions,"onUpdate:modelValue":l[6]||(l[6]=p=>n.value.permissions=p),filter:"","option-value":"id",options:S.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=d.value)!=null&&m.name?(h(),b("div",fe,u(d.value.name[0]),1)):y("",!0)]),a("div",he,[t(i,{onClick:F,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),t(U,{visible:f.value,"onUpdate:visible":l[10]||(l[10]=s=>f.value=s),style:{width:"550px"},header:e.$t("roles"),modal:!0},{default:r(()=>{var s,m;return[a("div",be,[a("label",ge,u(e.$t("name")),1),t(P,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:n.value.name,"onUpdate:modelValue":l[8]||(l[8]=p=>n.value.name=p),placeholder:e.$t("name")},null,8,["modelValue","placeholder"]),(s=d.value)!=null&&s.name?(h(),b("div",_e,u(d.value.name[0]),1)):y("",!0)]),a("div",ye,[a("label",we,u(e.$t("permissions")),1),t(B,{modelValue:n.value.permissions,"onUpdate:modelValue":l[9]||(l[9]=p=>n.value.permissions=p),filter:"","option-value":"id",options:S.value,optionLabel:"name",placeholder:e.$t("permissions"),class:"w-full md:w-20rem"},null,8,["modelValue","options","placeholder"]),(m=d.value)!=null&&m.permissions?(h(),b("div",ke,u(d.value.permissions[0]),1)):y("",!0)]),a("div",$e,[t(i,{onClick:I,class:"create m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])]),_:1})])])}}};export{Ce as default};
