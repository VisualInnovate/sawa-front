import{a9 as U,Q as F,R as l,S as M,r as C,o as m,d as h,e as s,t as n,f as d,w,E as N,G as O,T as P,h as j,F as $,B as V,X as q,c as v}from"./main-d6084578.js";import"./editor.esm-11b3b755.js";import{g as z}from"./flowbite-vue-06bc76b3.js";import{V as G}from"./VTextarea-fc9a4965.js";const H={class:"grid",style:{"max-height":"90vh !important","overflow-y":"scroll"}},Q={class:"flex w-full pb-4 px-4 justify-between align-items-center"},X={class:"m-0 my-auto"},Z={class:"block mt-2 md:mt-0 p-input-icon-left"},J=s("i",{class:"pi pi-search"},null,-1),K={class:"col-12"},W=["onSubmit"],Y={class:"flex flex-column gap-2 py-1 w-[50%]"},ee={class:"flex"},se={class:"text-right"},te=s("svg",{class:"my-auto mx-1",width:"7",height:"5",viewBox:"0 0 6 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{opacity:"0.8",d:"M1.859 5.008L1.196 4.527L1.95 3.253L0.624 2.668L0.871 1.888L2.288 2.213L2.431 0.744H3.25L3.393 2.213L4.823 1.888L5.07 2.668L3.731 3.253L4.485 4.527L3.822 5.008L2.847 3.877L1.859 5.008Z",fill:"#DA1414"})],-1),le={class:"flex flex-column mx-2 items-stretch"},ae={class:"text-right invisible"},oe={class:"grid md:grid-cols-3 lg:grid-cols-4 grid-cols-1"},ne={class:"flex items-center"},ie={class:"mx-2 font-bold text-lg text-slate-800"},de=["checked","onChange"],ce=["checked","onChange"],ue=["onClick"],re={class:""},me={class:"flex flex-column gap-2"},he={class:"w-full text-right",for:"username"},xe={__name:"Show",setup(pe){U();const f=F(),y=l(!1),_=l(!0),L=l({}),g=l(""),x=l(null),p=l(!1),c=l({});l(""),l(null),l(null),l({}),l(!1),l({}),l(!1);const a=l([]),k=e=>e.every(t=>a.value.includes(t.id)),S=(e,t)=>{const u=t.map(r=>r.id);k(t)?a.value=a.value.filter(r=>!u.includes(r)):a.value=[...new Set([...a.value,...u])]},D=e=>{v.get(`/api/permissions?search=${e}`).then(t=>{_.value=!1,x.value=t.data.permissions})},T=()=>{v.get("/api/permissions").then(e=>{_.value=!1,x.value=e.data.permissions})},B=()=>{v.get(`/api/roles/${f.currentRoute.value.params.id}`).then(e=>{_.value=!1,c.value.name=e.data.role.name;for(let t=0;t<e.data.role.permissions.length;t++)a.value.push(e.data.role.permissions[t].id)})},E=()=>{v.put(`/api/roles/${f.currentRoute.value.params.id}/edit`,{permissions:a.value,name:c.value.name}).then(e=>{f.push({name:"Roles"})})};M(()=>{T(),B()});const R=e=>{p.value=!p.value,g.value=e.description,L.value=e},A=e=>{const t=a.value.indexOf(e);t===-1?a.value.push(e):a.value.splice(t,1),console.log(a.value)};return(e,t)=>{const u=C("InputText"),r=C("Dialog");return m(),h("div",H,[s("div",Q,[s("h5",X,n(e.$t("roles")),1),s("div",null,[s("span",Z,[J,d(u,{"onUpdate:modelValue":D,placeholder:e.$t("search")},null,8,["placeholder"])])])]),s("div",K,[d(q,{class:"card shadow-md"},{default:w(()=>[s("form",{class:"flex",onSubmit:N(E,["prevent"])},[s("div",Y,[s("div",ee,[s("label",se,n(e.$t("اسم الرول")),1),te]),d(u,{class:O(["bg-[#f7f5f5] text-center",{"p-invalid":y.value&&!c.value.name}]),modelValue:c.value.name,"onUpdate:modelValue":t[0]||(t[0]=o=>c.value.name=o),required:""},null,8,["modelValue","class"])]),s("div",le,[s("label",ae,n(e.$t("اسم الرول")),1),d(P(z),{type:"submit",onClick:t[1]||(t[1]=o=>y.value=!0),class:"create my-auto"},{default:w(()=>[j(n(e.$t("submit")),1)]),_:1})])],40,W),s("div",oe,[(m(!0),h($,null,V(x.value,(o,b)=>(m(),h("div",{class:"p-4",key:b},[s("div",ne,[s("h3",ie,n(b),1),s("input",{type:"checkbox",class:"border my-auto mx-2",checked:k(o),onChange:i=>S(b,o)},null,40,de)]),(m(!0),h($,null,V(o,i=>(m(),h("div",{class:"flex py-[1px]",key:i.id},[s("input",{class:"border my-auto mx-2",type:"checkbox",checked:a.value.includes(i.id),onChange:I=>A(i.id)},null,40,ce),s("p",null,n(i.name),1),s("i",{onClick:I=>R(i),class:"pi pi-arrow-left px-4 my-auto text-base text-[#135C65]"},null,8,ue)]))),128))]))),128))]),d(r,{visible:p.value,"onUpdate:visible":t[3]||(t[3]=o=>p.value=o),style:{width:"550px"},header:e.$t("submit"),modal:!0},{default:w(()=>[s("div",re,[s("div",me,[s("label",he,n(e.$t("description")),1),d(G,{disabled:"",readonly:"true","bg-color":"#EAE8E9",rows:"3",modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=o=>g.value=o)},null,8,["modelValue"])])])]),_:1},8,["visible","header"])]),_:1})])])}}};export{xe as default};
