import{_ as de,m as ue,a1 as ie,q as i,aj as re,a2 as ce,ak as pe,r as c,al as G,o as m,d as f,e as t,f as l,g as r,t as n,i as x,L as me,h as B,j as h,c as w,y as ve,z as fe}from"./main-07c0fdcf.js";import{h as H}from"./moment-fbc5633a.js";const N=S=>(ve("data-v-c2fb1d25"),S=S(),fe(),S),be={class:"grid"},he={class:"col-12"},_e={class:"card p-4 shadow-2 border-round"},ge={class:"text-2xl font-bold"},ye={class:"flex gap-2"},xe={class:"card shadow-1 surface-0"},we={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center gap-3"},$e={class:"flex gap-2"},ke={class:"p-input-icon-left"},Ve=N(()=>t("i",{class:"pi pi-search"},null,-1)),Ce={class:"font-medium"},Be={class:"flex gap-2"},Se=N(()=>t("div",{class:"text-center py-4"},[t("i",{class:"pi pi-exclamation-circle text-2xl mb-2"}),t("p",{class:"text-xl"},"No records found")],-1)),De={class:"flex justify-content-center align-items-center py-4"},Ue={class:"flex align-items-center justify-content-center"},Te=N(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),Le=N(()=>t("b",null,"this bonus record",-1)),Ne={class:"flex flex-column gap-2"},Ie={class:"w-full text-right",for:"reason"},Me={key:0,class:"mt-1 mb-3 text-red-500"},Pe={class:"flex flex-column gap-2 mt-3"},Ee={class:"w-full text-right",for:"amount"},Re={key:0,class:"mt-1 mb-3 text-red-500"},Ye={class:"flex flex-column gap-2 mt-3"},qe={class:"w-full text-right",for:"date"},Ae={key:0,class:"mt-1 mb-3 text-red-500"},je={class:"flex flex-column gap-2 mt-3"},ze={class:"w-full text-right",for:"employee"},Fe={key:0,class:"mt-1 mb-3 text-red-500"},Ge={class:"w-full text-center mt-4"},He={class:"flex flex-column gap-2"},We={class:"w-full text-right",for:"reason"},Oe={key:0,class:"mt-1 mb-3 text-red-500"},Je={class:"flex flex-column gap-2 mt-3"},Ke={class:"w-full text-right",for:"amount"},Qe={key:0,class:"mt-1 mb-3 text-red-500"},Xe={class:"flex flex-column gap-2 mt-3"},Ze={class:"w-full text-right",for:"date"},et={key:0,class:"mt-1 mb-3 text-red-500"},tt={class:"w-full text-center mt-4"},lt={__name:"index",setup(S){const D=ue();ie();const Y=i({}),U=i(!0);i({});const d=i(""),q=i(null),$=i(!1),T=i(""),A=i(null),j=i(null),L=i({}),_=i(!1),s=i({}),g=i(!1),I=i(!1),M=i(!1);re(()=>{te()});const k=()=>{U.value=!0,w.get("/api/bonus").then(e=>{U.value=!1,q.value=e.data.data}).catch(()=>{U.value=!1,D.add({severity:"error",summary:"Error",detail:"Failed to load data",life:3e3})}),w.get("/api/employees").then(e=>{Y.value=e.data.data})};ce(()=>{k()});const W=e=>{w.get(`/api/bonus/${e}`).then(o=>{s.value=o.data.data}),T.value=e,g.value=!g.value},O=()=>{s.value.date=H(s.value.date).format("YYYY-MM-DD"),w.put(`/api/bonus/${T.value}`,s.value).then(e=>{k(),g.value=!g.value,D.add({severity:"success",summary:"Successful",detail:"Bonus updated successfully",life:3e3}),s.value={}}).catch(e=>{d.value=e.response.data.errors})},J=()=>{_.value=!_.value,s.value={}},K=e=>{$.value=!0,T.value=e},Q=()=>{s.value.date=H(s.value.date).format("YYYY-MM-DD"),w.post("/api/bonus",s.value).then(e=>{k(),_.value=!_.value,D.add({severity:"success",summary:"Successful",detail:"Bonus created successfully",life:3e3}),s.value={}}).catch(e=>{d.value=e.response.data.errors})},X=()=>{w.delete(`/api/bonus/${T.value}`).then(e=>{$.value=!1,k(),D.add({severity:"success",summary:"Successful",detail:"Bonus deleted successfully",life:3e3})}).catch(()=>{})},Z=()=>{I.value=!0,j.value.exportCSV(),setTimeout(()=>{I.value=!1},1e3)},ee=()=>{M.value=!0;const e=document.querySelector(".p-datatable-wrapper").cloneNode(!0);document.body.innerHTML,e.querySelectorAll(".p-button").forEach(P=>P.remove());const u=window.open("","_blank");u.document.write(`
    <html>
      <head>
        <title>Employee Bonus Report</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          h1 { color: #333; text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th { background-color: #f5f5f5; text-align: left; padding: 8px; border: 1px solid #ddd; }
          td { padding: 8px; border: 1px solid #ddd; }
          .text-center { text-align: center; }
          .text-right { text-align: right; }
          @page { size: auto; margin: 5mm; }
          @media print {
            body { margin: 0; padding: 0; }
            .no-print { display: none !important; }
          }
        </style>
      </head>
      <body>
        <h1>Employee Bonus Report</h1>
        ${e.innerHTML}
        <div style="text-align: center; margin-top: 20px; font-size: 12px;">
          Generated on ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `),u.document.close(),u.focus(),setTimeout(()=>{u.print(),u.close(),M.value=!1},500)},te=()=>{L.value={global:{value:null,matchMode:pe.CONTAINS}}};return(e,o)=>{const u=c("Button"),P=c("Toolbar"),le=c("Toast"),E=c("InputText"),y=c("Column"),oe=c("ProgressSpinner"),ae=c("DataTable"),R=c("Dialog"),z=c("InputNumber"),F=c("Calendar"),se=c("Dropdown"),V=G("can"),ne=G("tooltip");return m(),f("div",be,[t("div",he,[t("div",_e,[l(P,{class:"mb-4"},{start:r(()=>[t("h2",ge,n(e.$t("Employee Bonuses")),1)]),end:r(()=>[t("div",ye,[l(u,{label:e.$t("print"),icon:"pi pi-print",class:"p-button-help no-print",loading:M.value,onClick:ee},null,8,["label","loading"]),x(l(u,{label:e.$t("export"),icon:"pi pi-download",class:"p-button-info no-print",loading:I.value,onClick:Z},null,8,["label","loading"]),[[V,"bonus list"]]),x(l(u,{label:e.$t("Adding_bonus_employee"),icon:"pi pi-plus",class:"p-button-success",onClick:J},null,8,["label"]),[[V,"bonus create"]])])]),_:1}),l(le),t("div",xe,[x((m(),me(ae,{ref_key:"dt",ref:j,selection:A.value,"onUpdate:selection":o[1]||(o[1]=a=>A.value=a),value:q.value,loading:U.value,"data-key":"id",paginator:!0,rows:10,filters:L.value,"paginator-template":"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown","rows-per-page-options":[5,10,25,50,100],"current-page-report-template":"Showing {first} to {last} of {totalRecords} records","responsive-layout":"scroll",scrollable:"","scroll-height":"flex",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{header:r(()=>[t("div",we,[t("div",$e,[t("span",ke,[Ve,l(E,{modelValue:L.value.global.value,"onUpdate:modelValue":o[0]||(o[0]=a=>L.value.global.value=a),placeholder:e.$t("search"),class:"w-full"},null,8,["modelValue","placeholder"])]),x(l(u,{icon:"pi pi-refresh",class:"p-button-text",onClick:k},null,512),[[ne,"Refresh data",void 0,{top:!0}]])])])]),empty:r(()=>[Se]),loading:r(()=>[t("div",De,[l(oe,{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[l(y,{"selection-mode":"multiple","header-style":"width: 3rem"}),l(y,{field:"employee.name",header:e.$t("Employees"),sortable:!0},{body:r(a=>{var p;return[t("span",Ce,n(((p=a.data.employee)==null?void 0:p.name)||"N/A"),1)]}),_:1},8,["header"]),l(y,{field:"amount",header:e.$t("bouns_amount"),sortable:!0},{body:r(a=>[B(n(a.data.amount),1)]),_:1},8,["header"]),l(y,{field:"date",header:e.$t("bouns_date"),sortable:!0},{body:r(a=>[B(n(a.data.date),1)]),_:1},8,["header"]),l(y,{field:"reason",header:e.$t("bouns_reason"),sortable:!0},{body:r(a=>[B(n(a.data.reason||"--"),1)]),_:1},8,["header"]),l(y,{"header-style":"min-width:10rem;"},{body:r(a=>[t("div",Be,[x(l(u,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success",onClick:p=>W(a.data.id)},null,8,["onClick"]),[[V,"bonus edit"]]),x(l(u,{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:p=>K(a.data.id)},null,8,["onClick"]),[[V,"bonus delete"]])])]),_:1})]),_:1},8,["selection","value","loading","filters"])),[[V,"bonus list"]])]),l(R,{visible:$.value,"onUpdate:visible":o[3]||(o[3]=a=>$.value=a),style:{width:"450px"},header:e.$t("confirm"),modal:!0},{footer:r(()=>[l(u,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:o[2]||(o[2]=a=>$.value=!1)},null,8,["label"]),l(u,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:X},null,8,["label"])]),default:r(()=>[t("div",Ue,[Te,t("span",null,[B(n(e.$t("remove_item"))+" ",1),Le,B("? ")])])]),_:1},8,["visible","header"]),l(R,{visible:_.value,"onUpdate:visible":o[8]||(o[8]=a=>_.value=a),style:{width:"450px"},header:e.$t("Add Bonus"),modal:!0},{default:r(()=>{var a,p,C,v;return[t("div",Ne,[t("label",Ie,n(e.$t("bouns_reason")),1),l(E,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:s.value.reason,"onUpdate:modelValue":o[4]||(o[4]=b=>s.value.reason=b),placeholder:e.$t("bouns_reason")},null,8,["modelValue","placeholder"]),(a=d.value)!=null&&a.reason?(m(),f("div",Me,n(d.value.reason[0]),1)):h("",!0)]),t("div",Pe,[t("label",Ee,n(e.$t("bouns_amount")),1),l(z,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:s.value.amount,"onUpdate:modelValue":o[5]||(o[5]=b=>s.value.amount=b),placeholder:e.$t("bouns_amount"),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue","placeholder"]),(p=d.value)!=null&&p.amount?(m(),f("div",Re,n(d.value.amount[0]),1)):h("",!0)]),t("div",Ye,[t("label",qe,n(e.$t("bouns_date")),1),l(F,{style:{width:"100%"},showButtonBar:"",modelValue:s.value.date,"onUpdate:modelValue":o[6]||(o[6]=b=>s.value.date=b),showIcon:"",placeholder:e.$t("bouns_date")},null,8,["modelValue","placeholder"]),(C=d.value)!=null&&C.date?(m(),f("div",Ae,n(d.value.date[0]),1)):h("",!0)]),t("div",je,[t("label",ze,n(e.$t("Employees")),1),l(se,{modelValue:s.value.employee_id,"onUpdate:modelValue":o[7]||(o[7]=b=>s.value.employee_id=b),options:Y.value,optionLabel:"name",optionValue:"id",placeholder:e.$t("Select Employee"),class:"w-full"},null,8,["modelValue","options","placeholder"]),(v=d.value)!=null&&v.employee_id?(m(),f("div",Fe,n(d.value.employee_id[0]),1)):h("",!0)]),t("div",Ge,[l(u,{onClick:Q,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"]),l(R,{visible:g.value,"onUpdate:visible":o[12]||(o[12]=a=>g.value=a),style:{width:"450px"},header:e.$t("Update Bonus"),modal:!0},{default:r(()=>{var a,p,C;return[t("div",He,[t("label",We,n(e.$t("bouns_reason")),1),l(E,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:s.value.reason,"onUpdate:modelValue":o[9]||(o[9]=v=>s.value.reason=v),placeholder:e.$t("bouns_reason")},null,8,["modelValue","placeholder"]),(a=d.value)!=null&&a.reason?(m(),f("div",Oe,n(d.value.reason[0]),1)):h("",!0)]),t("div",Je,[t("label",Ke,n(e.$t("bouns_amount")),1),l(z,{required:"",class:"bg-[#f7f5f5] text-center",modelValue:s.value.amount,"onUpdate:modelValue":o[10]||(o[10]=v=>s.value.amount=v),placeholder:e.$t("bouns_amount"),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue","placeholder"]),(p=d.value)!=null&&p.amount?(m(),f("div",Qe,n(d.value.amount[0]),1)):h("",!0)]),t("div",Xe,[t("label",Ze,n(e.$t("bouns_date")),1),l(F,{style:{width:"100%"},showButtonBar:"",modelValue:s.value.date,"onUpdate:modelValue":o[11]||(o[11]=v=>s.value.date=v),showIcon:"",placeholder:e.$t("bouns_date")},null,8,["modelValue","placeholder"]),(C=d.value)!=null&&C.date?(m(),f("div",et,n(d.value.date[0]),1)):h("",!0)]),t("div",tt,[l(u,{onClick:O,class:"p-button-success m-auto w-[50%] my-4",label:e.$t("submit")},null,8,["label"])])]}),_:1},8,["visible","header"])])])])}}},st=de(lt,[["__scopeId","data-v-c2fb1d25"]]);export{st as default};
