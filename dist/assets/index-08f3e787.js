import{ax as ne,ao as ie,I as r,aq as ue,P as de,ah as re,ar as ve,r as f,as as ce,o as u,d as v,e as s,f as o,w as d,i as U,x as me,t as n,h as y,g as c,a2 as O,K as p,L as P,c as V}from"./main-64215f0b.js";import{E as R,P as W}from"./index-dca5ac91.js";import{h as H}from"./moment-fbc5633a.js";const pe={class:"grid"},fe={class:"col-12"},ge={class:"card"},he={class:"my-2"},_e={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},be={class:"m-0"},ye={class:"block mt-2 md:mt-0 p-input-icon-left"},we=s("i",{class:"pi pi-search"},null,-1),$e={class:"flex align-items-center justify-content-center"},ke=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ve={key:0},xe=["onSubmit"],Ce={class:"flex flex-column gap-2"},Ue={class:"w-full text-right",for:"username"},De={key:0,class:"p-invalid text-red-600 w-full text-center"},Se={class:"flex flex-column gap-2"},qe={class:"w-full text-right",for:"username"},Me={key:0,class:"p-invalid text-red-600 w-full text-center"},Be={class:"flex flex-column gap-2"},Fe={class:"w-full text-right",for:"username "},Pe={key:0,class:"p-invalid text-red-600 w-full text-center"},Ie={class:"flex flex-column gap-2"},Le={class:"w-full text-right",for:"username"},Te={key:0,class:"p-invalid text-red-600 w-full text-center"},Ne={class:"flex flex-column gap-2"},Ee={class:"w-full text-right",for:"username"},Ye={key:0,class:"p-invalid text-red-600 w-full text-center"},je={class:"flex flex-column gap-2"},ze={class:"w-full text-right",for:"username"},Ae={key:0,class:"p-invalid text-red-600 w-full text-center"},Oe={class:"flex flex-column gap-2"},Re={class:"w-full text-right",for:"username"},We={key:0,class:"p-invalid text-red-600 w-full text-center"},He={class:"py-3"},Ze=["onSubmit"],Ke={class:"flex flex-column gap-2"},Je={class:"w-full text-right",for:"username"},Qe={key:0,class:"p-invalid text-red-600 w-full text-center"},Ge={class:"flex flex-column gap-2"},Xe={class:"w-full text-right",for:"username"},el={key:0,class:"p-invalid text-red-600 w-full text-center"},ll={class:"flex flex-column gap-2"},tl={class:"w-full text-right",for:"username "},al={key:0,class:"p-invalid text-red-600 w-full text-center"},sl={class:"flex flex-column gap-2"},ol={class:"w-full text-right",for:"username"},nl={key:0,class:"p-invalid text-red-600 w-full text-center"},il={class:"flex flex-column gap-2"},ul={class:"w-full text-right",for:"username"},dl={key:0,class:"p-invalid text-red-600 w-full text-center"},rl={class:"flex flex-column gap-2"},vl={class:"w-full text-right",for:"username"},cl={key:0,class:"p-invalid text-red-600 w-full text-center"},ml={class:"flex flex-column gap-2"},pl={class:"w-full text-right",for:"username"},fl={key:0,class:"p-invalid text-red-600 w-full text-center"},gl={class:"py-3"},wl={__name:"index",setup(hl){const{t:_}=ne(),D=ie(),l=r({long:"",lat:"",assigners:[]}),T=r(!0),N=r({});r("");const E=r(null),S=r(""),w=r(!1);r(!1);const Y=r(null),q=r({}),i=r(!1),b=r(!1),$=r(!1),I=r([]);r({lat:10,lng:10});const m=r({name:"",latitude:31.984983325941823,longitude:35.900908045672196,distance:1e3});ue(()=>{le()}),de(()=>(console.log(m.value.distance),{center:{lat:m.value.latitude,lng:m.value.longitude},radius:parseInt(m.value.distance),strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}));function j(e){const t=e.latLng,h=t.lat(),g=t.lng();l.value.lat=h,l.value.long=g,console.log("Clicked coordinates:",h,g)}const M=()=>{V.get("/api/official-leaves").then(e=>{T.value=!1,E.value=e.data.data}),V.get("/api/employees").then(e=>{I.value=e.data.data})},Z=e=>{S.value=e,b.value=!b.value},K=()=>{V.delete(`/api/official-leaves/${S.value}`).then(e=>{M(),b.value=!b.value})},J=()=>{$.value=!$.value,l.value={}},Q=()=>{l.value.end=H(l.value.end).format("YYYY-MM-DD HH:mm:ss"),l.value.start=H(l.value.start).format("YYYY-MM-DD HH:mm:ss"),V.post("api/official-leaves",l.value).then(e=>{M(),$.value=!$.value,D.add({severity:"success",summary:_("success_message"),detail:`${_("element_add_success")}`,life:3e3})}).catch(e=>{D.add({severity:"error",summary:_("error"),detail:`${_("mission_error")}`,life:3e3})})},G=e=>{S.value=e,w.value=!w.value,V.get(`/api/official-leaves/${e}`).then(t=>{l.value.title=t.data.data.title,l.value.location=t.data.data.location,l.value.lat=t.data.data.lat,l.value.long=t.data.data.long,l.value.start=t.data.data.start,l.value.end=t.data.data.end,m.value.latitude=t.data.data.lat,m.value.longitude=t.data.data.long;for(let h=0;h<t.data.data.assigners.length;h++)l.value.assigners.push(t.data.data.assigners[h].employee_id)})},X=()=>{V.put(`api/official-leaves/${S.value}`,l.value).then(e=>{M(),w.value=!w.value,D.add({severity:"success",summary:_("success_message"),detail:`${_("element_update_success")}`,life:3e3})}).catch(e=>{D.add({severity:"error",summary:_("error"),detail:`${_("mission_error")}`,life:3e3})})};re(()=>{M()});const ee=()=>{Y.value.exportCSV()},le=()=>{q.value={global:{value:null,matchMode:ve.CONTAINS}}};return(e,t)=>{const h=f("Toast"),g=f("Button"),te=f("Toolbar"),x=f("InputText"),ae=f("ProgressSpinner"),k=f("Column"),se=f("router-link"),oe=f("DataTable"),L=f("Dialog"),B=f("Calendar"),z=f("MultiSelect"),F=f("InputNumber"),C=ce("can");return u(),v("div",pe,[s("div",fe,[s("div",ge,[o(h),o(te,{class:"mb-4"},{start:d(()=>[s("div",he,[U(o(g,{label:e.$t("add_official_leaves"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:J},null,8,["label"]),[[C,"official leave create"]])])]),end:d(()=>[U(o(g,{label:e.$t("export"),icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=a=>ee(a))},null,8,["label"]),[[C,"official leave list"]])]),_:1}),U((u(),me(oe,{ref_key:"dt",ref:Y,loading:T.value,value:E.value,selection:e.selectedUsers,"onUpdate:selection":t[2]||(t[2]=a=>e.selectedUsers=a),paginator:!0,rows:10,filters:q.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} users",responsiveLayout:"scroll"},{header:d(()=>[s("div",_e,[s("h5",be,n(e.$t("official_leaves")),1),s("span",ye,[we,o(x,{modelValue:q.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>q.value.global.value=a),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])]),empty:d(()=>[y(" No official leaves found.")]),loading:d(()=>[o(ae)]),default:d(()=>[o(k,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o(k,{field:"title",header:e.$t("title"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[y(n(a.data.title),1)]),_:1},8,["header"]),o(k,{field:"location",header:e.$t("location"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[y(n(a.data.location),1)]),_:1},8,["header"]),o(k,{field:"Start Date",header:e.$t("start_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[y(n(a.data.start),1)]),_:1},8,["header"]),o(k,{field:"End Date",header:e.$t("end_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[y(n(a.data.end),1)]),_:1},8,["header"]),o(k,{headerStyle:"min-width:10rem;"},{body:d(a=>[o(se,{to:{type:Object,required:!0},onClick:A=>e.showUser(a.data)},null,8,["onClick"]),U(o(g,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:A=>G(a.data.id)},null,8,["onClick"]),[[C,"official leave edit"]]),U(o(g,{icon:"pi pi-trash",class:"delete mt-2",onClick:A=>Z(a.data.id)},null,8,["onClick"]),[[C,"official leave delete"]])]),_:1})]),_:1},8,["loading","value","selection","filters"])),[[C,"official leave list"]]),o(L,{visible:b.value,"onUpdate:visible":t[4]||(t[4]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(g,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=a=>b.value=!1)},null,8,["label"]),o(g,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:K},null,8,["label"])]),default:d(()=>[s("div",$e,[ke,N.value?(u(),v("span",Ve,[y(n(e.$t("remove_item"))+" ",1),s("b",null,n(N.value.first_name),1),y("?")])):c("",!0)])]),_:1},8,["visible"]),o(L,{visible:$.value,"onUpdate:visible":t[13]||(t[13]=a=>$.value=a),style:{width:"550px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:d(()=>[s("form",{onSubmit:O(Q,["prevent"])},[s("div",Ce,[s("label",Ue,n(e.$t("title")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.title}]),modelValue:l.value.title,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.title=a)},null,8,["modelValue","class"]),i.value&&!l.value.title?(u(),v("small",De,n(e.$t("title")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Se,[s("label",qe,n(e.$t("location")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.location}]),modelValue:l.value.location,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.location=a)},null,8,["modelValue","class"]),i.value&&!l.value.location?(u(),v("small",Me,n(e.$t("location")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Be,[s("label",Fe,n(e.$t("start_date")),1),o(B,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.start,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.start=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!l.value.start})},null,8,["modelValue","class"]),i.value&&!l.value.start?(u(),v("small",Pe,n(e.$t("start_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ie,[s("label",Le,n(e.$t("end_date")),1),o(B,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.end,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.end=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!l.value.end})},null,8,["modelValue","class"]),i.value&&!l.value.end?(u(),v("small",Te,n(e.$t("end_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ne,[s("label",Ee,n(e.$t("Employees")),1),o(z,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:l.value.assigners,"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.assigners=a),"option-value":"id",options:I.value,optionLabel:"name",class:p([{"p-invalid":i.value&&!l.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!l.value.assigners?(u(),v("small",Ye,n(e.$t("Employees")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",je,[s("label",ze,n(e.$t("lat")),1),o(F,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.lat}]),modelValue:l.value.lat,"onUpdate:modelValue":t[10]||(t[10]=a=>l.value.lat=a)},null,8,["modelValue","class"]),i.value&&!l.value.lat?(u(),v("small",Ae,n(e.$t("lat")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Oe,[s("label",Re,n(e.$t("long")),1),o(F,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.long}]),modelValue:l.value.long,"onUpdate:modelValue":t[11]||(t[11]=a=>l.value.long=a)},null,8,["modelValue","class"]),i.value&&!l.value.long?(u(),v("small",We,n(e.$t("long")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",He,[o(P(R),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:j,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:d(()=>[o(P(W),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:e.$t("save"),icon:"pi pi-check ",type:"submit",class:"create",onClick:t[12]||(t[12]=a=>i.value=!0)},null,8,["label"])],40,xe)]),_:1},8,["visible","header"]),o(L,{visible:w.value,"onUpdate:visible":t[22]||(t[22]=a=>w.value=a),style:{width:"450px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:d(()=>[s("form",{onSubmit:O(X,["prevent"])},[s("div",Ke,[s("label",Je,n(e.$t("title")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.title}]),modelValue:l.value.title,"onUpdate:modelValue":t[14]||(t[14]=a=>l.value.title=a)},null,8,["modelValue","class"]),i.value&&!l.value.title?(u(),v("small",Qe,n(e.$t("title")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ge,[s("label",Xe,n(e.$t("location")),1),o(x,{class:p(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.location}]),modelValue:l.value.location,"onUpdate:modelValue":t[15]||(t[15]=a=>l.value.location=a)},null,8,["modelValue","class"]),i.value&&!l.value.location?(u(),v("small",el,n(e.$t("location")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",ll,[s("label",tl,n(e.$t("start_date")),1),o(B,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.start,"onUpdate:modelValue":t[16]||(t[16]=a=>l.value.start=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!l.value.start})},null,8,["modelValue","class"]),i.value&&!l.value.start?(u(),v("small",al,n(e.$t("start_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",sl,[s("label",ol,n(e.$t("end_date")),1),o(B,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.end,"onUpdate:modelValue":t[17]||(t[17]=a=>l.value.end=a),modelModifiers:{number:!0},showIcon:"",class:p({"p-invalid":i.value&&!l.value.end})},null,8,["modelValue","class"]),i.value&&!l.value.end?(u(),v("small",nl,n(e.$t("end_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",il,[s("label",ul,n(e.$t("Employees")),1),o(z,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:l.value.assigners,"onUpdate:modelValue":t[18]||(t[18]=a=>l.value.assigners=a),"option-value":"id",options:I.value,optionLabel:"name",class:p([{"p-invalid":i.value&&!l.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!l.value.assigners?(u(),v("small",dl,n(e.$t("Employees")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",rl,[s("label",vl,n(e.$t("lat")),1),o(F,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.lat}]),modelValue:l.value.lat,"onUpdate:modelValue":t[19]||(t[19]=a=>l.value.lat=a)},null,8,["modelValue","class"]),i.value&&!l.value.lat?(u(),v("small",cl,n(e.$t("lat")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",ml,[s("label",pl,n(e.$t("long")),1),o(F,{class:p(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.long}]),modelValue:l.value.long,"onUpdate:modelValue":t[20]||(t[20]=a=>l.value.long=a)},null,8,["modelValue","class"]),i.value&&!l.value.long?(u(),v("small",fl,n(e.$t("long")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",gl,[o(P(R),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:j,style:{width:"100%",height:"500px"},center:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)},zoom:14},{default:d(()=>[o(P(W),{options:{position:{lat:parseFloat(m.value.latitude),lng:parseFloat(m.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:e.$t("save"),icon:"pi pi-check ",type:"submit",class:"create",onClick:t[21]||(t[21]=a=>i.value=!0)},null,8,["label"])],40,Ze)]),_:1},8,["visible","header"])])]),o(h)])}}};export{wl as default};
