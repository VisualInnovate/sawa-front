import{aa as se,T as r,ac as oe,as as ne,a3 as ie,ad as ue,r as m,ae as de,o as u,d as v,e as s,f as o,w as d,i as k,x as re,t as n,h as _,g as c,E as O,O as f,U as B,c as x}from"./main-69677206.js";import{E as A,P as R}from"./index-91487950.js";const ve={class:"grid"},ce={class:"col-12"},pe={class:"card"},fe={class:"my-2"},me={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ge={class:"m-0"},he={class:"block mt-2 md:mt-0 p-input-icon-left"},be=s("i",{class:"pi pi-search"},null,-1),_e={class:"flex align-items-center justify-content-center"},we=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),$e={key:0},ye={class:"flex flex-column gap-2"},Ve={class:"w-full text-right",for:"username"},ke={key:0,class:"p-invalid text-red-600 w-full text-center"},xe={class:"flex flex-column gap-2"},Ce={class:"w-full text-right",for:"username"},Ue={key:0,class:"p-invalid text-red-600 w-full text-center"},Se={class:"flex flex-column gap-2"},qe={class:"w-full text-right",for:"username "},De={key:0,class:"p-invalid text-red-600 w-full text-center"},Be={class:"flex flex-column gap-2"},Fe={class:"w-full text-right",for:"username"},Me={key:0,class:"p-invalid text-red-600 w-full text-center"},Pe={class:"flex flex-column gap-2"},Te={class:"w-full text-right",for:"username"},Ie={key:0,class:"p-invalid text-red-600 w-full text-center"},Le={class:"flex flex-column gap-2"},Ee={class:"w-full text-right",for:"username"},Ne={key:0,class:"p-invalid text-red-600 w-full text-center"},je={class:"flex flex-column gap-2"},ze={class:"w-full text-right",for:"username"},Oe={key:0,class:"p-invalid text-red-600 w-full text-center"},Ae={class:"py-3"},Re=["onSubmit"],We={class:"flex flex-column gap-2"},Ze={class:"w-full text-right",for:"username"},Je={key:0,class:"p-invalid text-red-600 w-full text-center"},Ke={class:"flex flex-column gap-2"},Qe={class:"w-full text-right",for:"username"},Ye={key:0,class:"p-invalid text-red-600 w-full text-center"},Ge={class:"flex flex-column gap-2"},He={class:"w-full text-right",for:"username "},Xe={key:0,class:"p-invalid text-red-600 w-full text-center"},el={class:"flex flex-column gap-2"},ll={class:"w-full text-right",for:"username"},tl={key:0,class:"p-invalid text-red-600 w-full text-center"},al={class:"flex flex-column gap-2"},sl={class:"w-full text-right",for:"username"},ol={key:0,class:"p-invalid text-red-600 w-full text-center"},nl={class:"flex flex-column gap-2"},il={class:"w-full text-right",for:"username"},ul={key:0,class:"p-invalid text-red-600 w-full text-center"},dl={class:"flex flex-column gap-2"},rl={class:"w-full text-right",for:"username"},vl={key:0,class:"p-invalid text-red-600 w-full text-center"},cl={class:"py-3"},gl={__name:"index",setup(pl){const W=se(),l=r({long:"",lat:"",assigners:[]}),T=r(!0),I=r({}),Z=r(""),L=r(null),C=r(""),w=r(!1);r(!1);const E=r(null),U=r({}),i=r(!1),b=r(!1),S=r(!1),F=r([]);r({lat:10,lng:10});const p=r({name:"",latitude:31.984983325941823,longitude:35.900908045672196,distance:1e3});oe(()=>{X()}),ne(()=>(console.log(p.value.distance),{center:{lat:p.value.latitude,lng:p.value.longitude},radius:parseInt(p.value.distance),strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}));function N(e){const t=e.latLng,h=t.lat(),g=t.lng();l.value.lat=h,l.value.long=g,console.log("Clicked coordinates:",h,g)}const M=()=>{x.get("/api/official-leaves").then(e=>{T.value=!1,L.value=e.data.data}),x.get("/api/employees").then(e=>{F.value=e.data.data})},J=e=>{C.value=e,b.value=!b.value},K=()=>{x.delete(`/api/official-leaves/${C.value}`).then(e=>{M(),b.value=!b.value})},Q=()=>{S.value=!S.value},Y=e=>{C.value=e,w.value=!w.value,x.get(`/api/official-leaves/${e}`).then(t=>{l.value.title=t.data.data.title,l.value.location=t.data.data.location,l.value.lat=t.data.data.lat,l.value.long=t.data.data.long,l.value.start=t.data.data.start,l.value.end=t.data.data.end,p.value.latitude=t.data.data.lat,p.value.longitude=t.data.data.long;for(let h=0;h<t.data.data.assigners.length;h++)l.value.assigners.push(t.data.data.assigners[h].employee_id)})},G=()=>{x.put(`api/official-leaves/${C.value}`,l.value).then(e=>{M(),w.value=!w.value,W.add({severity:"success",summary:"Successful",detail:"Successful",life:3e3})}).catch(e=>{Z.value=e.response.data.errors})};ie(()=>{M()});const H=()=>{E.value.exportCSV()},X=()=>{U.value={global:{value:null,matchMode:ue.CONTAINS}}};return(e,t)=>{const h=m("Toast"),g=m("Button"),ee=m("Toolbar"),y=m("InputText"),le=m("ProgressSpinner"),$=m("Column"),te=m("router-link"),ae=m("DataTable"),P=m("Dialog"),q=m("Calendar"),j=m("MultiSelect"),D=m("InputNumber"),V=de("can");return u(),v("div",ve,[s("div",ce,[s("div",pe,[o(h),o(ee,{class:"mb-4"},{start:d(()=>[s("div",fe,[k(o(g,{label:e.$t("add_official_leaves"),icon:"pi pi-plus",class:"p-button-success mr-2",onClick:Q},null,8,["label"]),[[V,"official leave create"]])])]),end:d(()=>[k(o(g,{label:e.$t("export"),icon:"pi pi-upload",class:"p-button-help",onClick:t[0]||(t[0]=a=>H(a))},null,8,["label"]),[[V,"official leave list"]])]),_:1}),k((u(),re(ae,{ref_key:"dt",ref:E,loading:T.value,value:L.value,selection:e.selectedUsers,"onUpdate:selection":t[2]||(t[2]=a=>e.selectedUsers=a),paginator:!0,rows:10,filters:U.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} users",responsiveLayout:"scroll"},{header:d(()=>[s("div",me,[s("h5",ge,n(e.$t("official_leaves")),1),s("span",he,[be,o(y,{modelValue:U.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=a=>U.value.global.value=a),placeholder:e.$t("search")},null,8,["modelValue","placeholder"])])])]),empty:d(()=>[_(" No official leaves found.")]),loading:d(()=>[o(le)]),default:d(()=>[o($,{selectionMode:"multiple",headerStyle:"width: 3rem"}),o($,{field:"title",header:e.$t("title"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[_(n(a.data.title),1)]),_:1},8,["header"]),o($,{field:"location",header:e.$t("location"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[_(n(a.data.location),1)]),_:1},8,["header"]),o($,{field:"Start Date",header:e.$t("start_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[_(n(a.data.start),1)]),_:1},8,["header"]),o($,{field:"End Date",header:e.$t("end_date"),sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:d(a=>[_(n(a.data.end),1)]),_:1},8,["header"]),o($,{headerStyle:"min-width:10rem;"},{body:d(a=>[o(te,{to:{type:Object,required:!0},onClick:z=>e.showUser(a.data)},null,8,["onClick"]),k(o(g,{icon:"pi pi-pencil",class:"p-button-rounded p-button-success mr-2",onClick:z=>Y(a.data.id)},null,8,["onClick"]),[[V,"official leave edit"]]),k(o(g,{icon:"pi pi-trash",class:"delete mt-2",onClick:z=>J(a.data.id)},null,8,["onClick"]),[[V,"official leave delete"]])]),_:1})]),_:1},8,["loading","value","selection","filters"])),[[V,"official leave list"]]),o(P,{visible:b.value,"onUpdate:visible":t[4]||(t[4]=a=>b.value=a),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[o(g,{label:e.$t("no"),icon:"pi pi-times",class:"p-button-text",onClick:t[3]||(t[3]=a=>b.value=!1)},null,8,["label"]),o(g,{label:e.$t("yes"),icon:"pi pi-check",class:"p-button-text",onClick:K},null,8,["label"])]),default:d(()=>[s("div",_e,[we,I.value?(u(),v("span",$e,[_(n(e.$t("remove_item"))+" ",1),s("b",null,n(I.value.first_name),1),_("?")])):c("",!0)])]),_:1},8,["visible"]),o(P,{visible:S.value,"onUpdate:visible":t[14]||(t[14]=a=>S.value=a),style:{width:"550px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:d(()=>[s("form",{onSubmit:t[13]||(t[13]=O((...a)=>e.create&&e.create(...a),["prevent"]))},[s("div",ye,[s("label",Ve,n(e.$t("title")),1),o(y,{class:f(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.title}]),modelValue:l.value.title,"onUpdate:modelValue":t[5]||(t[5]=a=>l.value.title=a)},null,8,["modelValue","class"]),i.value&&!l.value.title?(u(),v("small",ke,n(e.$t("title")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",xe,[s("label",Ce,n(e.$t("location")),1),o(y,{class:f(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.location}]),modelValue:l.value.location,"onUpdate:modelValue":t[6]||(t[6]=a=>l.value.location=a)},null,8,["modelValue","class"]),i.value&&!l.value.location?(u(),v("small",Ue,n(e.$t("location")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Se,[s("label",qe,n(e.$t("start_date")),1),o(q,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.start,"onUpdate:modelValue":t[7]||(t[7]=a=>l.value.start=a),modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":i.value&&!l.value.start})},null,8,["modelValue","class"]),i.value&&!l.value.start?(u(),v("small",De,n(e.$t("start_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Be,[s("label",Fe,n(e.$t("end_date")),1),o(q,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.end,"onUpdate:modelValue":t[8]||(t[8]=a=>l.value.end=a),modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":i.value&&!l.value.end})},null,8,["modelValue","class"]),i.value&&!l.value.end?(u(),v("small",Me,n(e.$t("end_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Pe,[s("label",Te,n(e.$t("Employees")),1),o(j,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:l.value.assigners,"onUpdate:modelValue":t[9]||(t[9]=a=>l.value.assigners=a),"option-value":"id",options:F.value,optionLabel:"name",class:f([{"p-invalid":i.value&&!l.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!l.value.assigners?(u(),v("small",Ie,n(e.$t("Employees")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Le,[s("label",Ee,n(e.$t("lat")),1),o(D,{class:f(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.lat}]),modelValue:l.value.lat,"onUpdate:modelValue":t[10]||(t[10]=a=>l.value.lat=a)},null,8,["modelValue","class"]),i.value&&!l.value.lat?(u(),v("small",Ne,n(e.$t("lat")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",je,[s("label",ze,n(e.$t("long")),1),o(D,{class:f(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.long}]),modelValue:l.value.long,"onUpdate:modelValue":t[11]||(t[11]=a=>l.value.long=a)},null,8,["modelValue","class"]),i.value&&!l.value.long?(u(),v("small",Oe,n(e.$t("long")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ae,[o(B(A),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:N,style:{width:"100%",height:"500px"},center:{lat:parseFloat(p.value.latitude),lng:parseFloat(p.value.longitude)},zoom:14},{default:d(()=>[o(B(R),{options:{position:{lat:parseFloat(p.value.latitude),lng:parseFloat(p.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:e.$t("save"),icon:"pi pi-check ",class:"create",onClick:t[12]||(t[12]=a=>i.value=!0)},null,8,["label"])],32)]),_:1},8,["visible","header"]),o(P,{visible:w.value,"onUpdate:visible":t[23]||(t[23]=a=>w.value=a),style:{width:"450px"},header:e.$t("add_official_leaves"),modal:!0,class:"p-fluid"},{default:d(()=>[s("form",{onSubmit:O(G,["prevent"])},[s("div",We,[s("label",Ze,n(e.$t("title")),1),o(y,{class:f(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.title}]),modelValue:l.value.title,"onUpdate:modelValue":t[15]||(t[15]=a=>l.value.title=a)},null,8,["modelValue","class"]),i.value&&!l.value.title?(u(),v("small",Je,n(e.$t("title")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ke,[s("label",Qe,n(e.$t("location")),1),o(y,{class:f(["bg-[#f7f5f5] text-center",{"p-invalid":i.value&&!l.value.location}]),modelValue:l.value.location,"onUpdate:modelValue":t[16]||(t[16]=a=>l.value.location=a)},null,8,["modelValue","class"]),i.value&&!l.value.location?(u(),v("small",Ye,n(e.$t("location")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",Ge,[s("label",He,n(e.$t("start_date")),1),o(q,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.start,"onUpdate:modelValue":t[17]||(t[17]=a=>l.value.start=a),modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":i.value&&!l.value.start})},null,8,["modelValue","class"]),i.value&&!l.value.start?(u(),v("small",Xe,n(e.$t("start_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",el,[s("label",ll,n(e.$t("end_date")),1),o(q,{style:{width:"100%"},showButtonBar:"",modelValue:l.value.end,"onUpdate:modelValue":t[18]||(t[18]=a=>l.value.end=a),modelModifiers:{number:!0},showIcon:"",class:f({"p-invalid":i.value&&!l.value.end})},null,8,["modelValue","class"]),i.value&&!l.value.end?(u(),v("small",tl,n(e.$t("end_date")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",al,[s("label",sl,n(e.$t("Employees")),1),o(j,{filter:"",id:"pv_id_1",style:{direction:"ltr !important"},modelValue:l.value.assigners,"onUpdate:modelValue":t[19]||(t[19]=a=>l.value.assigners=a),"option-value":"id",options:F.value,optionLabel:"name",class:f([{"p-invalid":i.value&&!l.value.assigners},"w-full"])},null,8,["modelValue","options","class"]),i.value&&!l.value.assigners?(u(),v("small",ol,n(e.$t("Employees")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",nl,[s("label",il,n(e.$t("lat")),1),o(D,{class:f(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.lat}]),modelValue:l.value.lat,"onUpdate:modelValue":t[20]||(t[20]=a=>l.value.lat=a)},null,8,["modelValue","class"]),i.value&&!l.value.lat?(u(),v("small",ul,n(e.$t("lat")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",dl,[s("label",rl,n(e.$t("long")),1),o(D,{class:f(["bg-[#f7f5f5]",{"p-invalid":i.value&&!l.value.long}]),modelValue:l.value.long,"onUpdate:modelValue":t[21]||(t[21]=a=>l.value.long=a)},null,8,["modelValue","class"]),i.value&&!l.value.long?(u(),v("small",vl,n(e.$t("long")+" "+e.$t("required"))+".",1)):c("",!0)]),s("div",cl,[o(B(A),{"api-key":"AIzaSyDZnJeq94aaneiA3QWUZdWYV9uKDEjxjas",onClick:N,style:{width:"100%",height:"500px"},center:{lat:parseFloat(p.value.latitude),lng:parseFloat(p.value.longitude)},zoom:14},{default:d(()=>[o(B(R),{options:{position:{lat:parseFloat(p.value.latitude),lng:parseFloat(p.value.longitude)}}},null,8,["options"])]),_:1},8,["center"])]),o(g,{label:e.$t("save"),icon:"pi pi-check ",class:"create",onClick:t[22]||(t[22]=a=>i.value=!0)},null,8,["label"])],40,Re)]),_:1},8,["visible","header"])])]),o(h)])}}};export{gl as default};
